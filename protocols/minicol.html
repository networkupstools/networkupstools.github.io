<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>Network UPS Tools - MiniCOL</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 10.2.0" />
<meta name="description" content="Power Devices support" />
<meta name="keywords" content="NUT, Network UPS Tools, Eaton, APC, Free Software, UPS, Uninterruptible Power Supplies, PDU, Power Distributions Units, Solar Controllers, power, power devices, control, monitor, Linux, Unix, Windows, Mac OS X" />
<meta name="format-detection" content="telephone=no" />
<link rel="stylesheet" href="../css/xhtml11.css" type="text/css" />
<link rel="stylesheet" href="../css/web-layout.css" type="text/css" />
<link rel="shortcut icon" href="../faviconut.ico" />
<link rel="icon" type="image/png" href="../faviconut.png" />
<script type="text/javascript" src="../scripts/asciidoc.js"></script>
<script type="text/javascript">
/*<![CDATA[*/
asciidoc.install(2);
/*]]>*/
</script>
<!--[if lte IE 7]>
<link rel="stylesheet" href="../css/ie-overrides.css" type="text/css" />
<![endif]-->
<!--[if lte IE 6]>
<script type="text/javascript" src="../scripts/filter_png.js"></script>
<![endif]-->
</head>
<body>
<div id="layout-banner-box">
<div id="layout-banner">
  <div id="layout-logo"><img src="../images/nut-logo.png" alt="NUT logo" /></div>
  <div id="layout-title">Network UPS Tools</div>
  <div id="layout-description">Power Devices support</div>
</div>
</div>
<div id="layout-menu-box">
  <ul id="layout-menu">
    <li><a href="../index.html">Home</a></li>
    <li><a href="../download.html">Download</a></li>
    <li><a href="../projects.html">Related projects</a></li>
    <li><a href="../stable-hcl.html">Compatibility</a></li>
    <li><a href="../features.html">Features</a></li>
    <li><a href="../documentation.html">Documentation</a></li>
    <li><a href="../support.html">Support</a></li>
    <li>* <a href="https://alioth-lists.debian.net/pipermail/nut-upsuser/">NUT UPS User archive</a></li>
    <li>* <a href="https://alioth-lists.debian.net/pipermail/nut-upsdev/">NUT UPS Dev archive</a></li>
    <li>* <a href="https://github.com/networkupstools/nut/">GitHub</a>:<a
        href="https://github.com/networkupstools/nut/issues">issues</a>,<a
        href="https://github.com/networkupstools/nut/wiki">wiki</a>
        and more</li>
    <li><a href="..//historic/index.html">Sub-sites for historic releases</a></li>
    <li><a href="https://opencollective.com/networkupstools/">Sponsor NUT</a></li>
  </ul>
  <!-- div id="sponsor"><span>Hosted by<br/></span>
    <a href="http://sponsor.com"><img src="../images/sponsor-logo.png" alt="Sponsor" /></a>
  </div -->
</div>
<div id="layout-content-box">
<div id="layout-content">
<div id="header">
<h1>MiniCOL</h1>
</div>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
<div id="content">
<div class="sect1">
<h2 id="_communication_specification">Communication Specification</h2>
<div class="sectionbody">
<div class="hdlist"><table>
<tr>
<td class="hdlist1">
Format
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
RS-232
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Baud rate
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
1200 bps
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Data
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
8 bits
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Start Bit
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
1 bit
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Stop Bit
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
1 bit
</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Parity
<br />
</td>
<td class="hdlist2">
<p style="margin-top: 0;">
None
</p>
</td>
</tr>
</table></div>
</div>
</div>
<div class="sect1">
<h2 id="_minicol_for_monups_iii_revision_1_2">"MiniCOL" for MonUPS III (revision 1.2)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_query_the_status_of_ups">Query the status of UPS</h3>
<div class="paragraph"><p>Command from PC to UPS</p></div>
<div class="tableblock">
<table rules="rows"
frame="hsides"
cellspacing="0" cellpadding="4">
<col />
<col />
<col />
<thead>
<tr>
<th align="center" valign="middle">Header (1 byte)        </th>
<th align="center" valign="middle">Command (1 byte)       </th>
<th align="center" valign="middle">CSUM</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center" valign="middle"><p class="table"><code><strong>Q</strong></code></p></td>
<td align="center" valign="middle"><p class="table"><strong><code>1</code></strong> (ASCII)</p></td>
<td align="center" valign="middle"><p class="table"><code>XX</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p><strong>CSUM</strong> = 2&#8217;s complement of the SUM of the total package</p></div>
</div>
<div class="sect2">
<h3 id="_ups_status_feedback_shutdown_request">UPS Status Feedback / Shutdown Request</h3>
<div class="paragraph"><p>Command from UPS to PC</p></div>
<div class="tableblock">
<table rules="rows"
frame="hsides"
cellspacing="0" cellpadding="4">
<col />
<col />
<col />
<thead>
<tr>
<th align="center" valign="middle">Header (1 byte)        </th>
<th align="center" valign="middle">Command (1 byte)                       </th>
<th align="center" valign="middle">CSUM</th>
</tr>
</thead>
<tbody>
<tr>
<td rowspan="5" align="center" valign="middle"><p class="table"><code><strong>Q</strong></code></p></td>
<td align="center" valign="middle"><p class="table"><strong><code>A</code></strong> - AC Fail</p></td>
<td rowspan="5" align="center" valign="middle"><p class="table"><code>XX</code></p></td>
</tr>
<tr>
<td align="center" valign="middle"><p class="table"><strong><code>B</code></strong> - Battery Low</p></td>
</tr>
<tr>
<td align="center" valign="middle"><p class="table"><strong><code>C</code></strong> - Both A &amp; B</p></td>
</tr>
<tr>
<td align="center" valign="middle"><p class="table"><strong><code>D</code></strong> - All normal</p></td>
</tr>
<tr>
<td align="center" valign="middle"><p class="table"><strong><code>E</code></strong> - System Shutdown Request</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p><strong><code>QE</code></strong> - UPS requests for System Shutdown. PC to read three consecutive QE bytes and acknowledge before proceeding with normal shutdown.</p></div>
</div>
<div class="sect2">
<h3 id="_system_amp_ups_shutdown">System &amp; UPS Shutdown</h3>
<div class="dlist"><dl>
<dt class="hdlist1">
Step 1. Command from PC to UPS
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="tableblock">
<table rules="rows"
frame="hsides"
cellspacing="0" cellpadding="4">
<col />
<col />
<col />
<thead>
<tr>
<th align="center" valign="middle">Header (1 byte)        </th>
<th align="center" valign="middle">Command (1 byte Integer)       </th>
<th align="center" valign="middle">CSUM</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center" valign="middle"><p class="table"><code><strong>T</strong></code></p></td>
<td align="center" valign="middle"><p class="table"><code>XX</code> (<code>1</code> ~ <code>255</code>)</p></td>
<td align="center" valign="middle"><p class="table"><code>YY</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>(<strong><code>T</code></strong> - stands for Time-delay, <code>XX</code> is the delay factor in multiple of 10 seconds. So, max. delay time = 42:30 min.)</p></div>
</div></div>
</dd>
<dt class="hdlist1">
Step 2. Command from UPS to PC
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="tableblock">
<table rules="rows"
frame="hsides"
cellspacing="0" cellpadding="4">
<col />
<col />
<col />
<thead>
<tr>
<th align="center" valign="middle">Header (1 byte)        </th>
<th align="center" valign="middle">Command        </th>
<th align="center" valign="middle">CSUM (same as MCOL checksum)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center" valign="middle"><p class="table"><code><strong>T</strong></code></p></td>
<td align="center" valign="middle"><p class="table"><code><strong>A</strong></code></p></td>
<td align="center" valign="middle"><p class="table"><code>XX</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>(<strong><code>TA</code></strong> - stands for Time-delay command acknowledged)</p></div>
</div></div>
</dd>
<dt class="hdlist1">
Step 3. Command from PC to UPS
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="tableblock">
<table rules="rows"
frame="hsides"
cellspacing="0" cellpadding="4">
<col />
<col />
<col />
<thead>
<tr>
<th align="center" valign="middle">Header (1 byte)        </th>
<th align="center" valign="middle">Command (1 byte)       </th>
<th align="center" valign="middle">CSUM</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center" valign="middle"><p class="table"><code><strong>S</strong></code></p></td>
<td align="center" valign="middle"><p class="table"><code><strong>D</strong></code></p></td>
<td align="center" valign="middle"><p class="table"><code>XX</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>(<strong><code>SD</code></strong> - stands for shutdown)</p></div>
</div></div>
</dd>
<dt class="hdlist1">
Step 4. Command from UPS to PC
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="tableblock">
<table rules="rows"
frame="hsides"
cellspacing="0" cellpadding="4">
<col />
<col />
<col />
<thead>
<tr>
<th align="center" valign="middle">Header (1 byte)        </th>
<th align="center" valign="middle">Command (1 byte)       </th>
<th align="center" valign="middle">CSUM</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center" valign="middle"><p class="table"><code><strong>S</strong></code></p></td>
<td align="center" valign="middle"><p class="table"><code><strong>A</strong></code></p></td>
<td align="center" valign="middle"><p class="table"><code>XX</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p>(<strong><code>SA</code></strong> - stands for shutdown acknowledged)</p></div>
</div></div>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_miscellaneous">Miscellaneous</h3>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
Software to poll the UPS at least 6 times in 2 seconds at program startup to determine if there is "NO COMMUNICATION" and advise "Please check cable connection", etc.
</p>
</li>
<li>
<p>
During normal operation, if software receives five checksum error, display "Communication Error".
</p>
</li>
<li>
<p>
If there is no response from the UPS, display "No Communication" (after 5 consecutive times) in RED colour (must be outstanding) .
</p>
</li>
<li>
<p>
PC to send a UPS shutdown delay <strong><code>T</code></strong><code>XX</code> and continue sending command until it receives a confirmation command <strong><code>TA</code></strong> before sending ups shutdown command <strong><code>SD</code></strong>.
<strong><code>T</code></strong><code>XX</code> - where <code>XX</code> is a multiple of 10 seconds.
So, maximum time delay is 42 minutes and 30 seconds (255 * 10 = 2550 seconds).
</p>
</li>
<li>
<p>
Software to have a UPS Off Delay setting screen to accommodate item d. above.
</p>
</li>
<li>
<p>
PC must send a <strong><code>SD</code></strong> continuously until it receives a <strong><code>SA</code></strong> from the UPS before system can perform shutdown.
</p>
</li>
<li>
<p>
Baudrate = 1200 bps.
</p>
</li>
<li>
<p>
Software to perform system shutdown when it receives three consecutive system shutdown request bytes (<strong><code>QE</code></strong>) from UPS.
A pop-up message with 5 seconds countdown, and message &#8216;System powering down, shutdown in 5 seconds&#8217; is to be displayed.
The usual system shutdown (with autosaving of files) will take place (to include item d. &amp; f. above).
</p>
</li>
</ol></div>
</div>
<div class="sect2">
<h3 id="_shutdown_timeline">Shutdown timeline</h3>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="images/minicol_shutdowntime.png" alt="Shutdown timeline" />
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2024-05-10 20:20:04 UTC
</div>
<div id="footer-badges">
<a href="https://github.com/networkupstools/nut">
  <img style="border:0;height:20"
    src="https://img.shields.io/github/checks-status/networkupstools/nut/master"
    alt="Latest GitHub checks status: master branch"/>
</a>
<!--
<a href="https://travis-ci.org/github/networkupstools/nut">
  <img style="border:0;height:20"
    src="https://api.travis-ci.org/networkupstools/nut.svg?branch=master"
    alt="Latest Travis CI build status: master branch"/>
</a>
-->
<a href="https://ci.networkupstools.org/job/nut/job/nut/job/master/">
  <img style="border:0;height:20"
    src="https://ci.networkupstools.org/buildStatus/icon?job=nut%2Fnut%2Fmaster"
    alt="Latest NUT CI build status: master branch"/>
</a>
<!-- MacOS, maybe later Windows builds: -->
<a href="https://app.circleci.com/pipelines/github/networkupstools">
  <img style="border:0;height:20"
    src="https://circleci.com/gh/networkupstools/nut/tree/master.svg?style=svg"
    alt="Latest Circle CI build status: master branch"/>
</a>
<!-- Windows, maybe later MacOS builds: -->
<a href="https://ci.appveyor.com/project/nut-travis/nut/build/artifacts">
  <img style="border:0;height:20"
    src="https://ci.appveyor.com/api/projects/status/vrhkatid9hr7lq7r/branch/master?svg=true&failingText=Windows-FAIL&passingText=Windows-OK&pendingText-Windows-PENDING"
    alt="Latest AppVeyor build status (NUT for Windows iterations)"/>
</a>
<!--
<a href="https://ci.networkupstools.org/job/nut/job/nut/job/fightwarn/">
  <img style="border:0;height:20"
    src="https://ci.networkupstools.org/buildStatus/icon?job=nut%2Fnut%2Ffightwarn&subject=Fightwarn%20Branch"
    alt="Latest NUT CI build status: fightwarn branch"/>
</a>
-->
<!--
<a href="https://github.com/networkupstools/nut/releases">
  <img style="border:0;height:20"
    src="https://img.shields.io/github/v/release/networkupstools/nut"
    alt="Latest GitHub drafted NUT source release"/>
</a>
-->
<a href="https://github.com/networkupstools/nut/releases">
  <img style="border:0;height:20"
    src="https://img.shields.io/github/v/tag/networkupstools/nut?sort=semver"
    alt="Latest Git-tagged NUT source release"/>
</a>
<!-- Maintainer note: for the counter below to work, a git tag
     is not sufficient -- a release must be drafted and published
     at https://github.com/networkupstools/nut/releases
     Counter URL may also be .../latest/BRANCHNAME -->
<a href="https://github.com/networkupstools/nut">
  <img style="border:0;height:20"
    src="https://img.shields.io/github/commits-since/networkupstools/nut/latest.svg"
    alt="Commits on master branch since latest release on GitHub"/>
</a>
<!-- See also:
 // https://web.archive.org/web/20200731075618/http://www.methods.co.nz/asciidoc/
 // https://github.com/asciidoc-py/asciidoc-py
 -->
<a href="https://asciidoc.org/">
  <img style="border:0;width:88px;height:31px"
    src="../images/asciidoc.png"
    alt="Powered by AsciiDoc"/>
</a>
<a href="https://validator.w3.org/check?uri=referer">
  <img style="border:0;width:88px;height:31px"
    src="https://www.w3.org/Icons/valid-xhtml11-blue"
    alt="Valid XHTML 1.1"/>
</a>
<a href="https://jigsaw.w3.org/css-validator/check?uri=referer">
  <img style="border:0;width:88px;height:31px"
    src="https://jigsaw.w3.org/css-validator/images/vcss-blue"
    alt="Valid CSS!"/>
</a>
<a href="https://www.gandi.net/">
  <img style="border:0;height:38px;"
       src="../images/gandi-ar21.svg"
       alt="DNS, redirection and related services Hoster"/>
</a>
<!--
// FH web site defunct since ~Apr 2024
<a href="https://fosshost.org/">
  <img style="border:0;width:112px;height:38px;"
       src="../images/ci/fosshost.org_Host_Light_38px.png"
       alt="Dedicated Hosting for NUT CI"/>
</a>
-->
<a href="https://www.digitalocean.com/?refcode=d2fbf2b9e082&utm_campaign=Referral_Invite&utm_medium=Referral_Program&utm_source=badge">
  <img style="border:0;height:38px;"
       src="https://opensource.nyc3.cdn.digitaloceanspaces.com/attribution/assets/PoweredByDO/DO_Powered_by_Badge_blue.svg"
       alt="Dedicated Hosting for NUT CI"/>
</a>
</div>
</div>
</div>
</div>
<!-- Google Analytics integration -->
<script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-9664272-1']);
        _gaq.push(['_trackPageview']);

        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

</script>
</body>
</html>
