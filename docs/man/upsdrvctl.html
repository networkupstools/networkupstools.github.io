<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 10.2.0" />
<title>UPSDRVCTL(8)</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overridden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
<meta name="format-detection" content="telephone=no" />
</head>
<body class="article">
<div id="header">
<h1>UPSDRVCTL(8)</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_name">NAME</h2>
<div class="sectionbody">
<div class="paragraph"><p>upsdrvctl - Network UPS Tools driver controller</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong>upsdrvctl</strong> -h</p></div>
<div class="paragraph"><p><strong>upsdrvctl</strong> [<em>OPTIONS</em>] {start | stop | shutdown | status} [<em>ups</em>]</p></div>
<div class="paragraph"><p><strong>upsdrvctl</strong> [<em>OPTIONS</em>] {list | -l} [<em>ups</em>]</p></div>
<div class="paragraph"><p><strong>upsdrvctl</strong> [<em>OPTIONS</em>] -c COMMAND [<em>ups</em>]</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong>upsdrvctl</strong> provides a uniform interface for controlling your UPS drivers.
You should use <code>upsdrvctl</code> command instead of direct calls to the drivers
whenever possible.</p></div>
<div class="paragraph"><p>When used properly, <code>upsdrvctl</code> lets you maintain identical startup
scripts across multiple systems with different UPS configurations.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph"><p>For operating systems with service management frameworks, such as
Solaris/illumos SMF or Linux systemd, the <a href="upsdrvsvcctl.html">upsdrvsvcctl(8)</a>
may be a better choice.</p></div>
<div class="paragraph"><p>In fact, service instances prepared by <a href="nut-driver-enumerator.html">nut-driver-enumerator(8)</a>
based on contents of your <a href="ups.conf.html">ups.conf(5)</a> file and automatically
maintained by the respective framework can conflict with manual execution
of drivers. In this case, <code>upsdrvctl</code> would emit a warning in NUT builds with
that capability (can be silenced by exporting a <code>NUT_QUIET_INIT_NDE_WARNING</code>
environment variable with any value).</p></div>
</td>
</tr></table>
</div>
<div class="paragraph"><p>You may be required to stop service units (if used) and run driver programs
directly rather than via <code>upsdrvctl</code> for troubleshooting, e.g. to facilitate
debug log collection or test any custom builds of drivers without conflict
with a normally running packaged instance.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_options">OPTIONS</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>-h</strong>
</dt>
<dd>
<p>
Display the help text.
</p>
</dd>
<dt class="hdlist1">
<strong>-r</strong> <em>directory</em>
</dt>
<dd>
<p>
If starting a driver, this value will direct it to <ulink url="https://linux.die.net/man/2/chroot">chroot(2)</ulink> into
<em>directory</em>.  This can be useful when securing systems.
</p>
<div class="paragraph"><p>This may be set in the <a href="ups.conf.html">ups.conf(5)</a> with the <code>chroot</code> directive
in the global section.</p></div>
</dd>
<dt class="hdlist1">
<strong>-t</strong>
</dt>
<dd>
<p>
Enable testing mode.  This also enables debug mode.  Testing mode makes
upsdrvctl display the actions it would execute without actually doing them.
Use this to test out your configuration without actually doing anything
to your UPS drivers.
</p>
<div class="paragraph"><p>This may be helpful when defining the <code>sdorder</code> directive in your
<a href="ups.conf.html">ups.conf(5)</a> section for the device.</p></div>
</dd>
<dt class="hdlist1">
<strong>-u</strong> <em>username</em>
</dt>
<dd>
<p>
If starting a driver, this value will direct it to <ulink url="https://linux.die.net/man/2/setuid">setuid(2)</ulink> to
the user id associated with <em>username</em>.
</p>
<div class="paragraph"><p>If the driver is started as <em>root</em> without specifying this value, it will
use the username that was compiled into the binary.  This defaults to
<em>nobody</em> (if not otherwise configured), which is far from ideal.</p></div>
<div class="paragraph"><p>This may be set in <a href="ups.conf.html">ups.conf(5)</a> with the <code>user</code> directive in the
global section.</p></div>
</dd>
<dt class="hdlist1">
<strong>-D</strong>
</dt>
<dd>
<p>
Raise the debug level.  Use this multiple times for additional details.
</p>
<div class="paragraph"><p>Note that this does not preclude the <code>upsdrvctl</code> tool from exiting after
its job is done (however an explicit <strong>-F</strong> option does).</p></div>
<div class="paragraph"><p>Also note that this option alone modifies the debug verbosity of the tool,
but not of the drivers it launches. See the additional <strong>-d</strong> option for that.</p></div>
</dd>
<dt class="hdlist1">
<strong>-d</strong>
</dt>
<dd>
<p>
Pass the selected debug level from <code>upsdrvctl</code> to launched drivers.
</p>
<div class="paragraph"><p>Note that by default for NUT daemons, enabled debugging means running
in foreground mode; you can specify <strong>-B</strong> additionally to avoid that.</p></div>
</dd>
<dt class="hdlist1">
<strong>-F</strong>
</dt>
<dd>
<p>
Driver will run in the foreground (not fork away from the <code>upsdrvctl</code>
process), regardless of debugging settings. It would also keep the tool
program itself foregrounded with driver daemons running as its children
(in case of a single driver startup, it would not even fork).
</p>
<div class="paragraph"><p>It would also not wait for drivers to complete initialization, so
<code>upsdrvctl</code> will warn about such situations.</p></div>
<div class="paragraph"><p>Specify twice (<code>-FF</code> or <code>-F -F</code>) to save the driver PID file even in
this mode (not saved by default when staying in foreground).</p></div>
</dd>
<dt class="hdlist1">
<strong>-B</strong>
</dt>
<dd>
<p>
Drivers will run in the background, regardless of debugging settings,
as set by <strong>-D</strong> and passed-through by <strong>-d</strong> options.
</p>
</dd>
<dt class="hdlist1">
<strong>-l</strong>
</dt>
<dd>
<p>
Alias for <code>list</code> command.
</p>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_commands">COMMANDS</h2>
<div class="sectionbody">
<div class="paragraph"><p><code>upsdrvctl</code> supports three active commands&#8201;&#8212;&#8201;<code>start</code>, <code>stop</code> and <code>shutdown</code>.
It also supports passing requests to running drivers using
<code>-c COMMAND</code> syntax, similar to that in some other daemons.
A couple of helper commands are also available&#8201;&#8212;&#8201;<code>list</code> and <code>status</code>.</p></div>
<div class="paragraph"><p>They all can take an optional argument which is a UPS name from
<a href="ups.conf.html">ups.conf(5)</a>.  Without that argument, they operate on every
UPS that is currently configured.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content"><code>upsdrvctl</code> can not manage devices not listed in <code>ups.conf</code>
(such as test drivers started with <code>-s TMP</code> option).</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>start</strong>
</dt>
<dd>
<p>
Start the UPS driver(s). In case of failure, further attempts may be executed
by using the <em>maxretry</em> and <em>retrydelay</em> options&#8201;&#8212;&#8201;see <a href="ups.conf.html">ups.conf(5)</a>.
</p>
</dd>
<dt class="hdlist1">
<strong>stop</strong>
</dt>
<dd>
<p>
Stop the UPS driver(s).  This does not send commands to the UPS.
</p>
</dd>
<dt class="hdlist1">
<strong>shutdown</strong>
</dt>
<dd>
<p>
Command the UPS driver(s) to run their shutdown sequence.  This
assumes that the driver is no longer running, and starts a fresh
instance via <code>drivername -k</code>.  It is intended to be used as the last step
in system shutdown, after the filesystems are no longer mounted <em>rw</em>.
Drivers are stopped according to their <code>sdorder</code> value&#8201;&#8212;&#8201;see
<a href="ups.conf.html">ups.conf(5)</a>.
</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">This will probably power off your computers, so don&#8217;t
play around with this option.  Only use it when your systems are prepared
to lose power.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Refer to <a href="ups.conf.html">ups.conf(5)</a> for using the <strong>nowait</strong> parameter.
It can be overridden by <code>NUT_IGNORE_NOWAIT</code> environment variable
(e.g. used to work around certain issues with systemd otherwise).</td>
</tr></table>
</div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>list</strong>
</dt>
<dd>
<p>
Without a further argument, report all currently known device configuration
names to <code>stdout</code>, one per line. With an argument, also try to report that
name, but exit with an error code if that name is not known.
</p>
</dd>
</dl></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The tool would exit with an error if <code>ups.conf</code> file is not found,
readable, or does not define any device sections (whose names are reported
here and managed in other commands).</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The tool name and NUT version banner line is also printed to <code>stdout</code>
before any other processing. This can be suppressed by <code>NUT_QUIET_INIT_BANNER</code>
environment variable (exported by caller and empty or "true"):</td>
</tr></table>
</div>
<div class="literalblock">
<div class="content">
<pre><code>:; NUT_QUIET_INIT_BANNER=true upsdrvctl list
dummy
UPS1
UPS2</code></pre>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>status</strong>
</dt>
<dd>
<p>
Similar to <code>list</code>, but reports more information&#8201;&#8212;&#8201;also the driver name, the
PID if it is running, and result of a signal probe to check it is responding.
The <code>NUT_QUIET_INIT_BANNER</code> suppression can be helpful for scripted parsing.
If there is anything to print (at least one device is known), the first line
of status report would be the heading with column names:
</p>
<div class="literalblock">
<div class="content">
<pre><code>:; NUT_QUIET_INIT_BANNER=true upsdrvctl status
UPSNAME              UPSDRV  RUNNING PF_PID  S_RESPONSIVE    S_PID   S_STATUS
dummy             dummy-ups  N/A     -3      NOT_RESPONSIVE  N/A
eco650           usbhid-ups  RUNNING 3559207 RESPONSIVE      3559207 "OL"
UPS2              dummy-ups  RUNNING 31455   RESPONSIVE      31455   "OL BOOST"</code></pre>
</div></div>
<div class="paragraph"><p>Values are TAB-separated, but UPSNAME and UPSDRV may be padded by spaces
on the right and on the left respectively. Any complex string values would
be encased in double-quotes.</p></div>
<div class="paragraph"><p>Fields reported (<code>PF_*</code> = according to PID file, if any; <code>S_*</code> = via socket
protocol):</p></div>
<div class="openblock">
<div class="content">
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>UPSNAME</strong>
</dt>
<dd>
<p>
driver section configuration name
</p>
</dd>
<dt class="hdlist1">
<strong>UPSDRV</strong>
</dt>
<dd>
<p>
driver program name per <code>ups.conf</code>
</p>
</dd>
<dt class="hdlist1">
<strong>RUNNING</strong>
</dt>
<dd>
<p>
<code>RUNNING</code> if <code>PF_PID</code> or <code>S_PID</code> is valid,
                         <code>STOPPED</code> if at least one PID value was parsed but
                         none was found running with a correct program name;
                         <code>N/A</code> if no PID file/socket reply or failed to parse.
                         First the PID file is consulted, but it may be absent
                         either due to command-line parameters of daemons, or
                         due to platform (WIN32). If no PID value was found and
                         confirmed this way, we fall back to checking the PID
                         reported via protocol (if available and different).
</p>
</dd>
<dt class="hdlist1">
<strong>PF_PID</strong>
</dt>
<dd>
<p>
PID of driver according to PID file (if any), or some
                         negative values upon errors (as defined in <code>common.c</code>)
                         including an absent PID file, invalid contents, or
                         unsupported platform for this mechanism (e.g. WIN32)
</p>
</dd>
<dt class="hdlist1">
<strong>S_RESPONSIVE</strong>
</dt>
<dd>
<p>
<code>RESPONSIVE</code> if <code>PING</code>/<code>PONG</code> during socket protocol
                         session setup succeeded; <code>NOT_RESPONSIVE</code> otherwise
</p>
</dd>
<dt class="hdlist1">
<strong>S_PID</strong>
</dt>
<dd>
<p>
PID of driver according to <code>GETPID</code> active query,
                         or <code>N/A</code> if the query failed
</p>
</dd>
<dt class="hdlist1">
<strong>S_STATUS</strong>
</dt>
<dd>
<p>
Quoted value of <code>ups.status</code> variable
</p>
</dd>
</dl></div>
</div></div>
<div class="paragraph"><p>This mode does not discover drivers that are not in <code>ups.conf</code> (e.g. started
manually for experiments with many <code>-x</code> CLI options).</p></div>
</dd>
<dt class="hdlist1">
<strong>-c</strong> <em>command</em>
</dt>
<dd>
<p>
Send <em>command</em> to the background process as a signal.  Valid commands
are:
</p>
<div class="openblock">
<div class="content">
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>dump</strong>
</dt>
<dd>
<p>
tell the driver(s) to dump currently known state
                   information to their <code>stdout</code> (if attached anywhere)
</p>
</dd>
<dt class="hdlist1">
<strong>reload</strong>
</dt>
<dd>
<p>
reread configuration files, ignoring modified settings
                   which can not be applied "on the fly"
</p>
</dd>
<dt class="hdlist1">
<strong>reload-or-error</strong>
</dt>
<dd>
<p>
reread configuration files, ignoring but counting
                   changed values which require a driver restart (can not be
                   changed on the fly), and return a success/fail code based
                   on that count, so the caller can decide the fate of the
                   currently running driver instance
</p>
</dd>
<dt class="hdlist1">
<strong>reload-or-exit</strong>
</dt>
<dd>
<p>
reread configuration files, exiting the old
                   driver process if it encounters modified settings
                   which can not be applied "on the fly" (so caller like
                   systemd can launch another copy of the driver)
</p>
</dd>
</dl></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>exit</strong>
</dt>
<dd>
<p>
tell the currently running driver instance to just exit
                   (so an external caller like the new driver instance, or
                   the systemd or SMF frameworks would start another copy)
</p>
</dd>
</dl></div>
</div></div>
</dd>
</dl></div>
<div class="paragraph"><p>If the <code>upsdrvctl</code> was launched to remain in memory and manage NUT driver
processes, it can receive supported signals and pass them to those drivers.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_environment_variables">ENVIRONMENT VARIABLES</h2>
<div class="sectionbody">
<div class="paragraph"><p><strong>NUT_DEBUG_LEVEL</strong> sets default debug verbosity if no <strong>-D</strong> arguments
were provided on command line, but does not request that the daemon
runs in foreground mode.</p></div>
<div class="paragraph"><p><strong>NUT_CONFPATH</strong> is the path name of the directory that contains
<code>ups.conf</code> and other configuration files.  If this variable is not set,
<strong>upsdrvctl</strong> (and the drivers) use a built-in default, which is often
<code>/usr/local/ups/etc</code>.</p></div>
<div class="paragraph"><p><strong>NUT_ALTPIDPATH</strong> is the path name of the directory in which
<strong>upsd</strong> and drivers store .pid files.  If this variable is not set,
<strong>upsd</strong> and drivers use either <strong>NUT_STATEPATH</strong> if set, or ALTPIDPATH if set,
or otherwise the built-in default <strong>STATEPATH</strong>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_diagnostics">DIAGNOSTICS</h2>
<div class="sectionbody">
<div class="paragraph"><p><code>upsdrvctl</code> will return a nonzero exit code if it encounters an error
while performing the desired operation.  This will also happen if a
driver takes longer than the <em>maxstartdelay</em> period to enter the
background.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph"><p><a href="upsdrvsvcctl.html">upsdrvsvcctl(8)</a>, <a href="nut-driver-enumerator.html">nut-driver-enumerator(8)</a>,
<a href="nutupsdrv.html">nutupsdrv(8)</a>, <a href="upsd.html">upsd(8)</a>, <a href="ups.conf.html">ups.conf(5)</a></p></div>
<div class="sect2">
<h3 id="_internet_resources">Internet resources:</h3>
<div class="paragraph"><p>The NUT (Network UPS Tools) home page: <a href="https://www.networkupstools.org/">https://www.networkupstools.org/</a></p></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2025-03-15 20:14:37 UTC -- Network UPS Tools 2.8.2.2393
</div>
</div>
</body>
</html>
