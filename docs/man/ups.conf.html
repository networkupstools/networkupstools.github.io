<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 10.2.0" />
<title>UPS.CONF(5)</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overridden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
<meta name="format-detection" content="telephone=no" />
</head>
<body class="article">
<div id="header">
<h1>UPS.CONF(5)</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_name">NAME</h2>
<div class="sectionbody">
<div class="paragraph"><p>ups.conf - UPS definitions for Network UPS Tools</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph"><p>This file is read by the driver controller <a href="upsdrvctl.html">upsdrvctl(8)</a>,
the UPS drivers which use the common core (see <a href="nutupsdrv.html">nutupsdrv(8)</a>),
<a href="nut-driver-enumerator.html">nut-driver-enumerator(8)</a>, and the NUT data server <a href="upsd.html">upsd(8)</a>.
The file begins with global directives, and then each UPS has a section
which contains a number of directives that set parameters for that UPS.</p></div>
<div class="paragraph"><p>A UPS section begins with the name of the UPS in brackets, and continues
until the next UPS name in brackets or until EOF.  The name "default" is
used internally in <a href="upsd.html">upsd(8)</a>, so you can&#8217;t use it in this file.</p></div>
<div class="paragraph"><p>You must define the <em>driver</em> and <em>port</em> elements for each entry.  Anything
after that in a section is optional.  A simple example might look like this:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>[myups]
        driver = blazer_ser
        port = /dev/ttyS0
        desc = "Web server UPS"</code></pre>
</div></div>
<div class="paragraph"><p>A slightly more complicated version includes some extras for the
hardware-specific part of the driver:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>[bigups]
        driver = apcsmart
        port = /dev/cua00
        cable = 940-0095B
        sdtype = 2
        desc = "Database server UPS"</code></pre>
</div></div>
<div class="paragraph"><p>In this case, the <a href="apcsmart.html">apcsmart(8)</a> driver will receive variables called
"cable" and "sdtype" which have special meanings.  See the man pages of
your driver(s) to learn which variables are supported and what they do.</p></div>
<div class="paragraph"><p>Here is another example, when connecting a serial UPS on Windows:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>[windows-ups]
        driver = mge-shut
        port = "\\\\.\\COM10"
        desc = "UPS on a Windows machine"</code></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_important_notes">IMPORTANT NOTES</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Contents of this file should be pure ASCII (character codes
  not in range would be ignored with a warning message).
</p>
</li>
<li>
<p>
Balance the run-time user permissions to access the file (and perhaps the
  directory it is in) for only <code>upsd</code> and the drivers to be able to read it;
  write access is not needed. It is common to use <code>chown root:nut</code> and
  <code>chmod 640</code> to set up acceptable file permissions.
</p>
<div class="ulist"><ul>
<li>
<p>
Packages (and build recipes) typically prepare one set of user and
    group accounts for NUT. Custom builds with minimal configuration might
    even use <code>nobody:nogroup</code> or similar, which is inherently insecure.
</p>
</li>
<li>
<p>
On systems with extra security concerns, NUT drivers, data server
    should run as separate user accounts which would be members of one
    same group for shared access to local Unix socket files and the
    directory they are in, as well for reading <code>ups.conf</code>, but different
    groups for other configuration file access. This would need some
    daemons to use customized <code>user</code>, <code>group</code>, <code>RUN_AS_USER</code> and/or
    <code>RUN_AS_GROUP</code> settings to override the single built-in value.
</p>
</li>
<li>
<p>
Note that the monitoring, logging, etc. clients are networked-only.
    They do not need access to these files and directories, and can run
    as an independent user and group altogether.
</p>
</li>
<li>
<p>
Keep in mind the security of also any backup copies of this file,
    e.g. the archive files it might end up in.
</p>
</li>
</ul></div>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_global_directives">GLOBAL DIRECTIVES</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>chroot</strong>
</dt>
<dd>
<p>
Optional.  The driver will chroot(2) to this directory during initialization.
This can be useful when securing systems.
</p>
</dd>
<dt class="hdlist1">
<strong>driverpath</strong>
</dt>
<dd>
<p>
Optional.  Path name of the directory in which the UPS driver executables
reside.  If you don&#8217;t specify this, the programs look in a built-in default
directory, which is often /usr/local/ups/bin.
</p>
</dd>
<dt class="hdlist1">
<strong>statepath</strong>
</dt>
<dd>
<p>
Optional.  Path name of the directory in which the UPS drivers should place
their state sockets for local communication with <code>upsd</code> data server, rather
than the default location that was compiled into the program, which is often
/var/state/ups.
</p>
<div class="paragraph"><p>Note that the drivers must use the same path as <code>upsd</code>, so the data server
would prefer this setting from <code>ups.conf</code> global section, if present, over
its own in <code>upsd.conf</code>.</p></div>
<div class="paragraph"><p>Environment variable <code>NUT_STATEPATH</code> set by caller can override this setting.</p></div>
</dd>
<dt class="hdlist1">
<strong>maxstartdelay</strong>
</dt>
<dd>
<p>
Optional.  Same as the UPS field of the same name, but this is the
default for UPSes that don&#8217;t have the field.
</p>
</dd>
<dt class="hdlist1">
<strong>maxretry</strong>
</dt>
<dd>
<p>
Optional.  Specify the number of attempts to start the driver(s), in case of
failure, before giving up. A delay of <em>retrydelay</em> is inserted between each
attempt. Caution should be taken when using this option, since it can
impact the time taken by your system to start.
</p>
<div class="paragraph"><p>The default is 1 attempt.</p></div>
</dd>
<dt class="hdlist1">
<strong>nowait</strong>
</dt>
<dd>
<p>
Optional.  Specify to upsdrvctl to not wait at all for the driver(s) to
execute the request command.
</p>
<div class="paragraph"><p>The default (omission) is to wait.</p></div>
<div class="paragraph"><p>It can be overridden by <code>NUT_IGNORE_NOWAIT</code> environment variable
(e.g. used to work around certain issues with systemd otherwise).</p></div>
</dd>
<dt class="hdlist1">
<strong>retrydelay</strong>
</dt>
<dd>
<p>
Optional.  Specify the delay between each restart attempt of the driver(s),
as specified by <em>maxretry</em>. Caution should be taken when using this option,
since it can impact the time taken by your system to start.
</p>
<div class="paragraph"><p>The default is 5 seconds.</p></div>
</dd>
<dt class="hdlist1">
<strong>pollinterval</strong>
</dt>
<dd>
<p>
Optional.  The status of the UPS will be refreshed after a maximum
delay which is controlled by this setting.  This is normally 2 seconds.
This setting may be useful if the driver is creating too much of a load
on your monitoring system or network.
</p>
<div class="paragraph"><p>Note that some drivers (such as <a href="usbhid-ups.html">usbhid-ups(8)</a>, <a href="snmp-ups.html">snmp-ups(8)</a>
and <a href="nutdrv_qx.html">nutdrv_qx(8)</a>) also have an option called <strong>pollfreq</strong> which
controls how frequently some of the less critical parameters are polled.
Details are provided in the respective driver man pages.</p></div>
</dd>
<dt class="hdlist1">
<strong>synchronous</strong>
</dt>
<dd>
<p>
Optional.  The drivers work by default in asynchronous mode initially
but can fall back to synchronous mode if writes to server socket failed
(i.e <strong>synchronous=auto</strong>).  This means that all data are pushed by the driver
on the communication socket to upsd (Unix socket on Unix, Named pipe
on Windows) without waiting for these data to be actually consumed.
With some HW, such as ePDUs, that can produce a lot of data,
asynchronous mode may cause some congestion, resulting in the socket to
be full, and the driver to appear as not connected.  In such case, the
driver will provide the following debug message:
</p>
<div class="literalblock">
<div class="content">
<pre><code>write XX bytes to socket Y failed</code></pre>
</div></div>
<div class="paragraph"><p>By enabling the <em>synchronous</em> flag (value = <em>yes</em>), the driver will wait
for data to be consumed by upsd, prior to publishing more.  This can be
enabled either globally or per driver.</p></div>
<div class="paragraph"><p>The default of <em>auto</em> acts like <em>no</em> (i.e. asynchronous mode) for backward
compatibility of the driver behavior, until communications fail with a
"Resource temporarily unavailable" condition, which happens when the
driver has many data points to send in a burst, and the server can not
handle that quickly enough so the buffer fills up.</p></div>
</dd>
<dt class="hdlist1">
<strong>user</strong>
</dt>
<dd>
<p>
Optional.  Overrides the compiled-in default unprivileged username for
all NUT device drivers. See the discussion of the <code>-u</code> option in
<a href="nutupsdrv.html">nutupsdrv(8)</a> for details.
</p>
</dd>
<dt class="hdlist1">
<strong>group</strong>
</dt>
<dd>
<p>
Optional.  Overrides the compiled-in (and/or global-section) default
unprivileged group name for all NUT device drivers, used for the
socket file access. See the discussion of the <code>-g</code> option in
<a href="nutupsdrv.html">nutupsdrv(8)</a> for details.
This may be specifically useful for ensuring access to dynamic device
filesystem nodes, such as USB (or serial-over-USB) hot-plug support,
or with device filesystems re-generated by an OS for every reboot.
</p>
</dd>
<dt class="hdlist1">
<strong>debug_min</strong> <em>INTEGER</em>
</dt>
<dd>
<p>
Optional.  Specify a minimum debug level for all driver daemons, e.g. for
troubleshooting a deployment, without impacting foreground or background
running mode directly. Command-line option <code>-D</code> can only increase this
verbosity level.
</p>
</dd>
<dt class="hdlist1">
<strong>LIBUSB_DEBUG</strong> <em>INTEGER</em>
</dt>
<dd>
<p>
Optional.  For run-time troubleshooting of USB-capable NUT drivers,
you can specify verbosity of LibUSB specific debugging as a numeric
value such as <code>4</code> ("All messages are emitted").  Should not have any
practical impact on other NUT drivers.
</p>
<div class="paragraph"><p>For more details, including the currently supported values for your
version of the library, see e.g.:</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="https://libusb.sourceforge.io/api-1.0/">https://libusb.sourceforge.io/api-1.0/</a>
</p>
</li>
<li>
<p>
<a href="https://libusb.sourceforge.io/api-1.0/group__libusb__lib.html">https://libusb.sourceforge.io/api-1.0/group__libusb__lib.html</a>
</p>
</li>
</ul></div>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_ups_fields">UPS FIELDS</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>driver</strong>
</dt>
<dd>
<p>
Required.  This specifies which program will be monitoring this UPS.
You need to specify the one that is compatible with your hardware.
See <a href="nutupsdrv.html">nutupsdrv(8)</a> for more information on drivers in general
and pointers to the man pages of specific drivers.
</p>
</dd>
<dt class="hdlist1">
<strong>port</strong>
</dt>
<dd>
<p>
Required.  This is the serial port where the UPS is connected.
On a Linux system, the first serial port usually is <em>/dev/ttyS0</em>.
On FreeBSD and similar systems, it probably will be <em>/dev/cuaa0</em>.
On Windows, the first serial port will be "\\\\.\\COM1" (note the
escaped slashes).
</p>
</dd>
<dt class="hdlist1">
<strong>user</strong>
</dt>
<dd>
<p>
Optional.  Overrides the compiled-in (and/or global-section) default
unprivileged username for a particular NUT device driver. See the
discussion of the <code>-u</code> option in <a href="nutupsdrv.html">nutupsdrv(8)</a> for details.
This may be specifically useful for ensuring access to dynamic device
filesystem nodes, such as USB (or serial-over-USB) hot-plug support,
or with device filesystems re-generated by an OS for every reboot.
</p>
</dd>
<dt class="hdlist1">
<strong>group</strong>
</dt>
<dd>
<p>
Optional.  Overrides the compiled-in (and/or global-section) default
unprivileged group name for a particular NUT device driver, used for
the socket file access. See the discussion of the <code>-g</code> option in
<a href="nutupsdrv.html">nutupsdrv(8)</a> for details.
This may be specifically useful for ensuring access to dynamic device
filesystem nodes, such as USB (or serial-over-USB) hot-plug support,
or with device filesystems re-generated by an OS for every reboot.
</p>
</dd>
<dt class="hdlist1">
<strong>sdorder</strong>
</dt>
<dd>
<p>
Optional.  When you have multiple UPSes on your system, you usually need to
turn them off in a certain order.  upsdrvctl shuts down all the 0s,
then the 1s, 2s, and so on.  To exclude a UPS from the shutdown sequence,
set this to -1.
</p>
<div class="paragraph"><p>The default value for this parameter is 0.</p></div>
</dd>
<dt class="hdlist1">
<strong>sdcommands</strong>
</dt>
<dd>
<p>
Optional.  Comma-separated list of instant command name(s) to send to
the UPS when you request its shutdown.
</p>
<div class="paragraph"><p>Default logic is built into each driver (where supported) and can be
referenced here as the <code>shutdown.default</code> value.</p></div>
<div class="paragraph"><p>The primary use-case is for devices whose drivers "natively" support
trying several commands, but the built-in order of those calls a
command that is mis-handled by the specific device model (so the
handling is reported as successful and the loop stops, but nothing
happens as far as the load power-down is concerned).</p></div>
<div class="paragraph"><p>Another use-case is differentiation of automated power-off scenarios
where the UPS and its load should stay "OFF" (e.g. by building emergency
power-off) vs. those where the load should return to work automatically
when it is safe to do so.  NOTE: This would <strong>currently</strong> need editing of
<code>ups.conf</code> for such cases before <code>nutshutdown</code> sees the file; but could
be better automated in future NUT releases.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">User-provided commands may be something other than actual shutdown,
e.g. a beeper to test that the INSTCMD happened such and when expected,
and the device was contacted, without impacting the load fed by the UPS.</td>
</tr></table>
</div>
</dd>
<dt class="hdlist1">
<strong>allow_killpower</strong>
</dt>
<dd>
<p>
Optional.  This allows you to request <code>driver.killpower</code> instant command,
to immediately call the driver-specific default implementation of
<code>upsdrv_shutdown()</code> method, for same effect as when a NUT driver is
started with <code>-k</code> command-line flag.  This option can be toggled with
<a href="upsrw.html">upsrw(8)</a> as <code>driver.flag.allow_killpower</code> during run-time.
</p>
</dd>
<dt class="hdlist1">
<strong>desc</strong>
</dt>
<dd>
<p>
Optional.  This allows you to set a brief description that upsd will provide
to clients that ask for a list of connected equipment.
</p>
</dd>
<dt class="hdlist1">
<strong>nolock</strong>
</dt>
<dd>
<p>
Optional.  When you specify this, the driver skips the port locking routines
every time it starts.  This may allow other processes to seize the port if
you start more than one accidentally.
</p>
<div class="paragraph"><p>You should only use this if your system won&#8217;t work without it.</p></div>
<div class="paragraph"><p>This may be needed on Mac OS X systems.</p></div>
</dd>
<dt class="hdlist1">
<strong>ignorelb</strong>
</dt>
<dd>
<p>
Optional.  When you specify this, the driver ignores a low battery condition
flag that is reported by the UPS (some devices will switch off almost
immediately after setting this flag, or will report this as soon as the
mains fails).  Instead it will use either of the following conditions to
determine when the battery is low:
</p>
<div class="literalblock">
<div class="content">
<pre><code>battery.charge &lt; battery.charge.low
battery.runtime &lt; battery.runtime.low</code></pre>
</div></div>
<div class="paragraph"><p>The idea is to set the battery.charge.low and/or battery.runtime.low levels
in <strong>ups.conf</strong> to a value that gives enough time to cleanly shutdown your
system:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>override.battery.charge.low = 30
override.battery.runtime.low = 180</code></pre>
</div></div>
<div class="paragraph"><p>In order for this to work, your UPS should be able to (reliably) report
charge and/or runtime remaining on battery.  Use with caution!</p></div>
</dd>
<dt class="hdlist1">
<strong>maxstartdelay</strong>
</dt>
<dd>
<p>
Optional.  This can be set as a global variable above your first UPS
definition and it can also be set in a UPS section.  This value controls how
long upsdrvctl will wait for the driver to finish starting.  This keeps your
system from getting stuck due to a broken driver or UPS.
</p>
<div class="paragraph"><p>Note that after this time <code>upsdrvctl</code> would just move along with its
business (whether retrying the same driver if <code>maxretry&gt;1</code>, or trying
another driver if starting them all, or just eventually exit); however,
each such most recently started "stuck" driver process may be further
initializing in the background, and might even succeed eventually.</p></div>
<div class="paragraph"><p>They would not be actively killed by <code>upsdrvctl</code> after this timeout expires.</p></div>
<div class="paragraph"><p>The default is 45 seconds.</p></div>
</dd>
<dt class="hdlist1">
<strong>synchronous</strong>
</dt>
<dd>
<p>
Optional.  Same as the global directive of the same name, but this is
for a specific device.
</p>
</dd>
<dt class="hdlist1">
<strong>usb_set_altinterface</strong>[=<em>altinterface</em>]
</dt>
<dd>
<p>
Optional.  Force the USB code to call <code>usb_set_altinterface(0)</code>, as was done in
NUT 2.7.2 and earlier.  This should not be necessary, since the default for
<code>bAlternateSetting</code> (as shown in lsusb) is zero on all USB devices seen to
date.  However, this redundant call to <code>usb_set_altinterface()</code> prevents
certain UPSes from working on Mac OS X. If your UPS requires explicitly setting
the alternate interface, include this flag, and email the nut-upsdev list with
details about your UPS and operating system.
</p>
</dd>
<dt class="hdlist1">
<strong>usb_config_index</strong>
</dt>
<dt class="hdlist1">
<strong>usb_hid_rep_index</strong>
</dt>
<dt class="hdlist1">
<strong>usb_hid_desc_index</strong>
</dt>
<dt class="hdlist1">
<strong>usb_hid_ep_in</strong>
</dt>
<dt class="hdlist1">
<strong>usb_hid_ep_out</strong>
</dt>
<dd>
<p>
Optional.  Force use of specific interface, endpoint, descriptor index etc.
numbers, rather than defaulting to 0 (rarely other values in certain drivers
for some devices known to use non-zero numbers). Specified as a hexadecimal
number.
</p>
<div class="paragraph"><p>As a rule of thumb for <code>usb_hid_desc_index</code> discovery, you can see larger
<code>wDescriptorLength</code> values (roughly 600+ bytes) in reports of <code>lsusb</code> or
similar tools.</p></div>
</dd>
<dt class="hdlist1">
<strong>default.&lt;variable&gt;</strong>
</dt>
<dd>
<p>
Optional.  Set a default value for &lt;variable&gt; which is used in case the UPS
doesn&#8217;t provide a value, but will be overwritten if a value is available
from the UPS:
</p>
<div class="literalblock">
<div class="content">
<pre><code>default.input.voltage.nominal = 230</code></pre>
</div></div>
<div class="paragraph"><p>The above will report the nominal input voltage to be 230, unless the UPS
tells us differently.</p></div>
</dd>
<dt class="hdlist1">
<strong>override.&lt;variable&gt;</strong>
</dt>
<dd>
<p>
Optional.  Set a value for &lt;value&gt; that overrides any value that may be read
from the UPS.  Used for overriding values from the UPS that are clearly wrong
(some devices report wrong values for battery voltage for instance):
</p>
<div class="literalblock">
<div class="content">
<pre><code>override.battery.voltage.nominal = 12</code></pre>
</div></div>
<div class="paragraph"><p>Use with caution!  This will only change the appearance of the variable to
the outside world, internally in the UPS the original value is used.</p></div>
</dd>
</dl></div>
<div class="paragraph"><p>All other fields are passed through to the hardware-specific part of the
driver.  See those manuals for the list of what is allowed.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
<strong>debug_min</strong> <em>INTEGER</em>
</dt>
<dd>
<p>
Optional.  Specify a minimum debug level for this driver daemon, e.g. for
troubleshooting a deployment, without impacting foreground or background
running mode directly.  If the global <code>debug_min</code> is also set, this
driver-level setting overrides it.  Command-line option <code>-D</code> can only
increase this verbosity level.
</p>
</dd>
<dt class="hdlist1">
<strong>LIBUSB_DEBUG</strong> <em>INTEGER</em>
</dt>
<dd>
<p>
Optional.  For run-time troubleshooting of USB-capable NUT drivers,
you can specify verbosity of LibUSB specific debugging as a numeric
value such as <code>4</code> ("All messages are emitted").
</p>
<div class="paragraph"><p>For more details, including the currently supported values for your
version of the library, see e.g.:</p></div>
<div class="ulist"><ul>
<li>
<p>
<a href="https://libusb.sourceforge.io/api-1.0/">https://libusb.sourceforge.io/api-1.0/</a>
</p>
</li>
<li>
<p>
<a href="https://libusb.sourceforge.io/api-1.0/group__libusb__lib.html">https://libusb.sourceforge.io/api-1.0/group__libusb__lib.html</a>
</p>
</li>
</ul></div>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_integration">INTEGRATION</h2>
<div class="sectionbody">
<div class="paragraph"><p><a href="upsdrvctl.html">upsdrvctl(8)</a> uses this file to start and stop the drivers.</p></div>
<div class="paragraph"><p>The drivers themselves also obtain configuration data from this file.
Each driver looks up its section and uses that to configure itself.</p></div>
<div class="paragraph"><p><a href="upsd.html">upsd(8)</a> learns about which UPSes are installed on this system by
reading this file.  If this system is called "doghouse" and you have
defined a UPS in your <strong>ups.conf</strong> called "snoopy", then you can monitor it
from <a href="upsc.html">upsc(8)</a> or similar as "snoopy@doghouse".</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph"><p><a href="upsd.html">upsd(8)</a>, <a href="nutupsdrv.html">nutupsdrv(8)</a>, <a href="upsdrvctl.html">upsdrvctl(8)</a>,
<a href="upsdrvsvcctl.html">upsdrvsvcctl(8)</a></p></div>
<div class="sect2">
<h3 id="_internet_resources">Internet resources</h3>
<div class="paragraph"><p>The NUT (Network UPS Tools) home page: <a href="https://www.networkupstools.org/">https://www.networkupstools.org/</a></p></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2025-03-16 20:24:38 UTC -- Network UPS Tools 2.8.2.2454
</div>
</div>
</body>
</html>
