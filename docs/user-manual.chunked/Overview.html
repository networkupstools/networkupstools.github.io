<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>2. Network UPS Tools Overview</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="home" href="index.html" title="Network UPS Tools User Manual" /><link rel="up" href="index.html" title="Network UPS Tools User Manual" /><link rel="prev" href="_introduction.html" title="1. Introduction" /><link rel="next" href="Features.html" title="3. Features" /><meta xmlns="" name="format-detection" content="telephone=no" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="_introduction.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="Features.html">Next</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Overview"></a>2. Network UPS Tools Overview</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_description"></a>2.1. Description</h3></div></div></div><p>Network UPS Tools is a collection of programs which provide a common
interface for monitoring and administering UPS, PDU and SCD hardware.
It uses a layered approach to connect all of the parts.</p><p>Drivers are provided for a wide assortment of equipment.  They
understand the specific language of each device and map it back to a
compatibility layer.  This means both an expensive high end UPS, a simple
"power strip" PDU, or any other power device can be handled transparently
with a uniform management interface.</p><p>This information is cached by the network server <code class="literal">upsd</code>, which then
answers queries from the clients.  upsd contains a number of access
control features to limit the abilities of the clients.  Only authorized
hosts may monitor or control your hardware if you wish.  Since the
notion of monitoring over the network is built into the software, you
can hang many systems off one large UPS, and they will all shut down
together. You can also use NUT to power on, off or cycle your data center
nodes, individually or globally through PDU outlets.</p><p>Clients such as <code class="literal">upsmon</code> check on the status of the hardware and do things
when necessary.  The most important task is shutting down the operating
system cleanly before the UPS runs out of power.  Other programs are
also provided to log information regularly, monitor status through your
web browser, and more.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_nut_and_the_ecosystem"></a>2.2. NUT and the ecosystem</h3></div></div></div><p>NUT comes pre-packaged for many operating systems and embedded in storage,
automation or virtualization appliances, and is also often shipped as the
software companion by several UPS vendors. Of course, it is quite normal
and supported to build your own — whether for an operating system which
lacks it yet, or for an older distribution which lacks the current NUT
version; whether to take advantage of new features or to troubleshoot a
new UPS deployment with a debugger in hand.</p><p>Given its core position at the heart of your systems' lifecycle, we make
it a point to have current NUT building and running anywhere, especially
where older releases did work before (including "abandonware" like the
servers and OSes from the turn of millennium): if those boxes are still
alive and in need of power protection, they should be able to get it.</p><div class="tip" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Tip</h3><p>If you like how the NUT project helps protect your systems from power
outages, please consider sponsoring or at least "starring" it on GitHub at
<a class="ulink" href="https://github.com/networkupstools/nut/" target="_top">https://github.com/networkupstools/nut/</a> - these stars are among metrics
which the larger potential sponsors consider when choosing how to help
FOSS projects. Keeping the lights shining in such a large non-regression
build matrix is a big undertaking!</p><p><span class="inlinemediaobject"></span></p><p>See <a class="link" href="Overview.html#acknowledgements-ci-ops">acknowledgements of organizations which help with NUT CI and other daily operations</a> for an overview of the shared effort.</p></div><p>As a FOSS project, for over a quarter of a century we welcome contributions
of both core code (drivers and other features), build recipes and other
integration elements to make it work on your favourite system, documentation
revisions to make it more accessible to newcomers, as well as hardware vendor
cooperation with first-hand driver and protocol submissions, and just about
anything else you can think of.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_nut_support_policy"></a>NUT Support Policy</h4></div></div></div><p>The Network UPS Tools project is a community-made open-source effort, primarily
made and maintained by people donating their spare time.</p><p>The support channels are likewise open, with preferred ones being
<a class="ulink" href="https://github.com/networkupstools/nut/issues" target="_top">the NUT project issue
tracker on GitHub</a> and the NUT Users mailing list, as detailed at
<a class="ulink" href="https://networkupstools.org/support.html" target="_top">https://networkupstools.org/support.html</a> page.</p><p>Please keep in mind that any help is provided by community members just like
yourself, as a best effort, and subject to their availability and experience.
It is expected that you have read the Frequently Asked Questions, looked at
the <a class="ulink" href="https://github.com/networkupstools/nut/wiki" target="_top">NUT wiki</a>, and have a
good grasp about the three-layer design and programs involved in a running
deployment of NUT, for a discussion to be constructive and efficient.</p><p>Be patient, polite, and prepare to learn and provide information about your
NUT deployment (version, configuration, OS…) and the device, to collect
logs, and to answer any follow-up questions about your situation.</p><p>Finally, note that NUT is packaged and delivered by packaging into numerous
operating systems, appliances and monitoring projects, and may be bundled
with third-party GUI clients.  It may be wise of end-users to identify such
cases and ask for help on the most-relevant forum (or several, including the
NUT support channels).  It is important to highlight that the NUT project
releases have for a long time been essentially snapshots of better-tested
code, and we do not normally issue patches to "hot-fix" any older releases.</p><p>Any improvements of NUT itself are made in the current code base, same as
any other feature development, so to receive desired fixes on your system
(and/or to check that they do solve your particular issue), expect to be
asked to build the recent development iteration from GitHub or work with
your appliance vendor to get a software upgrade.</p><p>Over time, downstream OS packaging or other integrations which use NUT, may
issue patches as new package revisions, or new baseline versions of NUT,
according to <span class="strong"><strong>their</strong></span> release policies. It is not uncommon for distributions,
especially "stable" flavours, to be a few years behind upstream projects.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_installing"></a>2.3. Installing</h3></div></div></div><p>If you are installing these programs for the first time, go read the
<a class="link" href="_installation_instructions.html" title="5. Installation instructions">installation instructions</a>
to find out how to do that.  This document contains more information
on what all of this stuff does.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_upgrading"></a>2.4. Upgrading</h3></div></div></div><p>When upgrading from an older version, always check the
<a class="link" href="Upgrading_notes.html" title="I. Upgrading notes">upgrading notes</a> to see what may have
changed.  Compatibility issues and other changes will be listed there
to ease the process.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_configuring_and_using"></a>2.5. Configuring and using</h3></div></div></div><p>Once NUT is installed, refer to the
<a class="link" href="Configuration_notes.html" title="6. Configuration notes">configuration notes</a> for directions.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_documentation"></a>2.6. Documentation</h3></div></div></div><p>This is just an overview of the software.  You should read the man pages,
included example configuration files, and auxiliary documentation for the
parts that you intend to use.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_network_information"></a>2.7. Network Information</h3></div></div></div><p>These programs are designed to share information over the network.  In
the examples below, <code class="literal">localhost</code> is used as the hostname.  This can also
be an IP address or a fully qualified domain name.  You can specify a
port number if your upsd process runs on another port.</p><p>In the case of the program <code class="literal">upsc</code>, to view the variables on the UPS called
sparky on the <code class="literal">upsd</code> server running on the local machine, you’d do this:</p><pre class="literallayout">/usr/local/ups/bin/upsc sparky@localhost</pre><p>The default port number is 3493.  You can change this with
"configure --with-port" at compile-time.  To make a client talk to upsd
on a specific port, add it after the hostname with a colon, like this:</p><pre class="literallayout">/usr/local/ups/bin/upsc sparky@localhost:1234</pre><p>This is handy when you have a mixed environment and some of the systems
are on different ports.</p><p>The general form for UPS identifiers is this:</p><pre class="literallayout">&lt;upsname&gt;[@&lt;hostname&gt;[:&lt;port&gt;]]</pre><p>Keep this in mind when viewing the examples below.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_manifest"></a>2.8. Manifest</h3></div></div></div><p>This package is broken down into several categories:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<span class="strong"><strong>drivers</strong></span>     - These programs talk directly to your UPS hardware.
</li><li class="listitem">
<span class="strong"><strong>server</strong></span>      - upsd serves data from the drivers to the network.
</li><li class="listitem">
<span class="strong"><strong>clients</strong></span>     - They talk to upsd and do things with the status data.
</li><li class="listitem">
<span class="strong"><strong>cgi-bin</strong></span>     - Special class of clients that you can use with your web server.
</li><li class="listitem">
<span class="strong"><strong>scripts</strong></span>     - Contains various scripts, like the Perl and Python binding,
integration bits and applications.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_drivers"></a>2.9. Drivers</h3></div></div></div><p>These programs provide support for specific UPS models.  They understand
the protocols and port specifications which define status information
and convert it to a form that upsd can understand.</p><p>To configure drivers, edit ups.conf.  For this example, we’ll have a UPS
called "sparky" that uses the apcsmart driver and is connected to
<code class="literal">/dev/ttyS1</code>.  That’s the second serial port on most Linux-based systems.
The entry in <code class="literal">ups.conf</code> looks like this:</p><pre class="literallayout">[sparky]
        driver = apcsmart
        port = /dev/ttyS1</pre><p>To start and stop drivers, use upsdrvctl of upsdrvsvcctl (installed on
operating systems with a service management framework supported by NUT).
By default, it will start or stop every UPS in the config file:</p><pre class="literallayout">/usr/local/ups/sbin/upsdrvctl start
/usr/local/ups/sbin/upsdrvctl stop</pre><p>However, you can also just start or stop one by adding its name:</p><pre class="literallayout">/usr/local/ups/sbin/upsdrvctl start sparky
/usr/local/ups/sbin/upsdrvctl stop sparky</pre><p>On operating systems with a supported service management framework,
you might wrap your NUT drivers into individual services instances
with:</p><pre class="literallayout">/usr/local/ups/sbin/upsdrvsvcctl resync</pre><p>and then manage those service instances with commands like:</p><pre class="literallayout">/usr/local/ups/sbin/upsdrvsvcctl start sparky
/usr/local/ups/sbin/upsdrvsvcctl stop sparky</pre><p>To find the driver name for your device, refer to the section below
called "HARDWARE SUPPORT TABLE".</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_extra_settings"></a>Extra Settings</h4></div></div></div><p>Some drivers may require additional settings to properly communicate
with your hardware.  If it doesn’t detect your UPS by default, check the
driver’s man page or help (-h) to see which options are available.</p><p>For example, the usbhid-ups driver allows you to use USB serial numbers to
distinguish between units via the "serial" configuration option.  To use this
feature, just add another line to your ups.conf section for that UPS:</p><pre class="literallayout">[sparky]
        driver = usbhid-ups
        port = auto
        serial = 1234567890</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_hardware_compatibility_list"></a>Hardware Compatibility List</h4></div></div></div><p>The <a class="link" href="HCL.html" title="D. Hardware Compatibility List">Hardware Compatibility List</a> is available in the source directory
(<span class="emphasis"><em>nut-X.Y.Z/data/driver.list</em></span>), and is generally distributed with packages.
For example, it is available on Debian systems as:</p><pre class="literallayout">/usr/share/nut/driver.list</pre><p>This table is also available <a class="ulink" href="https://www.networkupstools.org/stable-hcl.html" target="_top">online</a>.</p><p>If your driver has vanished, see the <a class="ulink" href="../FAQ.html" target="_top">FAQ</a> and
<a class="link" href="Upgrading_notes.html" title="I. Upgrading notes">Upgrading notes</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_generic_device_drivers"></a>Generic Device Drivers</h4></div></div></div><p>NUT provides several generic drivers that support a variety of very similar
models.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">
The <code class="literal">genericups</code> driver supports many serial models that use the same basic
principle to communicate with the computer.  This is known as "contact
closure", and basically involves raising or lowering signals to indicate
power status.
</p><p class="simpara">This type of UPS tends to be cheaper, and only provides the very simplest
data about power and battery status.  Advanced features like battery
charge readings and such require a "smart" UPS and a driver which
supports it.</p><p class="simpara">See the <a class="ulink" href="../man/genericups.html" target="_top">genericups(8)</a> man page for more information.</p></li><li class="listitem"><p class="simpara">
The <code class="literal">usbhid-ups</code> driver attempts to communicate with USB HID Power Device
Class (PDC) UPSes. These units generally implement the same basic protocol,
with minor variations in the exact set of supported attributes. This driver
also applies several correction factors when the UPS firmware reports values
with incorrect scale factors.
</p><p class="simpara">See the <a class="ulink" href="../man/usbhid-ups.html" target="_top">usbhid-ups(8)</a> man page for more information.</p></li><li class="listitem"><p class="simpara">
The <code class="literal">nutdrv_qx</code> driver supports the Megatec / Q1 protocol that is used in
many brands (Blazer, Energy Sistem, Fenton Technologies, Mustek, Voltronic
Power and many others).
</p><p class="simpara">See the <a class="ulink" href="../man/nutdrv_qx.html" target="_top">nutdrv_qx(8)</a> man page for more information.</p></li><li class="listitem"><p class="simpara">
The <code class="literal">snmp-ups</code> driver handles various SNMP enabled devices, from many
different manufacturers. In SNMP terms, <code class="literal">snmp-ups</code> is a manager, that
monitors SNMP agents.
</p><p class="simpara">See the <a class="ulink" href="../man/snmp-ups.html" target="_top">snmp-ups(8)</a> man page for more information.</p></li><li class="listitem"><p class="simpara">
The <code class="literal">powerman-pdu</code> is a bridge to the PowerMan daemon, thus handling all
PowerMan supported devices. The PowerMan project supports several serial
and networked PDU, along with Blade and IPMI enabled servers.
</p><p class="simpara">See the <a class="ulink" href="../man/powerman-pdu.html" target="_top">powerman-pdu(8)</a> man page for more
information.</p></li><li class="listitem"><p class="simpara">
The <code class="literal">apcupsd-ups</code> driver is a bridge to the Apcupsd daemon, thus handling
all Apcupsd supported devices. The Apcupsd project supports many serial,
USB and networked APC UPS.
</p><p class="simpara">See the <a class="ulink" href="../man/apcupsd-ups.html" target="_top">apcupsd-ups(8)</a> man page for more information.</p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_ups_shutdowns"></a>UPS Shutdowns</h4></div></div></div><p>upsdrvctl can also shut down (power down) all of your UPS hardware.</p><div class="warning" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Warning</h3><p>If you play around with this command, expect your filesystems
to die.  Don’t power off your computers unless they’re ready for it:</p><pre class="literallayout">/usr/local/ups/sbin/upsdrvctl shutdown
/usr/local/ups/sbin/upsdrvctl shutdown sparky</pre></div><p>You should read the <a class="link" href="Configuration_notes.html#UPS_shutdown" title="6.3. Configuring automatic shutdowns for low battery events">Configuring automatic UPS shutdowns</a>
chapter to learn more about when to use this feature.  If called at the wrong
time, you may cause data loss by turning off a system with a filesystem
mounted read-write.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_power_distribution_unit_management"></a>Power distribution unit management</h4></div></div></div><p>NUT also provides an advanced support for power distribution units.</p><p>You should read the
<a class="link" href="outlet_management.html" title="8. NUT outlets management and PDU notes">NUT outlets management and PDU notes</a>
chapter to learn more about when to use this feature.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_network_server"></a>2.10. Network Server</h3></div></div></div><p><code class="literal">upsd</code> is responsible for passing data from the drivers to the client
programs via the network.  It should be run immediately after <code class="literal">upsdrvctl</code>
in your system’s startup scripts.</p><p><code class="literal">upsd</code> should be kept running whenever possible, as it is the only source
of status information for the monitoring clients like <code class="literal">upsmon</code>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_monitoring_client"></a>2.11. Monitoring client</h3></div></div></div><p><code class="literal">upsmon</code> provides the essential feature that you expect to find in UPS
monitoring software: safe shutdowns when the power fails.</p><p>In the layered scheme of NUT software, it is a client.  It has this
separate section in the documentation since it is so important.</p><p>You configure it by telling it about UPSes that you want to monitor in
upsmon.conf.  Each UPS can be defined as one of two possible types:
a "primary" or "secondary".</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_primary"></a>Primary</h4></div></div></div><p>The monitored UPS possibly supplies power to this system running <code class="literal">upsmon</code>,
but more importantly — this system can manage the UPS (typically, this
instance of <code class="literal">upsmon</code> runs on the same system as the <code class="literal">upsd</code> and driver(s)):
it is capable and responsible for shutting it down when the battery is
depleted (or in another approach, lingering to deplete it or to tell the
UPS to reboot its load after too much time has elapsed and this system
is still alive — meaning wall power returned at a  "wrong" moment).</p><p>The shutdown of this (primary) system itself, as well as eventually an
UPS shutdown, occurs after any secondary systems ordered to shut down
first have disconnected, or a critical urgency threshold was passed.</p><p>If your UPS is plugged directly into a system’s serial or USB port, the
<code class="literal">upsmon</code> process on that system should define its relation to that UPS
as a primary. It may be more complicated for higher-end UPSes with a
shared network management capability (typically via SNMP) or several
serial/USB ports that can be used simultaneously, and depends on what
vendors and drivers implement. Setups with several competing primaries
(for redundancy) are technically possible, if each one runs its own
full stack of NUT, but results can be random (currently NUT does not
provide a way to coordinate several entities managing the same device).</p><p>For a typical home user, there’s one computer connected to one UPS.
That means you would run on the same computer the whole NUT stack — a suitable driver, <code class="literal">upsd</code>, and <code class="literal">upsmon</code> in primary mode.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_secondary"></a>Secondary</h4></div></div></div><p>The monitored UPS may supply power to the system running <code class="literal">upsmon</code> (or
alternatively, it may be a monitoring station with zero PSUs fed by
that UPS), but more importantly, this system can’t manage the UPS — e.g. shut it down directly (through a locally running NUT driver).</p><p>Use this mode when you run multiple computers on the same UPS.
Obviously, only one can be connected to the serial or USB port
on a typical UPS, and that system is the primary. Everything
else is a secondary.</p><p>For a typical home user, there’s one computer connected to one UPS.
That means you run a driver, <code class="literal">upsd</code>, and <code class="literal">upsmon</code> in primary mode.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_additional_information"></a>Additional Information</h4></div></div></div><p>More information on configuring upsmon can be found in these places:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
The <a class="ulink" href="../man/upsmon.html" target="_top">upsmon(8)</a> man page
</li><li class="listitem">
<a class="link" href="Configuration_notes.html#BigServers" title="6.5. Typical setups for big servers with UPS redundancy">Typical setups for big servers</a>
</li><li class="listitem">
<a class="link" href="Configuration_notes.html#UPS_shutdown" title="6.3. Configuring automatic shutdowns for low battery events">Configuring automatic UPS shutdowns</a> chapter
</li><li class="listitem">
The stock <code class="literal">upsmon.conf</code> that comes with the package
</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_clients"></a>2.12. Clients</h3></div></div></div><p>Clients talk to upsd over the network and do useful things with the data
from the drivers.  There are tools for command line access, and a few
special clients which can be run through your web server as CGI
programs.</p><p>For more details on specific programs, refer to their man pages.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_upsc"></a>upsc</h4></div></div></div><p><code class="literal">upsc</code> is a simple client that will display the values of variables known
to <code class="literal">upsd</code> and your UPS drivers.  It will list every variable by default,
or just one if you specify an additional argument.  This can be useful
in shell scripts for monitoring something without writing your own
network code.</p><p><code class="literal">upsc</code> is a quick way to find out if your driver(s) and upsd are working
together properly.  Just run <code class="literal">upsc &lt;ups&gt;</code> to see what’s going on, i.e.:</p><pre class="literallayout">morbo:~$ upsc sparky@localhost
ambient.humidity: 035.6
ambient.humidity.alarm.maximum: NO,NO
ambient.humidity.alarm.minimum: NO,NO
ambient.temperature: 25.14
...</pre><p>If you are interested in writing a simple client that monitors <code class="literal">upsd</code>,
the source code for <code class="literal">upsc</code> is a good way to learn about using the
upsclient functions.</p><p>See the <a class="ulink" href="../man/upsc.html" target="_top">upsc(8)</a> man page and
<a class="link" href="nut-names.html" title="C. NUT command and variable naming scheme">NUT command and variable naming scheme</a> for more information.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_upslog"></a>upslog</h4></div></div></div><p><code class="literal">upslog</code> will write status information from <code class="literal">upsd</code> to a file at set
intervals.  You can use this to generate graphs or reports with other
programs such as <code class="literal">gnuplot</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_upsrw"></a>upsrw</h4></div></div></div><p><code class="literal">upsrw</code> allows you to display and change the read/write variables in your
UPS hardware.  Not all devices or drivers implement this, so this may
not have any effect on your system.</p><p>A driver that supports read/write variables will give results like this:</p><pre class="screen">        $ upsrw sparky@localhost

        ( many skipped )

        [ups.test.interval]
        Interval between self tests
        Type: ENUM
        Option: "1209600"
        Option: "604800" SELECTED
        Option: "0"

        ( more skipped )</pre><p>On the other hand, one that doesn’t support them won’t print anything:</p><pre class="screen">        $ upsrw fenton@gearbox

        ( nothing )</pre><p><code class="literal">upsrw</code> requires administrator powers to change settings in the hardware.
Refer to <a class="ulink" href="../man/upsd.users.html" target="_top">upsd.users(5)</a> for information on defining
users in <code class="literal">upsd</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_upscmd"></a>upscmd</h4></div></div></div><p>Some UPS hardware and drivers support the notion of an instant command -
a feature such as starting a battery test, or powering off the load.
You can use upscmd to list or invoke instant commands if your
hardware/drivers support them.</p><p>Use the -l command to list them, like this:</p><pre class="screen">        $ upscmd -l sparky@localhost
        Instant commands supported on UPS [sparky@localhost]:

        load.on - Turn on the load immediately
        test.panel.start - Start testing the UPS panel
        calibrate.start - Start run time calibration
        calibrate.stop - Stop run time calibration
        ...</pre><p><code class="literal">upscmd</code> requires administrator powers to start instant commands.
To define users and passwords in <code class="literal">upsd</code>, see
<a class="ulink" href="../man/upsd.users.html" target="_top">upsd.users(5)</a>.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_cgi_programs"></a>2.13. CGI Programs</h3></div></div></div><p>The CGI programs are clients that run through your web server.  They
allow you to see UPS status and perform certain administrative commands
from any web browser.  Javascript and cookies are not required.</p><p>These programs are not installed or compiled by default.  To compile
and install them, first run <code class="literal">configure --with-cgi</code>, then do <code class="literal">make</code> and
<code class="literal">make install</code>.  If you receive errors about "gd" during configure, go
get it and install it before continuing.</p><p>You can get the source here:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="ulink" href="http://www.libgd.org/" target="_top">http://www.libgd.org/</a>
</li></ul></div><p>In the event that you need libpng or zlib in order to compile gd,
they can be found at these URLs:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<a class="ulink" href="http://www.libpng.org/pub/png/pngcode.html" target="_top">http://www.libpng.org/pub/png/pngcode.html</a>
</li><li class="listitem">
<a class="ulink" href="http://www.zlib.net/" target="_top">http://www.zlib.net/</a>
</li></ul></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_access_restrictions"></a>Access Restrictions</h4></div></div></div><p>The CGI programs use hosts.conf to see if they are allowed to talk to a
host.  This keeps malicious visitors from creating queries from your web
server to random hosts on the Internet.</p><p>If you get error messages that say "Access to that host is not
authorized", you’re probably missing an entry in your hosts.conf.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_upsstats"></a>upsstats</h4></div></div></div><p><code class="literal">upsstats</code> generates web pages from HTML templates, and plugs in status
information in the right places.  It looks like a distant relative of
APC’s old Powerchute interface.  You can use it to monitor several
systems or just focus on one.</p><p>It also can generate IMG references to <code class="literal">upsimage</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_upsimage"></a>upsimage</h4></div></div></div><p>This is usually called by upsstats via IMG SRC tags to draw either the
utility or outgoing voltage, battery charge percent, or load percent.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_upsset"></a>upsset</h4></div></div></div><p><code class="literal">upsset</code> provides several useful administration functions through a web
interface.  You can use <code class="literal">upsset</code> to kick off instant commands on your UPS
hardware like running a battery test.  You can also use it to change
variables in your UPS that accept user-specified values.</p><p>Essentially, <code class="literal">upsset</code> provides the functions of <code class="literal">upsrw</code> and <code class="literal">upscmd</code>, but
with a happy pointy-clicky interface.</p><p><code class="literal">upsset</code> will not run until you convince it that you have secured your
system.  You <span class="strong"><strong>must</strong></span> secure your CGI path so that random interlopers
can’t run this program remotely.  See the <code class="literal">upsset.conf</code> file.  Once you
have secured the directory, you can enable this program in that
configuration file.  It is not active by default.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_version_numbering"></a>2.14. Version Numbering</h3></div></div></div><p>The version numbers historically worked like this: if the middle number
is odd, it’s a development tree, otherwise it is the stable tree.</p><p>The past stable trees were 1.0, 1.2, 1.4, 2.0, 2.2 and 2.4, with the
latest such stable tree designated 2.6.  The development trees were 1.1,
1.3, 1.5, 2.1 and 2.3.  Since the 2.4 release, there is no real separate
development branch anymore since the code is available through a revision
control system (namely, Git — or actually Subversion back then), development
happens in feature branches that are eventually merged into the main trunk,
and its snapshots become published releases. As a result, subsequent versions
(2.7 and 2.8) were released without regard for even/odd values of the minor
version component.</p><p>Since 2.7 line of releases, sources are tracked in Git revision control
system, with the project ecosystem being hosted on GitHub, and any code
improvements or other contributions merged through common pull request
approach and custom NUT CI testing on multiple platforms.</p><p>Major release jumps are mostly due to large changes to the features
list.  There have also been a number of architectural changes which
may not be noticeable to most users, but which can impact developers.</p><p>Since NUT v2.8.2 or so, development iterations have additional version
components, to account for the amount of commits on the main branch
(<code class="literal">master</code>) since the last known Git tag, and amount of commits on the
developed feature branch that are unique to it compared to main branch.
This allows for a reasonably growing version of stable baseline and
local development, so that experimental packages can be installed as
upgrades (or well-exposed downgrades).</p><p>While the NUT releases retain the semantic versioning three-component
standard, interim builds (trunk snapshots and development branches)
can expose a much more complex structure with the amount of commits
in the trunk since last release, and amount of commits on the branch
unique to it (not in the trunk). Additional data may include overall
amount of commits in the current build since last release, and the
git commit has identifier of the built code base.</p><p>More details can be seen in <code class="literal">docs/nut-versioning.adoc</code> file in the
NUT source code base.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_backwards_and_forwards_compatibility"></a>2.15. Backwards and Forwards Compatibility</h3></div></div></div><p>The network protocol for the current version of NUT should be
backwards-compatible all the way back to version 1.4. A newer client should
fail gracefully when querying an older server.</p><p>If you need more details about cross-compatibility of older NUT releases
(1.x vs. 2.x), please see the <a class="link" href="Project_History.html" title="J. Project history">Project history</a> chapter.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_support_help_etc"></a>2.16. Support / Help / etc.</h3></div></div></div><p>If you are in need of help, refer to the
<a class="link" href="Support_Request.html" title="F. Support instructions">Support instructions</a> in the user manual.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_hacking_development_info"></a>2.17. Hacking / Development Info</h3></div></div></div><p>Additional documentation can be found in:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
the <a class="ulink" href="../developer-guide.chunked/index.html" target="_top">Developer Guide</a>,
</li><li class="listitem">
the <a class="ulink" href="../packager-guide.chunked/index.html" target="_top">Packager Guide</a>.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_acknowledgements_contributions"></a>2.18. Acknowledgements / Contributions</h3></div></div></div><p>The many people who have participated in creating and improving NUT are
listed in the user manual <a class="link" href="Acknowledgements.html" title="B. Acknowledgements / Contributions">acknowledgements appendix</a>.</p><p><a id="acknowledgements-ci-ops"></a>We would like to highlight some organizations which provide continuous
support to the NUT project (and many other FOSS projects) on technological
and organizational sides, such as helping keep the donations transparent,
NUT CI farm afloat, and public resources visible. Thanks for keeping the
clocks ticking, day and night:</p><div class="informaltable"><table class="informaltable" cellpadding="4px" style="border: none;"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><tbody><tr><td style="" align="center" valign="top"><p><span class="inlinemediaobject"><img src="images/ci/GitHub-Mark-140pxW.png" width="140" height="140" alt="GitHub logo" /></span></p></td><td style="" align="left" valign="top"><p>The <a class="ulink" href="https://github.com/networkupstools/" target="_top">"NetworkUPSTools" organization
  on GitHub</a> arranges a lot of things, including source code hosting for NUT
  itself and several related projects, team management, projects, issue and
  pull request discussions, sponsorship, nut-website rendering and hosting,
  some automated actions, and more…</p></td></tr><tr><td style="" align="center" valign="top"><p><span class="inlinemediaobject"><img src="images/ci/jenkins-nut-transparent-bg-140pxW.png" width="139" height="104" alt="Jenkins and NUT logo" /></span></p></td><td style="" align="left" valign="top"><p>The <a class="ulink" href="https://www.jenkins.io/" target="_top">Jenkins CI</a> project and its huge plugin
  ecosystem provides the technological foundation for the largest island of
  the <a class="ulink" href="https://ci.networkupstools.org/" target="_top">self-hosted NUT CI farm</a>.
  There is a fair amount of cross-pollination between the upstream project
  and community, and the development done originally for the NUT CI farm.</p>
<p>  See more at <a class="ulink" href="https://stories.jenkins.io/user-story/jenkins-is-the-way-for-networkupstools/" target="_top">Jenkins
  is the way to build multi-platform NUT</a> article.</p></td></tr><tr><td style="" align="center" valign="top"><p><span class="inlinemediaobject"><img src="images/ci/fosshost_org_Host_Light_38px.png" width="112" height="38" alt="Fosshost logo" /></span></p></td><td style="" align="left" valign="top"><p>Fosshost provided virtual machines where the multi-platform NUT CI farm with
  a <a class="ulink" href="https://github.com/networkupstools/jenkins-dynamatrix/" target="_top">jenkins-dynamatrix</a>
  <a class="ulink" href="https://github.com/networkupstools/nut/blob/master/Jenkinsfile-dynamatrix" target="_top">setup</a>
  runs to arrange builds in numerous operating environments and a lot of toolkit
  versions and implementations. Some workers running on NUT community members'
  machines can also dial in to provide an example of their favourite platforms.
  Literally hundreds of NUT builds run for each iteration, to make sure NUT can
  always build and work everywhere.</p>
<p>  This allows us to ensure that NUT remains portable across two decades' worth
  of operating systems, compilers, script interpreters, tools and third-party
  dependencies.</p></td></tr><tr><td style="" align="center" valign="top"><p><span class="inlinemediaobject"><img src="images/ci/CircleCI_vertical_black_logo.png" width="130" height="107" alt="CircleCI logo" /></span></p></td><td style="" align="left" valign="top"><p>The
  <a class="ulink" href="https://app.circleci.com/pipelines/github/networkupstools/nut/" target="_top">CircleCI
  NUT pipeline</a> allows us to test NUT CI builds on MacOS.</p></td></tr><tr><td style="" align="center" valign="top"><p><span class="inlinemediaobject"><img src="images/ci/AppVeyor_logo-ar21.png" width="120" height="60" alt="AppVeyor logo" /></span></p></td><td style="" align="left" valign="top"><p>The <a class="ulink" href="https://ci.appveyor.com/project/nut-travis/nut/" target="_top">AppVeyor
  NUT pipeline</a> allows us to test NUT CI builds on Windows (and publish
  preview tarballs with binaries).</p></td></tr><tr><td style="" align="center" valign="top"><p><span class="inlinemediaobject"><img src="images/ci/DO_Powered_by_Badge_blue_140pxW.png" width="140" height="29" alt="DigitalOcean logo" /></span></p></td><td style="" align="left" valign="top"><p>The <a class="ulink" href="https://www.digitalocean.com/?refcode=d2fbf2b9e082&amp;utm_campaign=Referral_Invite&amp;utm_medium=Referral_Program&amp;utm_source=badge" target="_top">DigitalOcean</a>
  droplets allow us to host NUT CI farm Jenkins controller and the build agents
  for multiple operating systems.</p></td></tr><tr><td style="" align="center" valign="top"><p><span class="inlinemediaobject"><img src="images/ci/gandi-ar21.png" width="120" height="60" alt="Gandi.Net logo" /></span></p></td><td style="" align="left" valign="top"><p><a class="ulink" href="https://www.gandi.net/" target="_top">Gandi.Net</a> took up the costs of NUT DNS hosting.</p></td></tr><tr><td style="" align="center" valign="top"><p><span class="inlinemediaobject"><img src="images/ci/OC_logo_merged_140x26.png" width="140" height="26" alt="Open Collective logo" /></span></p></td><td style="" align="left" valign="top"><p><a class="ulink" href="https://opencollective.com/networkupstools" target="_top">https://opencollective.com/networkupstools</a> allows us to arrange monetary
  donations and spending, with public transparency of everything that happens.</p></td></tr></tbody></table></div></div></div><div xmlns="" class="navfooter nut_footer"><hr />
		Last updated 2025-06-03 08:51:13 -- Network UPS Tools 2.8.3.564</div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_introduction.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="Features.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>