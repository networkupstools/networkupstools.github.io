<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>2. NUT Release Notes (and other feature details)</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="home" href="index.html" title="Network UPS Tools Release Notes" /><link rel="up" href="index.html" title="Network UPS Tools Release Notes" /><link rel="prev" href="_introduction.html" title="1. Introduction" /><link rel="next" href="NUT_Upgrading_Notes.html" title="3. NUT Upgrading Notes" /><meta xmlns="" name="format-detection" content="telephone=no" /></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="_introduction.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="NUT_Upgrading_Notes.html">Next</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="NUT_Release_Notes"></a>2. NUT Release Notes (and other feature details)</h2></div></div></div><p>If you’re upgrading from an earlier version, see the <a class="ulink" href="UPGRADING.adoc" target="_top">UPGRADING.adoc</a> file.</p><p>Please note that web and source document links, product and service names
listed in historic entries of past releases may no longer be relevant.</p><p>For a complete and more detailed list of changes, please refer to the
ChangeLog file (generated for release archives), or to the Git version
control history for "live" codebase.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_planned_release_notes_for_nut_2_8_4_what_8217_s_new_since_2_8_3"></a>2.1. PLANNED: Release notes for NUT 2.8.4 - what’s new since 2.8.3</h3></div></div></div><p><a class="ulink" href="https://github.com/networkupstools/nut/milestone/9" target="_top">https://github.com/networkupstools/nut/milestone/9</a></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
(expected) Dynamic Mapping Files (DMF) feature supported, to allow
   the driver binaries to be built once and data mappings to be loaded
   and modernized on the fly (porting from 42ITy project)
</li><li class="listitem">
(expected) Porting of reference packaging from 42ITy project
</li><li class="listitem">
(expected) Porting of patches suggested by different distribution packages
</li><li class="listitem">
(expected) C code clean-up/consistency (string format security, work with
   Boolean values, string to number conversions, etc. in the same manner)
</li><li class="listitem">
(expected) clean-up of libusb API variants support [<a class="ulink" href="https://github.com/networkupstools/nut/issues/300" target="_top">#300</a> and follow-ups]
</li><li class="listitem">
(expected) CI automation for coding style
</li><li class="listitem">
(expected) CI automation for driver flags and variables to be certainly
   documented, handled in augeas lenses, nutconf classes, etc.
</li><li class="listitem">
(expected) CI automation for use of data points in drivers that conform
   to patterns defined in <a class="ulink" href="docs/nut-names.txt" target="_top">docs/nut-names.txt</a>
</li><li class="listitem"><p class="simpara">
Bug fixes for fallout possible due to "fightwarn" effort in 2.8.0+:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
In <code class="literal">usbhid-ups</code> sources, introduced optional <code class="literal">HU_FLAG_PARAM_REQUIRED</code> for
     <code class="literal">setvar()</code> or <code class="literal">instcmd()</code> handling (and a <code class="literal">HU_TYPE_CMD_PARAM_REQUIRED</code>
     shortcut) for setting in the mapping table flags, to specify variables
     or instant commands that require an argument (either from caller or a
     non-<code class="literal">NULL</code> default in the run-time table after device data discovery);
     if the flag is not set, a zero value is assumed. Incomplete code was a
     regression of NUT v2.8.3 causing some instant commands to fail. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2860" target="_top">#2860</a>,
     <a class="ulink" href="https://github.com/networkupstools/nut/issues/2955" target="_top">#2955</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
Fix fallout of development in NUT v2.8.0 and/or v2.8.1 and/or v2.8.2 and/or
   v2.8.3:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Fixed a regression in recipes of NUT v2.8.3 release (as compared to
     v2.8.2), where <code class="literal">configure --with-docs=all</code> no longer failed a run
     of the <code class="literal">configure</code> script when some of the required rendering tools
     were not in fact available. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2842" target="_top">#2842</a>, fixed by <a class="ulink" href="https://github.com/networkupstools/nut/issues/2921" target="_top">#2921</a>]
</li><li class="listitem">
Some recipe improvements in earlier releases led to <code class="literal">make check</code> always
     running a spelling check (if tools are available), even if the explicit
     <code class="literal">configure --disable-spellcheck</code> option was used. Now it would not run
     if disabled (e.g. to speed up CI builds in scenarios that focus on other
     aspects of the code base), although developers can still use the explicit
     <code class="literal">make spellcheck*</code> goals, when tools are in fact available. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2973" target="_top">#2973</a>]
</li><li class="listitem">
A change in <code class="literal">Makefile.am</code> recipes to evaluate some driver names in the
     <code class="literal">DRIVERLIST</code> variables inspected by <code class="literal">configure</code> script, rather than
     having all their names hard-coded like before, led to inability to
     <code class="literal">configure --with-drivers=dummy-ups</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2825" target="_top">#2825</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2927" target="_top">#2927</a>, fixed by <a class="ulink" href="https://github.com/networkupstools/nut/pull/2929" target="_top">PR #2929</a>]
</li><li class="listitem">
A problem noted with <code class="literal">upsdrvquery</code> (since NUT v2.8.1) message logging
     at high debug verbosity levels (5+) with very large blocks of content
     has exposed a deficiency in variable-argument handling, and specifically
     adaptive resizing of the output buffer or truncation of logged inputs
     (which is something NUT code tried to do since the beginning of time),
     and could lead to "segmentation fault" crashes on some platforms.
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2948" target="_top">issue #2948</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2963" target="_top">PR #2963</a>]
</li><li class="listitem">
Documentation build recipes overly zealously pre-processed source files,
     which was not applicable for each and every document type we have (e.g.
     binary images for illustrations); this caused grief with some toolkits.
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2989" target="_top">issue #2989</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
common code:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Revised common <code class="literal">writepid()</code> to use <code class="literal">altpidpath()</code> as location for the
     PID file creation, if the default <code class="literal">rootpidpath()</code> is not accessible
     (e.g. daemon was not initially started as <code class="literal">root</code>). Likewise updated
     short PID file based signal sending to consult both locations. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1717" target="_top">#1717</a>]
</li><li class="listitem">
Linux may report a <code class="literal">/proc/X/exe</code> symlink with an embedded "(deleted)"
     suffix, if the binary was removed (or replaced) since the running process
     started. This confused our code which verifies that when it is sending a
     signal to a PID, that PID does reflect the expected NUT program. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/3021" target="_top">#3021</a>]
</li><li class="listitem">
Refactored NUT "common" sources to reference <code class="literal">nut_version.h</code> macros from
     a smaller C source file, to minimize the compilation unit size impacted
     by development iterations. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2097" target="_top">issue #2097</a>]
</li><li class="listitem">
Common code hardening: added sanity-checking for dynamically constructed
     or selected formatting strings with variable-argument list methods
     (typically used with log printing, <code class="literal">dstate</code> setting, etc.) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2450" target="_top">#2450</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/3016" target="_top">#3016</a>]
</li><li class="listitem">
Refactored repetitive implementations of <code class="literal">inet_ntopSS()</code> (nee
     <code class="literal">inet_ntopW()</code> in <code class="literal">upsd.c</code>) and <code class="literal">inet_ntopAI()</code> methods into <code class="literal">common.c</code>,
     so now they can be re-used or expanded more easily. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2916" target="_top">#2916</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">upsd</code> updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Fixed two bugs about printing the "further (ignored) addresses resolved
     for this name": the way to extract IP address string was not portable
     and misfired on some platforms, and the way to print had a theoretical
     potential for buffer overflow. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2915" target="_top">#2915</a>]
</li><li class="listitem">
Print arguments of a processed command into the debug log, to help track
     down what unsupported queries are about, etc. (but only endeavor to spend
     time, RAM and CPU on this if debug verbosity is high enough). Hide the
     sensitive commands' parameters unless verbosity is unusually high. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/3023" target="_top">#3023</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">upsdrvquery</code> API updates [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2969" target="_top">#2969</a>]:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Added <code class="literal">upsdrvquery_oneshot_conn()</code> for issuing one-shot queries using an
     existing <code class="literal">udq_pipe_conn_t *</code> connection. The caller manages the
     connection’s lifecycle, and the function includes a best-effort call to
     restore broadcast mode after the query to return the connection as it was.
</li><li class="listitem">
Added <code class="literal">upsdrvquery_oneshot_sockfn()</code> for initiating one-shot queries using
     a socket filename. Shares internal logic with the existing
     <code class="literal">upsdrvquery_oneshot()</code>, which uses a UPS and driver name, respectively.
</li><li class="listitem">
Introduced <code class="literal">upsdrvquery_restore_broadcast()</code> to explicitly restore
     broadcast mode (<code class="literal">BROADCAST 1</code>) on a connection, helping return it to a
     consistent and talkative state.
</li><li class="listitem">
Revised connection ownership handling: internal functions like
     <code class="literal">upsdrvquery_prepare()</code> and <code class="literal">upsdrvquery_request()</code> no longer close
     connections they do not own. Responsibility for cleanup is now delegated to
     the caller to avoid unintended side effects and better align with expected
     usage patterns.
</li></ul></div></li><li class="listitem"><p class="simpara">
common driver code:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Update reports of failed socket file creation, to help troubleshooting
     some error cases in the field. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2959" target="_top">#2959</a>]
</li><li class="listitem">
Removed workarounds trying to migrate legacy driver raised <code class="literal">ALARM</code>
     status tokens into modern <code class="literal">alarm_*</code> function logic. Rather, we keep
     supporting them as separate from the modern logic, seeing as <code class="literal">upsmon</code>
     does not care where the token itself was raised for its notifications.
     Driver-code related test-cases were updated to reflect these changes.
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2928" target="_top">issue #2928</a>, PRs <a class="ulink" href="https://github.com/networkupstools/nut/issues/2931" target="_top">#2931</a> and <a class="ulink" href="https://github.com/networkupstools/nut/issues/2934" target="_top">#2934</a>]
</li><li class="listitem">
Introduced some macros in <code class="literal">drivers/upshandler.h</code> for common syslog level
     definitions and message wording for beginning and failing <code class="literal">instcmd()</code> or
     <code class="literal">setvar()</code> operations consistently in different drivers. As a related
     change, operations that intend to turn off or restart the load, or can
     do that by side effect (e.g. calibration if batteries are old or dead),
     would explicitly <code class="literal">upslogx(LOG_CRIT,...)</code> by default before commencing.
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2957" target="_top">#2957</a>]
</li><li class="listitem">
Fixed a couple of ancient memory leaks: one "shared" during driver
     program initialization, and one specific to <code class="literal">dummy-ups</code> wind-down. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2972" target="_top">#2972</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">apc_modbus</code> driver updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
The time stamp and inter-frame delay accounting was fixed, alleviating
     one of the problems reported in <a class="ulink" href="https://github.com/networkupstools/nut/issues/2609" target="_top">issue #2609</a>. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2982" target="_top">PR #2982</a>]
</li><li class="listitem">
Fix missing variables due to mismatching format string. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/3013" target="_top">PR #3013</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">bcmxcp</code> driver updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
The latching on to a previous replace battery status was fixed, with its
     alarm state variable now correctly being reset; previously a factually
     replaced battery did not clear the alarm and the whole driver needed to
     be restarted. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2999" target="_top">issue #2999</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/3002" target="_top">PR #3002</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">clone</code>, <code class="literal">clone-outlet</code>, <code class="literal">nhs_ser</code> driver and <code class="literal">nutdrv_qx_ablerex</code>
   subdriver updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Refactored to follow modern handling of status and alarm conditions,
     aligning with current driver design practices. This includes fixing
     copy-paste related issues in alarm reporting and removing some alarm
     messages that should instead be reflected as status flags. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2936" target="_top">#2936</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">dummy-ups</code> driver updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
A new instruction <code class="literal">ALARM</code> was added for the <code class="literal">Dummy Mode</code> operation
     of the driver, enabling simulation of UPS alarm states more closely
     in line with modern, real-world UPS driver implementations. This
     follows the updated principle of keeping alarm states decoupled from
     the <code class="literal">ups.status</code> variable, with alarms now raised via common alarm
     functions rather than direct manipulation. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2928" target="_top">issue #2928</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2936" target="_top">PR #2936</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">nutdrv_qx</code> driver updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Added support for "preprocess"/"process" methods called from mapping tables
     to report back to the driver that an argument value was not supported,
     so <code class="literal">setvar()</code> or <code class="literal">instcmd()</code> can not proceed safely and should return
     <code class="literal">STAT_SET_CONVERSION_FAILED</code> or <code class="literal">STAT_INSTCMD_CONVERSION_FAILED</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/3017" target="_top">#3017</a>]
</li><li class="listitem">
Introduced <code class="literal">innovart33</code> protocol support for Ippon Innova RT 3/3 topology
     UPSes. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2938" target="_top">#2938</a>]
</li><li class="listitem">
Updated <code class="literal">megatec</code> protocol for more detailed responses to <code class="literal">I</code> query
     which may return <code class="literal">ups.serial</code> (after a shorter <code class="literal">device.mfr</code>) and the
     <code class="literal">battery.runtime</code> (after a shorter <code class="literal">device.model</code>). Note that the
     expected response is shorter than in other dialects (38 vs. 39 bytes),
     so if this change breaks anything for your UPS that reported the values
     above correctly (e.g. the <code class="literal">ups.firmware</code> version becomes shorter or
     none of these are reported), please let NUT developers know. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2980" target="_top">#2980</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">pijuice</code> driver updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Converted to NUT standard use of <code class="literal">status_set()</code> with single-token values.
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2708" target="_top">issue #2708</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">snmp-ups</code> driver updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Added support for "fun"/"nuf" methods called from mapping tables to
     report back to the driver that an argument value was not supported,
     so <code class="literal">setvar()</code> or <code class="literal">instcmd()</code> can not proceed safely and should return
     <code class="literal">STAT_SET_CONVERSION_FAILED</code> or <code class="literal">STAT_INSTCMD_CONVERSION_FAILED</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/3017" target="_top">#3017</a>]
</li><li class="listitem">
Fixed <code class="literal">ups.test.date</code> to be semi-static in <code class="literal">apc-mib</code> mapping, so it
     would be queried more than once per driver up-time. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/3011" target="_top">issue #3011</a>]
</li><li class="listitem">
Fixed debug-logging around <code class="literal">SU_FLAG_STATIC</code> entries to clarify when
     they get skipped. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/3011" target="_top">issue #3011</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">usbhid-ups</code> driver updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Added support for "fun"/"nuf" methods called from mapping tables to
     report back to the driver that an argument value was not supported,
     so <code class="literal">setvar()</code> or <code class="literal">instcmd()</code> can not proceed safely and should return
     <code class="literal">STAT_SET_CONVERSION_FAILED</code> or <code class="literal">STAT_INSTCMD_CONVERSION_FAILED</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/3017" target="_top">#3017</a>]
</li><li class="listitem">
<code class="literal">hid_ups_walk(HU_WALKMODE_INIT)</code>: report if exactly one of "fun" or "nuf"
     dynamic value mapping methods is defined in a one-line table, and this
     may preclude reads/writes of that variable. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2956" target="_top">#2956</a>]
</li><li class="listitem">
The <code class="literal">cps-hid</code> subdriver’s existing mechanism for fixing broken report
     descriptors was extended to cover a newly reported case of nominal UPS
     power being incorrectly reported due to an unrealistically low maximum
     threshold, as seen with a EC850LCD device. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2917" target="_top">issue #2917</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2919" target="_top">PR #2919</a>]
</li><li class="listitem">
Further revision of "ECO mode" related code in <code class="literal">mge-hid</code> subdriver,
     following up from work started for NUT v2.8.3 release. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2956" target="_top">PR #2956</a>]
</li><li class="listitem">
Added APC BVKxxxM2 and BKxxxM2-CH to list of devices where
     <code class="literal">lbrb_log_delay_sec=N</code> may be necessary to address spurious LOWBATT
     and REPLACEBATT events. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2942" target="_top">PR #2942</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/3007" target="_top">PR #3007</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2347" target="_top">issue #2347</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/3006" target="_top">issue #3006</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
New NUT drivers:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Introduced a <code class="literal">ve-direct</code> driver for Victron Energy UPS/solar panels
     monitoring. Most specific reported values are in an <code class="literal">experimental.*</code>
     namespace, as a community we need to come up with standard naming for
     those via <code class="literal">docs/nut-names.txt</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/440" target="_top">#440</a>]
</li><li class="listitem">
Introduced a <code class="literal">nutdrv_hashx</code> driver for numerous devices from Ablerex,
     Atlantis Land, Epyc, Infosec, ION, PowerWalker, Right Power Technology,
     Salicru, UPS Solutions and other vendors (originally shipped with a
     "PowerMaster+", "PowerMaster" or "PowerGuide" software companion suite).
     This seems to be a protocol developed by Cyber Energy for serial-port
     devices, subsequently used by different vendors in their own products
     or re-branded Cyber Energy creations. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2940" target="_top">#2940</a>]
</li><li class="listitem">
Introduced a <code class="literal">failover</code> driver for monitoring multiple UPS driver sockets
     and seamless switching out of UPS data in a failover situation, includes
     support for end-to-end tracked instant commands and also variable updating.
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2962" target="_top">#2962</a>]
</li><li class="listitem">
Introduced USB (<code class="literal">powervar_cx_usb</code>) and Serial (<code class="literal">powervar_cx_ser</code>) drivers
     for Powervar CUSPP protocol, tested with GTS (USB) and UPM (USB, Serial)
     models. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2988" target="_top">#2988</a>]
</li></ul></div></li><li class="listitem">
The <code class="literal">nut-driver-enumerator.sh</code> script (NDE) now internally tracks dependency
   of one driver on another one that should be locally running to serve the
   "original" data points (<code class="literal">clone</code>, <code class="literal">clone-outlet</code>, <code class="literal">dummy-ups</code>, <code class="literal">failover</code>).
   It should create soft dependencies between respective service instances
   to order their start-up sequence. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2962" target="_top">#2962</a>]
</li><li class="listitem"><p class="simpara">
NUT Monitor GUI:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Ported Python 3 version to Qt6, now shipped alongside Qt5 for systems
     with either or both, maximizing compatibility with old and new setups.
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2946" target="_top">#2946</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">upsmon</code> client:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Clearer debug logging of <code class="literal">SHUTDOWNCMD</code> and <code class="literal">NOTIFYCMD</code> that would be used
     (or warnings that none was set); flush output buffers after these messages
     and after each main loop cycle, so any emitted text is seen in a timely
     manner. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/3003" target="_top">issue #3003</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/3008" target="_top">PR #3008</a>]
</li></ul></div></li><li class="listitem">
The <code class="literal">nutshutdown</code> script (end-game integration for UPS power-off in case
   of FSD initiated by <code class="literal">upsmon</code>) was updated to consider <code class="literal">MODE=none</code> set in
   <code class="literal">nut.conf</code> and bail out quietly. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2935" target="_top">issue #2935</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/3008" target="_top">PR #3008</a>]
</li><li class="listitem"><p class="simpara">
Manual page recipes and contents:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Introduced handling (possibly rewriting) for man page section "Overviews,
     conventions, and miscellaneous" (commonly number 7), to deliver support
     for <code class="literal">man nut</code> queries (NUT overview manual page also created). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2945" target="_top">#2945</a>]
</li><li class="listitem">
A new <code class="literal">configure --with-docs-man-dir-as-base</code> option was introduced so
     that directories for man page sections can now be automatically named
     as either "base" number of the section (e.g. <code class="literal">man1</code>) or by full section
     name (<code class="literal">man1m</code>), as different OS distributions have different preferences
     in this regard. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2950" target="_top">#2950</a>]
</li><li class="listitem">
Option to <code class="literal">configure --enable-docs-man-for-progs-built-only</code> was added,
     to differentiate NUT builds that deliver man pages for only built programs
     (legacy default) or for all of them (as needed for docs sites). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2976" target="_top">#2976</a>]
</li><li class="listitem">
Option to <code class="literal">configure --enable-docs-changelog</code> was added, specifically
     to allow developer iterations to not waste CPU time rebuilding the huge
     <code class="literal">ChangeLog*</code> files whenever their Git index changes. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/3019" target="_top">#3019</a>]
</li><li class="listitem">
Options to <code class="literal">configure --with-docs-changelog-start</code> and/or
     <code class="literal">configure --with-docs-changelog-end</code> were added to allow developers
     to customize the size of <code class="literal">ChangeLog*</code> files when they are generated.
     Default starting value is <code class="literal">auto</code> which applies the legacy default
     <code class="literal">v2.6.0</code> to release/pre-release builds, or when local Git version info
     could not be retrieved, and the most-recent release tag (or <code class="literal">master</code>
     as fallback) for usual build iterations. Default ending value is <code class="literal">HEAD</code>
     for the current git commit at the moment the ChangeLog is (re-)generated.
     Balancing against the option to not build <code class="literal">ChangeLog*</code> files at all,
     this couple allows quicker builds that exercise all relevant recipe
     code paths. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/3019" target="_top">#3019</a>]
</li></ul></div></li><li class="listitem">
Extended the <code class="literal">gitlog2changelog.py</code> helper script to report start/end commits
   actually used, and to allow callers to tweak them better (not only <code class="literal">HEAD</code>
   for the end of range); this may be of interest to other projects which use
   this script. Allow <code class="literal">configure</code> to disable generation of either certain
   <code class="literal">ChangeLog*</code> rendering formats or completely, to speed up developer
   iterations (much time is wasted when dev-testing new code, due to git
   index changes if NUT was configured to build with documentation). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/3019" target="_top">#3019</a>]
</li><li class="listitem">
The <code class="literal">BUILD_TYPE=default-all-errors ci_build.sh</code> script handling was
   revised to simplify code, and to default in CI builds to a quicker
   mode which randomly mixes the selected SSL, USB and UNMAPPED variants
   (and relies on the dozens of NUT CI farm runs per iteration to likely
   cover all possible combinations), which should roughly halve the CI
   build times. Default activity for developer builds should remain as
   it was — to try each such "axis" sequentially. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2973" target="_top">#2973</a>]
</li><li class="listitem">
Revised <code class="literal">make install-as-root</code> to fall back to legacy ways of enabling
   services, if <code class="literal">systemctl preset-all</code> fails (assumed due to a systemd 252
   bug). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/3022" target="_top">#3022</a>]
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_8_3_what_8217_s_new_since_2_8_2"></a>2.2. Release notes for NUT 2.8.3 - what’s new since 2.8.2</h3></div></div></div><p><a class="ulink" href="https://github.com/networkupstools/nut/milestone/11" target="_top">https://github.com/networkupstools/nut/milestone/11</a></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">
Fix fallout of development in NUT v2.8.0 and/or v2.8.1 and/or v2.8.2:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Move of <code class="literal">NUT_DEBUG_LEVEL</code> and "-D" CLI option handling to start of
     driver programs for <a class="ulink" href="https://github.com/networkupstools/nut/issues/2259" target="_top">issue #2259</a> in NUT v2.8.2 release misfired with
     regard to data-dump mode (it no longer caused foreground by default).
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2408" target="_top">#2408</a>]
</li><li class="listitem">
The <code class="literal">nut-driver-enumerator.sh</code> improvements misfired in v2.8.2 release
     with an overlooked bit of shell syntax, and caused <code class="literal">nut-driver@upsname</code>
     instances to not auto-restart when <code class="literal">ups.conf</code> is edited. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/682" target="_top">#682</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2410" target="_top">#2410</a>]
</li><li class="listitem">
Addition of "NUT Simulated devices" support to <code class="literal">nut-scanner</code> in v2.8.2
     broke detection of (in-)ability to find and query "Old NUT" servers via
     <code class="literal">libupsclient.so</code> (internal flag got always enabled). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2246" target="_top">#2246</a>]
</li><li class="listitem">
A fix for <code class="literal">upsmon</code> v2.8.1 setting of <code class="literal">OFFDURATION</code> [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2108" target="_top">PR #2108</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2104" target="_top">issue #2104</a>,
     revisiting <a class="ulink" href="https://github.com/networkupstools/nut/pull/2055" target="_top">PR #2055</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2044" target="_top">issue #2044</a>] was overly zealous and impacted also
     the <code class="literal">OB</code> state in cases where communications to the data server were
     severed and <code class="literal">DEADTIME</code> setting was not honored. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2462" target="_top">PR #2462</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2454" target="_top">issue #2454</a>]
</li><li class="listitem">
Using <code class="literal">drivername -c reload</code> (e.g. facilitated by <code class="literal">nut-driver-enumerator</code>
     script and service when editing <code class="literal">ups.conf</code>) led to disconnected Unix
     sockets and a tight polling loop that hogged CPU. While the underlying
     bug is ancient, it took recent development to hit it as a practical
     regression. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1904" target="_top">issue #1904</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2484" target="_top">issue #2484</a>]
</li><li class="listitem">
Fallback <code class="literal">localtime_r()</code> and <code class="literal">gmtime_r()</code> for some platform builds where
     a <code class="literal">*_s()</code> variant was available was not handled correctly. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2583" target="_top">PR #2583</a>]
</li><li class="listitem">
A recently introduced <code class="literal">allow_killpower</code> did not actually work as an
     <code class="literal">ups.conf</code> flag (only as a protocol command). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2605" target="_top">issue #2605</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2606" target="_top">PR #2606</a>]
</li><li class="listitem">
The ability of two copies of the driver program to talk to each other
     with <code class="literal">upsdrvquery.c</code> code was not complete for the case of indefinite
     <code class="literal">select()</code> wait timeout. Now <code class="literal">upsdrvquery_read_timeout()</code> fixed private
     use of <code class="literal">struct timeval={-1,-1}</code> as a trigger to <code class="literal">select(..., NULL)</code>,
     as logged in one part of code and not handled in the other, for the
     indefinite wait [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1922" target="_top">#1922</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2392" target="_top">#2392</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2686" target="_top">#2686</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2670" target="_top">#2670</a>]
</li><li class="listitem">
The <code class="literal">disable_fix_report_desc</code> option introduced for <code class="literal">usbhid-ups</code> driver
     since NUT v2.8.1 was not applied for early dialog with the device while
     its report descriptors were being discovered. Now this flag, as well as
     <code class="literal">interruptsize</code> and <code class="literal">interruptonly</code>, are considered before we first try
     to open the USB device handle. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1575" target="_top">#1575</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1512" target="_top">#1512</a>]
</li><li class="listitem">
In <code class="literal">cps_fix_report_desc()</code> we intended to fix-up input and output voltages
     in certain cases against high voltage transfer, we only fixed-up one of
     them. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1245" target="_top">#1245</a>]
</li><li class="listitem">
<code class="literal">upsd</code> should now handle <code class="literal">TRACKING</code> value of <code class="literal">STAT_CONVERSION_FAILED</code>
     introduced in NUT v2.8.2 for the socket protocol (between driver and
     data server), by returning "ERR INVALID-ARGUMENT", so there is no change
     for the network protocol definition. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2182" target="_top">#2182</a>]
</li><li class="listitem">
The <code class="literal">configure --enable-inplace-runtime</code> option added in NUT v2.8.1 should
     now also try to detect and set default values for the <code class="literal">--with-drvpath</code>,
     <code class="literal">--with-cgipath</code>, <code class="literal">--datadir</code> and <code class="literal">--libdir</code> options to more closely match
     a packaged setup and avoid confusion with e.g. two incompatible NUT client
     libraries in system default search path. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2895" target="_top">#2895</a>]
</li></ul></div></li><li class="listitem">
Large parts of the NUT User Manual and NUT Developer Guide were relocated
   into the new NUT Quality Assurance and Build Automation Guide (maintained
   in <code class="literal">docs/qa-guide.adoc</code>), accompanied by new chapters written and detailed
   for this subject; the chapter about <code class="literal">ci_build.sh</code> script became a separate
   <code class="literal">ci_build.adoc</code> document included into the new document. Overall, this guide
   intended to help the current and future maintainers of NUT itself, as well
   as to inspire any other projects that investigate similar solutions. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2832" target="_top">#2832</a>]
</li><li class="listitem"><p class="simpara">
SEMVER, know thyself!
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Development iterations of NUT should now identify with not only the
     semantic version of a preceding release, but with git-derived information
     about the amount of iterations that followed (if available):
     the three-number "semver" would be seen on release snapshots, while
     other builds would expose the added components: one with the amount
     of commits on the main development trunk since the preceding release
     which are ancestors of the built code base, and in case of feature
     development branches — another component with the amount of commits
     unique to this branch (which are not part of the development trunk yet).
     This allows to produce more relevant (monotonously growing) version
     identifiers for packages and similar artifacts, with more meaningful
     upgrades via development snapshots, eventually. A copy of the current
     version information would be embedded into "dist" archives as a
     <code class="literal">VERSION_DEFAULT</code> file, among provisions for packager tuning. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1949" target="_top">#1949</a>]
</li><li class="listitem">
Documentation about this would be maintained in <code class="literal">docs/nut-versioning.adoc</code>
</li><li class="listitem">
SMF manifests and systemd units now refer to man pages and their online
     variants under <code class="literal">NUT_WEBSITE_BASE</code> dependent on codebase maturity
     (development or release snapshot); many programs now display such
     references in their command-line usage help, method <code class="literal">suggest_doc_links()</code>
     was introduced for this purpose. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/722" target="_top">issue #722</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2733" target="_top">PR #2733</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
A technologically and practically interesting revamp of NUT mesh of
   <a class="ulink" href="https://www.gnu.org/software/automake/" target="_top">automake</a> (<code class="literal">Makefile.am</code>)
   recipes was completed, allowing for a more parallelizable build routine
   on multi-CPU machines — utilizing more cores and completing in less
   "wall-clock" time that the standard <code class="literal">SUBDIRS</code> driven approach — when
   running <code class="literal">make -j (N)</code> from the project root directory to build everything
   enabled by the <code class="literal">configure</code> script.
</p><p class="simpara">This was tested with several (GNU, BSD, Sun) implementations of the
   "make" program on the few dozen platforms that NUT CI farm tests on.
   Notably, GNU make 4.x and newer seems to process parallel high-level
   goals and sub-<code class="literal">make</code> runs better than the competition (including GNU
   make 3.x).</p><p class="simpara">It is not a radical rewrite like some other research suggested, and so retains
   the general structure and certain benefits and flexibility of that standard
   <code class="literal">automake</code> approach, including developer build workflows with a bespoke
   <code class="literal">Makefile</code> in every significant directory.  This also retains (and builds
   upon) the benefits of older work done in NUT, for builds in one directory
   to depend on libraries and other artifacts built (once) in another.</p><p class="simpara">Overall, NUT CI farm build times got 25%+ shorter (which is important as
   some scenarios had hit the 1-hour timeout imposed by providers of free
   CI hosting coupled with the weak machines provided in their free layer),
   and we suppose this is an interesting case for other projects to draw
   inspiration from for their recipe refactoring. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2825" target="_top">PR #2825</a>]</p></li><li class="listitem">
As an aid for developers and maintainers, a new spell-checking recipe was
   added to first run non-interactive spelling checks in parallel, and <span class="strong"><strong>only</strong></span>
   if something fails — run an interactive check to edit the text and/or the
   dictionary file. The <code class="literal">make spellcheck</code> rule now also benefits from the
   rewritten recipes, as detailed above, to visit directories with text files
   in parallel. Overall, these changes may save time on multi-CPU systems, if
   compared to a sequential walk of all texts (or their directories) as was
   done before. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2871" target="_top">#2871</a>]
</li><li class="listitem"><p class="simpara">
The <code class="literal">make dist</code> goal now takes more care to require availability of the man
   pages to put into the prepared distribution archive. These may come either
   from the current build, or inherited from its sources (if using a tarball
   initially) on a platform without tooling required for man page generation.
</p><p class="simpara">This requirement compromises usability of <code class="literal">make distcheck</code> on platforms without
   such tools from sources without pre-built man pages (e.g. builds from git),
   so a couple of new goals were introduced in <a class="ulink" href="https://github.com/networkupstools/nut/pull/2842" target="_top">PR #2842</a>:
   - <code class="literal">make distcheck-fake-man</code> generates placeholder files named like pre-built
      man pages for any missing files, just for the purpose of constructing
      a sane-looking dist archive to <code class="literal">distcheck</code> strictly otherwise;
   - <code class="literal">make distcheck-ci</code> is routed to <code class="literal">distcheck</code> or <code class="literal">distcheck-fake-man</code>
     based on build circumstances (ability to build man pages or presence
     of pre-built pages, or lack of either);
   - Similarly, <code class="literal">make dist-ci</code> is routed to provide a strict or faked tarball;
   - Earlier defined goals like <code class="literal">distcheck-light</code> or <code class="literal">distcheck-valgrind</code> now
     take advantage of these mechanisms to also produce usable dist archives
     for their relaxed or purpose-specific tests.</p></li><li class="listitem"><p class="simpara">
Revised behaviors for the <code class="literal">upsnotify()</code> common code introduced in recent NUT
   releases (integrating with service management frameworks, etc.):
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
It was a bit cryptic when it reported a <span class="strong"><strong>failure to notify</strong></span> (e.g. when a
     NUT program was not running as a service currently), fixed now to report
     human-friendly text instead of internal enum codes. Follow-up to [issue
     <a class="ulink" href="https://github.com/networkupstools/nut/issues/1590" target="_top">#1590</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/1777" target="_top">PR #1777</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2136" target="_top">PR #2136</a>]
</li><li class="listitem">
Drivers should no longer print warning messages about not-initializing
     the notification subsystem because not running as a service when they
     are either started explicitly to show the help message, or when their
     CLI arguments are fatally wrong (no UPS name, no <code class="literal">port</code>, invalid trailing
     keywords…)
</li><li class="listitem">
NUT programs generally should default to not "spam" about lack of known
     notification technology if our first message to be suppressed is already
     about stopping that program.  This might help nag distros into getting
     a service framework, or integrating theirs with NUT, but is generally
     annoying to end-users where there’s little they can do about it (other
     than suppressing the message with <code class="literal">NUT_QUIET_INIT_UPSNOTIFY</code> envvar).
</li></ul></div></li><li class="listitem">
Drivers, <code class="literal">upsd</code>, <code class="literal">upsmon</code>: reduce "scary noise" about failure to <code class="literal">fopen()</code>
   the PID file (which most of the time means that no previous instance of
   the daemon was running to potentially conflict with), especially useless
   since in recent NUT releases the verdicts from <code class="literal">sendsignal*()</code> methods
   are analyzed and lead to layman worded situation reports in these programs.
   [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1782" target="_top">issue #1782</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2384" target="_top">PR #2384</a>]
</li><li class="listitem">
Drivers started with the <code class="literal">-FF</code> command-line option (e.g. wrapped into the
   systemd units to stay "foregrounded" <span class="strong"><strong>and</strong></span> save a PID file anyway) should
   now also handle an existing PID file to interact with the earlier instance
   of the driver program, if still running (e.g. started manually). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2384" target="_top">#2384</a>]
</li><li class="listitem">
Drivers executed to force an UPS shutdown (with <code class="literal">-k</code> CLI option) should
   now try harder to kill off a daemonized sibling, if it still runs (and
   did not handle a <code class="literal">driver.killpower</code> INSTCMD well). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2666" target="_top">#2666</a>]
</li><li class="listitem">
Extended instant commands for driver reloading with a <code class="literal">driver.exit</code>
   command for a protocol equivalent of sending a <code class="literal">SIGTERM</code>, e.g. when
   a newer instance of the driver program tries to start. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1903" target="_top">#1903</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2392" target="_top">#2392</a>]
</li><li class="listitem">
A new <code class="literal">NUT_QUIET_INIT_BANNER</code> envvar (presence or "true" value) can now
   prevent the tool name and NUT version banner from being unilaterally
   printed out when NUT programs start. [issues <a class="ulink" href="https://github.com/networkupstools/nut/issues/1789" target="_top">#1789</a> vs. <a class="ulink" href="https://github.com/networkupstools/nut/issues/316" target="_top">#316</a>; <a class="ulink" href="https://github.com/networkupstools/nut/issues/2573" target="_top">#2573</a>]
</li><li class="listitem">
Drivers would now report the socket they are listening on, and server
   would report full path to the driver socket it tries to connect to.
   A new <code class="literal">NUT_QUIET_INIT_LISTENER</code> envvar (presence or "true" value) can
   prevent the socket name from being unilaterally printed out when NUT
   drivers start. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2764" target="_top">#2764</a>]
</li><li class="listitem"><p class="simpara">
The <code class="literal">upsdrvctl</code> tool improvements:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
It should now warn if executed on systems where NUT was built with
     support for service management frameworks like systemd or SMF, so
     nut-driver service units prepared by <code class="literal">nut-driver-enumerator</code> would
     conflict with manually-executed driver programs. This warning can
     be hushed by exporting a <code class="literal">NUT_QUIET_INIT_NDE_WARNING</code> environment
     variable with any value.
</li><li class="listitem">
Extended <code class="literal">upsdrvctl</code> with a <code class="literal">list</code> operation (or <code class="literal">-l</code> option) to report
     manageable device configuration names (possible <code class="literal">&lt;ups&gt;</code> arguments to
     <code class="literal">start</code>, <code class="literal">stop</code> etc. operations), or to confirm a single name that it
     is known, and a <code class="literal">status</code> operation for more information. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2567" target="_top">#2567</a>]
</li><li class="listitem">
Fixed support of <code class="literal">maxstartdelay</code> at the level of driver section in
     <code class="literal">ups.conf</code>; added support of <code class="literal">maxretry</code> and <code class="literal">retrydelay</code> at this
     level; bumped the default <code class="literal">maxstartdelay</code> from 45 to 75 seconds to
     accommodate for longer device initialization (e.g. due to support of
     more Megatec Qx dialects by <code class="literal">nutdrv_qx</code>). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2885" target="_top">#2885</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2888" target="_top">#2888</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">riello_ser</code> updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Added <code class="literal">localcalculation</code> option to compute <code class="literal">battery.runtime</code> and
     <code class="literal">battery.charge</code> if the device provides bogus values [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2390" target="_top">issue #2390</a>,
     following in the footsteps of <a class="ulink" href="https://github.com/networkupstools/nut/issues/1692" target="_top">#1692</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1685" target="_top">#1685</a> done for <code class="literal">riello_usb</code>]
     (similar to <code class="literal">runtimecal</code> in some other drivers, may be refactored
     to that configuration and logic model in later NUT releases)
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">apcsmart</code> updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Revised code to use <code class="literal">strncpy()</code> and avoid potential overflows that are
     possible with <code class="literal">strcpy()</code> used before. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2564" target="_top">PR #2564</a>]
</li><li class="listitem">
Lost communications led to a logging flood, should not anymore.
     In fact, the driver should try fully reconnecting upon getting into
     a prolonged data stale condition. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/704" target="_top">issue #704</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2564" target="_top">PR #2564</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">nutdrv_qx</code> updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Added Visench C1K (using serial port converter with USB ID <code class="literal">1a86:7523</code>)
     as known supported by <code class="literal">nutdrv_qx</code> (Megatec protocol) since at least
     NUT v2.7.4 release. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2395" target="_top">#2395</a>]
</li><li class="listitem">
Introduced <code class="literal">innovart31</code> protocol support for Ippon Innova RT 3/1 topology
     UPSes. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2712" target="_top">#2712</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2798" target="_top">#2798</a>]
</li><li class="listitem">
Introduced <code class="literal">q2</code> and <code class="literal">q6</code> protocol support; currently also based/tested
     on Innova devices, but other models than RT 3/1. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2798" target="_top">#2798</a>]
</li><li class="listitem">
Introduced a <code class="literal">gtec</code> subdriver and protocol, tested over USB with a
     Gtec ZP120N device. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2818" target="_top">#2818</a>]
</li><li class="listitem">
Fixed <code class="literal">hunnox_protocol()</code> to honour the optional <code class="literal">novendor</code> setting for
     devices that are confused by such query, e.g. DEXP LCD EURO 1200VA. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2839" target="_top">#2839</a>]
</li><li class="listitem">
Extended Voltronic protocol to support longer numbers as remaining
     <code class="literal">battery.runtime</code> value. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2765" target="_top">#2765</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
GPIO drivers:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Extended to support library API of not only libgpiod v1.x releases,
     but also v2.x; introduced a NUT <code class="literal">WITH_LIBGPIO_VERSION</code> C macro (in
     <code class="literal">config.h</code>) to differentiate the library variants. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2833" target="_top">issue #2833</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
New NUT drivers:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
<code class="literal">bicker_ser</code>: added new driver for Bicker 12/24Vdc UPS via RS-232 serial
     communication protocol, which supports any UPS shipped with the PSZ-1053
     extension module. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2448" target="_top">PR #2448</a>]
</li><li class="listitem">
<code class="literal">liebert-gxe</code>: added new driver with support for Liebert GXE Series UPS
     (serial or USB posing as a serial port). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2629" target="_top">#2629</a>]
</li><li class="listitem">
<code class="literal">nhs_ser</code>: added new driver for numerous NHS Nobreaks, senoidal line — UPS
     models with serial port, made by NHS Sistemas Eletronicos LTDA and popular
     in Brazil. Currently this driver only builds on Linux. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2692" target="_top">#2692</a>]
</li><li class="listitem">
<code class="literal">phoenixcontact_modbus</code> driver: Introduced Phoenix Contact QUINT4-UPS/24DC
     management (only new modbus addresses). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2689" target="_top">#2689</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2716" target="_top">#2716</a>]
</li></ul></div></li><li class="listitem">
Added <code class="literal">scripts/external_apis</code> with an example script integrating a
   non-native protocol with NUT (as live-stream input for <code class="literal">dummy-ups</code>
   NUT driver to publish further); that example can be installed using
   <code class="literal">configure --enable-extapi-enphase</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2807" target="_top">issue #2807</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2813" target="_top">PR #2813</a>]
</li><li class="listitem">
<code class="literal">usbhid-ups</code> and <code class="literal">netxml-ups</code> updated to handle "No battery installed!"
   alarm also to set the <code class="literal">RB</code> (Replace Battery) value in <code class="literal">ups.status</code>.
   This may cause dual triggering of notifications (as an <code class="literal">ALARM</code> generally
   and as an important <code class="literal">REPLBATT</code> status in particular) in <code class="literal">upsmon</code>, but
   better safe than sorry. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/415" target="_top">#415</a>]
</li><li class="listitem"><p class="simpara">
<code class="literal">usbhid-ups</code> updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Support of the <code class="literal">onlinedischarge_log_throttle_hovercharge</code> in the NUT
     v2.8.2 release was found to be incomplete. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2423" target="_top">#2423</a>, follow-up to <a class="ulink" href="https://github.com/networkupstools/nut/issues/2215" target="_top">#2215</a>]
</li><li class="listitem">
Added support for <code class="literal">interrupt_pipe_no_events_tolerance=N</code> setting to
     optionally prevent UPS lockup, indicated by continuous "Got 0 HID Objects"
     situation as a clue, by reconnecting on stale data.  Note that while some
     devices just report information upon subsequent poll and just have nothing
     urgent to declare with an USB interrupt, others (e.g. APC BXnnnnMI) were
     seen to lock up until a full connection restart. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2671" target="_top">#2671</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2681" target="_top">#2681</a>]
</li><li class="listitem">
Added support for <code class="literal">lbrb_log_delay_sec=N</code> setting to delay propagation of
     <code class="literal">LB</code> or <code class="literal">LB+RB</code> state (buggy with APC BXnnnnMI devices circa 2023-2024).
     This may work better with flags like <code class="literal">onlinedischarge_calibration</code> and
     <code class="literal">lbrb_log_delay_without_calibrating</code> for some devices. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2347" target="_top">issue #2347</a>,
     <a class="ulink" href="https://github.com/networkupstools/nut/pull/2565" target="_top">PR #2565</a>]
</li><li class="listitem">
General suggestion from <code class="literal">possibly_supported()</code> message method for devices
     with VendorID=<code class="literal">0x06da</code> (Phoenixtec), seen in some models supported by
     MGE HID or Liebert HID, updated to suggest trying <code class="literal">nutdrv_qx</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/334" target="_top">#334</a>]
</li><li class="listitem">
MGE HID list of <code class="literal">mge_model_names[]</code> was extended for Eaton 9E, 5PX and 5SC
     series (largely guessing, feedback and PRs for adaptation to actual
     string values reported by devices via USB are welcome), so these devices
     would now report <code class="literal">battery.voltage</code> and <code class="literal">battery.voltage.nominal</code>.
     Also a device from 5S series (5S1200AU) was tested, although it identifies
     as an "Ellipse PRO" in USB metadata. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2380" target="_top">#2380</a>]
</li><li class="listitem">
Added <code class="literal">ups.beeper.status</code> support for Masterpower MF-UPS650VA using the
     MGE HID subdriver. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2662" target="_top">#2662</a>]
</li><li class="listitem">
Added basic support for EcoFlow River 3 Plus and Delta 3 Plus models.
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2735" target="_top">issue #2735</a>, PRs <a class="ulink" href="https://github.com/networkupstools/nut/issues/2740" target="_top">#2740</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2837" target="_top">#2837</a>]
</li><li class="listitem">
Added support for <code class="literal">0x09D6:0x0001</code> devices using the MGE HID subdriver
     assuming devices made by KSTAR (alternately using MGE vendor ID). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2661" target="_top">#2661</a>]
</li><li class="listitem">
<code class="literal">powercom-hid</code> subdriver sent UPS shutdown commands in wrong byte order,
     at least for devices currently in the field. A toggle was added to set
     the old behavior (if some devices do need it), while a fix is applied
     by default: <code class="literal">powercom_sdcmd_byte_order_fallback</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2480" target="_top">PR #2480</a>]
</li><li class="listitem">
<code class="literal">cps-hid</code> subdriver now supports more variables, as available on e.g.
     CP1350EPFCLCD model, including temperature. [PRs <a class="ulink" href="https://github.com/networkupstools/nut/issues/2540" target="_top">#2540</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2711" target="_top">#2711</a>]
</li><li class="listitem">
Loudly suggest to set <code class="literal">pollonly</code> flag and default a shorter <code class="literal">pollfreq</code>
     for CPS devices, to try avoiding device-driven timeouts. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1689" target="_top">#1689</a>]
     Also adjust default <code class="literal">offdelay</code> and <code class="literal">ondelay</code> to reasonable values,
     and warn the users with CPS devices if their configured values are
     not multiples of 60. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/432" target="_top">#432</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1394" target="_top">#1394</a>]
</li><li class="listitem">
In <code class="literal">cps-hid</code> subdriver, <code class="literal">cps_fix_report_desc()</code> method should now handle
     mismatched <code class="literal">LogMax</code> ranges for input and output voltages, whose USB Report
     Descriptors are wrongly encoded by some firmware versions. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1512" target="_top">#1512</a>]
</li><li class="listitem">
In <code class="literal">cps-hid</code> subdriver, try to fix frequency scaling based on the values
     we see from the device and/or configuration overrides (low, nominal, high)
     so <code class="literal">499.0 Hz</code> reading that comes from some firmware versions gets reported
     properly as <code class="literal">49.9Hz</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2717" target="_top">#2717</a>]
</li><li class="listitem">
USB parameters (per <code class="literal">usb_communication_subdriver_t</code>) are now set back to
     their default values during enumeration after probing each subdriver.
     Having an unrelated device connected with a VID:PID matching the
     <code class="literal">arduino-hid</code> subdriver prevented use of an actual <code class="literal">usb-hid</code> device due to
     changes made to this struct during probe. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2611" target="_top">#2611</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
USB-capable drivers generally:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
…could earlier log <code class="literal">(nut_)libusb_get_string: Success</code> due to either
     reading an empty string or getting a success code <code class="literal">0</code> from libusb.
     This difference should now be better logged, and not into syslog. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2399" target="_top">#2399</a>]
</li><li class="listitem">
…now can benefit from a new <code class="literal">nut_usb_get_string()</code> method which can do a
     fallback <code class="literal">en_US</code> query for devices which report a broken "langid" language
     identifier value. This notably manifested in inability to query the device
     Manufacturer, Model and Serial Number values with some buggy device firmware
     or hardware. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2604" target="_top">PR #2604</a>, issues <a class="ulink" href="https://github.com/networkupstools/nut/issues/1925" target="_top">#1925</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/414" target="_top">#414</a>]
</li><li class="listitem">
Currently this was tested to fix certain device discovery with the
       <code class="literal">usbhid-ups</code> driver; but should also apply out of the box to same
       discovery logic in <code class="literal">blazer_usb</code>, <code class="literal">nutdrv_qx</code>, <code class="literal">riello_usb</code> and
       <code class="literal">tripplite_usb</code> drivers.
</li><li class="listitem">
Also applied to <code class="literal">nut-scanner</code> and <code class="literal">libnutscan</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2615" target="_top">issue #2615</a>]
</li><li class="listitem">
More work may be needed for other USB-capable drivers (<code class="literal">richcomm_usb</code>,
       <code class="literal">nutdrv_atcl_usb</code>) and for general code to collect string readings and
       other data points, and to configure the fallback locale or choose one
       if several are served by the device. [issues <a class="ulink" href="https://github.com/networkupstools/nut/issues/2613" target="_top">#2613</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2614" target="_top">#2614</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2615" target="_top">#2615</a>]
</li><li class="listitem">
…should now be more likely to succeed with iterative detection
     of an UPS interface on a composite USB device or when looking at devices
     with non-default interface/endpoint/config numbers. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2611" target="_top">PR #2611</a>]
</li><li class="listitem">
…should now accept a <code class="literal">LIBUSB_DEBUG=INTEGER</code> setting in <code class="literal">ups.conf</code>
     (as well as an environment variable that can be generally set via
     <code class="literal">nut.conf</code> or service unit methods or init script), to enable
     troubleshooting of LibUSB itself. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2616" target="_top">issue #2616</a>]
</li><li class="listitem">
…should now not log "insufficient permissions on everything" alone when
     some devices were accessible but just did not match — clarify that case
     in the next line, when applicable. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2699" target="_top">PR #2699</a>]
</li><li class="listitem">
…should now track the fact of <code class="literal">assumed_LogMax</code> (typically when firmware
     encoding logic is wrong, and <code class="literal">-1</code> is resolved by parser). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1512" target="_top">#1512</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1040" target="_top">#1040</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">snmp-ups</code> updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Added support to monitor BayTech RPC3-NC PDUs, with <code class="literal">baytech-rpc3nc-mib</code>
     serving same basic data points as were available in <code class="literal">baytech-mib.c</code>,
     but checking for a different model OID subtree and different OIDs for
     the device model information. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2779" target="_top">#2779</a>]
</li><li class="listitem">
Fixed <code class="literal">netvision-mib</code>: sync <code class="literal">netvision_output_info</code> with currently
     available <code class="literal">SOCOMECUPS-MIB.txt</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2803" target="_top">#2803</a>]
</li></ul></div></li><li class="listitem">
<code class="literal">mge-utalk</code> driver will no longer set non-standard status values <code class="literal">COMMFAULT</code>
   and <code class="literal">ALARM</code> (for a specific status bit); instead, it will set modern
   <code class="literal">ups.alarm</code> with values <code class="literal">COMMFAULT</code> and/or <code class="literal">DEVICEALARM</code> (and raise
   an <code class="literal">ALARM</code> in <code class="literal">ups.status</code> for either, as standard alarms go). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2708" target="_top">#2708</a>]
</li><li class="listitem">
Introduced a new driver concept for interaction with OS-reported hardware
   monitoring readings. Currently instantiated as <code class="literal">hwmon_ina219</code> specifically
   made for Texas Instruments INA219 chip as exposed in the Linux "hwmon"
   subsystem of its "sysfs" interface (and talking I2C under the hood), this
   approach seems to have good potential to expand into covering more devices
   and perhaps platforms. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2430" target="_top">#2430</a>]
</li><li class="listitem"><p class="simpara">
Introduced <code class="literal">ECO</code> status concept for "ECO mode" (or "High Efficiency" mode,
   or "Energy Saver System"…) as named and defined by hardware vendors.
   One common aspect is that this is a balance of electrical efficiency vs.
   robust outage protection (which may be overkill for IT equipment whose
   PSU can survive several milliseconds on capacitors alone) which can be
   selected at run-time.  Previously such choice was made at the time of
   purchase, with the UPSes only supporting some one protection strategy.
   [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2495" target="_top">issue #2495</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2637" target="_top">PR #2637</a>]
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Updated documentation, end-user clients (CGI, NUT-Monitor UI);
</li><li class="listitem">
Updated <code class="literal">upsmon</code> client with ability to report entering and exiting
     the ECO mode if reported by the driver;
</li><li class="listitem">
Initial implementation for Eaton devices with <code class="literal">usbhid-ups</code> driver.
</li></ul></div></li><li class="listitem"><p class="simpara">
Introduced handling for the <code class="literal">ALARM</code> status, which already existed as a
   common denominator for devices seen with active <code class="literal">ups.alarm</code> variables.
   UPS devices in an <code class="literal">ALARM</code> status are generally considered volatile and
   may be considered critical/dead by the <code class="literal">upsmon</code> client earlier than in
   other statuses (e.g. in no-communication situations). It has to be noted
   that there is no common standard for what constitutes an alarm and such
   alarm states were also previously observed for less severe reasons. This
   depends on the manufacturer/device-specific implementation in the driver.
   [issues <a class="ulink" href="https://github.com/networkupstools/nut/issues/415" target="_top">#415</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2657" target="_top">#2657</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2658" target="_top">PR #2658</a>]
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Updated documentation, end-user clients (CGI, NUT-Monitor UI);
</li><li class="listitem">
Updated <code class="literal">upsmon</code> client with ability to report entering and exiting
     the ALARM status if reported by the driver;
</li><li class="listitem">
Updated <code class="literal">upsmon</code> client with setting to toggle whether an <code class="literal">ALARM</code>
     status can prompt the UPS to become critical in certain situations.
</li></ul></div></li><li class="listitem">
The <code class="literal">upsmon</code> client can now also report entering and exiting the <code class="literal">OVER</code>
   (UPS overloaded), <code class="literal">TRIM</code> and <code class="literal">BOOST</code> (adjusting for bad input voltage)
   states. A setting <code class="literal">OVERDURATION</code> was introduced to define a timeout
   after which a non-communicating UPS that was last seen in state <code class="literal">OVER</code>
   should be considered critical (or not). [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1074" target="_top">PR #1074</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2877" target="_top">issue #2877</a>]
</li><li class="listitem">
Revised <code class="literal">upssched</code> timer handler that can be called from <code class="literal">upsmon</code> as its
   <code class="literal">NOTIFYCMD</code> to not report confusing environment variable values of
   <code class="literal">NOTIFYTYPE</code> and <code class="literal">UPSNAME</code> from the original call when a timer eventually
   fires — these values are irrelevant at that distant future. The NIT (NUT
   Integration Tests) suite was extended to configure and call this tool,
   facilitating its development and troubleshooting. Also the <code class="literal">upssched</code>
   timer daemon part can now save its PID file (so that NIT can terminate
   it after tests). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2890" target="_top">#2890</a>]
</li><li class="listitem"><p class="simpara">
New <code class="literal">libupsclient</code> API methods added:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
<code class="literal">upscli_str_add_unique_token()</code> and <code class="literal">upscli_str_contains_token()</code>,
     to help C NUT clients process <code class="literal">ups.status</code> and similarly structured
     strings same way as NUT core code base. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2852" target="_top">#2852</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2859" target="_top">#2859</a>]
</li><li class="listitem">
<code class="literal">upscli_connect()</code> was previously always blocking; now this is sort of
     optional, with new <code class="literal">upscli_set_default_connect_timeout()</code> able to change
     the implicit timeout from default zero (meaning blocking) to a positive
     value (or back to 0). Several NUT clients (<code class="literal">upsc</code>, <code class="literal">upscmd</code>, <code class="literal">upsrw</code>,
     <code class="literal">upslog</code>, <code class="literal">upsmon</code>, <code class="literal">upsimage</code>, <code class="literal">upsset</code> and <code class="literal">upsstats</code>) were updated
     to default with a 10-second timeout in case of name resolution lags or
     unresponsive hosts (notably a problem with <code class="literal">upsmon</code> contacting many
     remote systems at once). The <code class="literal">NUT_DEFAULT_CONNECT_TIMEOUT</code> environment
     variable can be used to modify this timeout for all clients. Further
     new methods here include <code class="literal">upscli_get_default_connect_timeout()</code> to
     retrieve a copy of the last stored timeout, and
     <code class="literal">upscli_init_default_connect_timeout()</code> to initialize the value from
     a number of sources with different priorities. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2847" target="_top">#2847</a>]
</li><li class="listitem">
Symbols exported from <code class="literal">libupsclient</code> now include <code class="literal">nut_debug_level*</code> so
     that NUT clients can be usefully debugged (e.g. using <code class="literal">NUT_DEBUG_LEVEL</code>
     environment variable). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2847" target="_top">#2847</a>]
</li></ul></div></li><li class="listitem">
Several NUT clients including <code class="literal">upscmd</code>, <code class="literal">upsrw</code>, <code class="literal">upsimage</code>, <code class="literal">upsset</code>,
   <code class="literal">upsstats</code>, and <code class="literal">upslog</code> (during reconnection), did not <code class="literal">UPSCLI_CONN_TRYSSL</code>
   so went plaintext even when secure connections were possible. Fixed to at
   least try being secure, same way as <code class="literal">upsc</code> does for a long time. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2847" target="_top">#2847</a>]
</li><li class="listitem"><p class="simpara">
<code class="literal">upsmon</code> updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
It was realized that the <code class="literal">POWERDOWNFLAG</code> must be explicitly set in the
     configuration file, there is no built-in default in the binary program
     (the settings facilitated by the <code class="literal">configure</code> script during build "only"
     impact the <code class="literal">upsmon.conf.sample</code>, init-scripts and similar files generated
     from templates). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/321" target="_top">issue #321</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2383" target="_top">PR #2383</a>]
</li><li class="listitem">
Added an <code class="literal">OBLBDURATION</code> (seconds) setting to optionally delay raising
     the alarm for immediate shutdown in critical situation. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/321" target="_top">#321</a>]
</li><li class="listitem">
Optimized <code class="literal">parse_status()</code> by not checking further strings if we had
     a match; report unexpected tokens in debug log. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/415" target="_top">#415</a>]
</li><li class="listitem">
Revised internal <code class="literal">do_notify()</code> method to support formatting strings
     with two <code class="literal">%s</code> placeholders, to use if certain use-cases pass any extra
     information (e.g. not just "we have alarms" but their values too). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/415" target="_top">#415</a>]
</li><li class="listitem">
Introduced handling for "unknown" <code class="literal">ups.status</code> tokens, reporting them
     as "OTHER" notification type (whenever the set of such tokens appears
     or changes) or "NOTOTHER" when they disappear. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/415" target="_top">#415</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">upslog</code> updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Added support for limiting the loop count. Using in NIT (NUT Integration
     Test) suite for double profit (checking the tool and fallback in NIT).
</li><li class="listitem">
If you use the legacy CLI options for single-system logging (<code class="literal">-s &lt;system&gt;</code>
     and <code class="literal">-l &lt;logfile&gt;</code>) along with newer tuple(s) for multiple-system logging
     (repeatable <code class="literal">-m &lt;system,logfile&gt;</code>), previously the single-system options
     were overridden by the tuple(s); now they become part of the list.
</li><li class="listitem">
Internally, changed from use of shared global variables to query one UPS
     at a time, populated from the new list of tuples during each loop cycle,
     to passing and using the new tuple structures directly.
</li><li class="listitem">
The <code class="literal">upsname</code> in the <code class="literal">system=upsname[@hostname[:port]]</code> parameter may
     be an asterisk <code class="literal">*</code> to query for devices currently served by the hostname.
</li><li class="listitem">
Same log file may safely be used in different logging tuples (it is
     then recommended to use <code class="literal">%UPSHOST%</code> in a custom formatting string).
</li><li class="listitem">
Fixed printing of <code class="literal">%UPSHOST%</code> when multiple systems are being logged.
</li><li class="listitem">
A <code class="literal">%t</code> for a TAB character can now be used in the formatting string.
</li><li class="listitem">
Added <code class="literal">-N</code> to prefix <code class="literal">%UPSHOST%%t</code> before the format string (whether
     default or custom). Useful when logging many systems into same target.
</li><li class="listitem">
Added <code class="literal">-D</code> for debugging (and foregrounding by default), like with
     other NUT daemons.
</li><li class="listitem">
Added systemd and SMF service integration. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1803" target="_top">#1803</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
More systemd integration:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Introduced a <code class="literal">nut-sleep.service</code> unit which stops <code class="literal">nut.target</code> when a
     system sleep was requested, and starts it when the sleep is finished.
     This helps avoid NUT shutting down a woken-up system just because its
     power state was critical before the sleep (called as a <code class="literal">SHUTDOWNCMD</code>
     implementation by the end-user), and a next-read timestamp was not seen
     (deemed to be a stale UPS, meaning lost communications during critical
     state, so must go down ASAP). While not as elegant as native systemd
     "inhibitor interface" support, this approach does work. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1833" target="_top">#1833</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1070" target="_top">#1070</a>]
</li><li class="listitem">
Introduced support for the "inhibitor interface" as well (should be
     available on systems with systemd version 183 or newer) for a better
     handling of the time jump specifically in the <code class="literal">upsmon</code> client via new
     <code class="literal">Inhibit()</code> method in <code class="literal">common.c</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1070" target="_top">#1070</a>]
</li><li class="listitem">
As an extension of the logic introduced above, hopefully now <code class="literal">upsmon</code>
     would behave better in face of any significant and unexpected clock
     jumps (on POSIX builds so far), even if they are not suspend/hibernate
     events (or they were but we could not have an inhibit lock). Now they
     should be handled similar (avoid stale UPS data and rash decisions)
     for summer/winter time change on non-UTC deployments, a debugger
     suspending the <code class="literal">upsmon</code> process, etc. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2597" target="_top">#2597</a>]
</li><li class="listitem">
Introduced delivery of default systemd presets (lists of enabled/disabled
     units). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2721" target="_top">#2721</a>]
</li><li class="listitem">
A <code class="literal">nut-udev-settle.service</code> was introduced to replace dependency on the
     <code class="literal">systemd-udev-settle.service</code> which is deprecated and causes warnings on
     some systems. It was shown to benefit NUT use-cases however. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2638" target="_top">#2638</a>]
</li></ul></div></li><li class="listitem">
<code class="literal">gamatronic</code> driver revised for safer memory operations; this was reported
   to have fixed a Segmentation Fault seen in earlier NUT releases with
   some of the devices supported by this driver. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2427" target="_top">#2427</a>]
</li><li class="listitem"><p class="simpara">
<code class="literal">upsd</code> updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
<code class="literal">upsd_cleanup()</code> is now traced, to more easily see that the daemon is
     exiting (and/or start-up has aborted due to configuration or run-time
     issues). Warning about "world readable" files clarified. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2417" target="_top">#2417</a>]
</li><li class="listitem">
Failure to <code class="literal">LISTEN</code> on an invalid host name (e.g. <code class="literal">localhost:3493</code> or
     <code class="literal">1.2.3.4/24</code>) is now logged in a more actionable manner. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2665" target="_top">#2665</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
<code class="literal">nut-scanner</code> updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p class="simpara">
The tool relies on dynamic loading of shared objects (library files)
     orchestrated at run-time rather than pre-compiled, to avoid excessively
     huge package footprints. This however relies on knowing (or sufficiently
     safely guessing) the library file names to use, and short <code class="literal">libname.so</code>
     is not ubiquitously available. With the new <code class="literal">m4</code> macro <code class="literal">AX_REALPATH_LIB</code>
     we can store and try to use the file name which was present on the build
     system, while we search for a suitable library. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2431" target="_top">#2431</a>]
</p><div class="note" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Note</h3><p>A different but functionally equivalent trick is done for <code class="literal">libupsclient</code>
during a NUT build.
   * Fixed support for IPv6 addresses (passed in square brackets) for both
     <code class="literal">-s</code> start/<code class="literal">-e</code> end command-line options, and for <code class="literal">-m cidr/mask</code> option.
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2512" target="_top">issue #2512</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2518" target="_top">PR #2518</a>]
   * Newly added support to scan several IP addresses (single or ranges)
     with the same call, by repeating command-line options; also <code class="literal">-m auto{,4,6}</code>
     can be specified (once) to select IP (all, IPv4, IPv6) address ranges of
     configured local network interfaces.
     An <code class="literal">/ADDRLEN</code> suffix can be added to the option, to filter out discovered
     subnets with too many bits available for the host address part (avoiding
     millions of scans in the extreme cases).
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2244" target="_top">issue #2244</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2511" target="_top">issue #2511</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2509" target="_top">PR #2509</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2513" target="_top">PR #2513</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2517" target="_top">PR #2517</a>]
   * Implemented parallel scanning for IPMI bus, otherwise default scan for
     all supported buses with <code class="literal">-m auto</code> takes unbearably long. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2523" target="_top">#2523</a>]
   * Bumped version of <code class="literal">libnutscan</code> to 2.6.0, it now includes a few more
     methods and symbols from <code class="literal">libcommon</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2244" target="_top">issue #2244</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2509" target="_top">PR #2509</a>]
   * Do not actively suggest <code class="literal">vendor(id)</code>, <code class="literal">product(id)</code>, and <code class="literal">serial</code> options
     for <code class="literal">bcmxcp_usb</code>, <code class="literal">richcomm_usb</code> and <code class="literal">nutdrv_atcl_usb</code> drivers for now
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1763" target="_top">#1763</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1764" target="_top">#1764</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1768" target="_top">#1768</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2580" target="_top">#2580</a>]</p></div></li></ul></div></li><li class="listitem"><p class="simpara">
All drivers should now support the optional <code class="literal">sdcommands</code> setting with
   a site-local list of instant commands to handle <code class="literal">upsdrv_shutdown()</code>,
   which may be useful in cases when the driver’s built-in commands
   (or their order) do not meet the goals of particular NUT deployment.
   This can also help with shutdown endgame testing, using a mock command like
   starting the beeper (where supported) to verify that the UPS communications
   happen as expected, without compromising the load connected to the UPS.
</p><p class="simpara">Also defined <code class="literal">EF_EXIT_SUCCESS</code> and <code class="literal">EF_EXIT_FAILURE</code> in <code class="literal">include/common.h</code>
to avoid magic numbers in code like <code class="literal">set_exit_flag(-2)</code>, and revised whether
it is getting set at all in "killpower" vs. other cases, based on new
<code class="literal">handling_upsdrv_shutdown</code> internal flag.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Note</h3><p>during this overhaul, many older drivers got their first ever supported
INSTCMD such as <code class="literal">shutdown.return</code>, <code class="literal">shutdown.stayoff</code> or <code class="literal">load.off</code>. Default
logic that was previously the content of <code class="literal">upsdrv_shutdown()</code> methods was often
relocated into new <code class="literal">shutdown.default</code> INSTCMD definitions. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2670" target="_top">#2670</a>]</p></div></li><li class="listitem"><p class="simpara">
Common code:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
<code class="literal">upscli_splitname()</code> should now recognize <code class="literal">upsname:port</code> typos (missing
     the <code class="literal">@hostname</code> part) and error out gracefully.
</li><li class="listitem">
Introduced a <code class="literal">NUT_DEBUG_SYSLOG</code> environment variable to tweak activation
     of syslog message emission (and related detachment of <code class="literal">stderr</code> when
     backgrounding), primarily useful for NIT and perhaps systemd. Most
     methods relied on logging bits being set, so this change aims to be
     minimally invasive to impact setting of those bits (or not) in the
     first place. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2394" target="_top">#2394</a>]
</li><li class="listitem">
<code class="literal">root</code>-owned daemons now use not the hard-coded <code class="literal">PIDPATH</code> value set
     by the <code class="literal">configure</code> script during build, but can override it with a
     <code class="literal">NUT_PIDPATH</code> environment variable in certain use-cases (such as
     tests). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2407" target="_top">#2407</a>]
</li><li class="listitem">
Allow drivers to set <code class="literal">STATEPATH</code> via <code class="literal">ups.conf</code> to match <code class="literal">upsd</code>
     custom configuration ability; the data server would prefer the value
     from <code class="literal">ups.conf</code> over the one in <code class="literal">upsd.conf</code>, if both are present.
     Note that <code class="literal">NUT_STATEPATH</code> environment variable trumps both. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/694" target="_top">issue #694</a>]
</li><li class="listitem">
Introduced a check for daemons working with PID files to double-check
     that if they can resolve the program name of a running process with
     this identifier, that such name matches the current program (avoid
     failures to start NUT daemons if PID files are on persistent storage,
     and some unrelated program got that PID after a reboot).  This might
     introduce regressions for heavily customized NUT builds (e.g. those
     embedded in NAS or similar devices) where binary file names differ
     significantly from a <code class="literal">progname</code> string defined in the respective NUT
     source file, so a boolean <code class="literal">NUT_IGNORE_CHECKPROCNAME</code> environment
     variable support was added to optionally disable this verification.
     Also the NUT daemons should request to double-check against their
     run-time process name (if it can be detected). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2463" target="_top">issue #2463</a>]
</li><li class="listitem">
Introduced <code class="literal">m4</code> macros to check during <code class="literal">configure</code> phase for the
     platform, and a <code class="literal">nut_bool.h</code> header with <code class="literal">nut_bool_t</code> type to use
     during build, to avoid the numerous definitions of Boolean types
     and values (or macros) in the NUT codebase. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1176" target="_top">issue #1176</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/31" target="_top">issue #31</a>]
</li><li class="listitem">
Custom <code class="literal">distcheck-something</code> targets did not inherit <code class="literal">DISTCHECK_FLAGS</code>
     properly. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2541" target="_top">#2541</a>]
</li><li class="listitem">
Added <code class="literal">status_get()</code> in NUT driver state API, to check if a status
     token string had been set recently, and to avoid duplicate settings;
     fixed <code class="literal">status_set()</code> for multi-token arguments. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2565" target="_top">PR #2565</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2708" target="_top">issue #2708</a>]
</li><li class="listitem">
Local socket/pipe protocol introduced a <code class="literal">LOGOUT</code> command for cleaner
     disconnection handling. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2572" target="_top">#2572</a>]
</li><li class="listitem">
Codebase adapted to the liking of <code class="literal">clang-18</code> and newer revisions of
     <code class="literal">gcc-13</code>+ whose static analyzers on NUT CI farm complained about some
     imperfections after adding newer OS revisions to the population of
     build agents. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2585" target="_top">#2585</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2588" target="_top">#2588</a>]
</li><li class="listitem">
New checks in <code class="literal">clang-19</code> brought new findings about mismatched formatting
     strings and <code class="literal">int</code>-ish parameters of respective methods.
     Overall, had to change formatting strings in some cases, variable types
     in others (e.g. flags or notification types do not make sense as signed)
     and added casting in a few places that remained, because:
</li></ul></div></li><li class="listitem">
<code class="literal">%x</code> style formatting requires an <code class="literal">unsigned int</code> variable
</li><li class="listitem">
Numeric literals and macros are <code class="literal">int</code> by default
</li><li class="listitem">
Results of math with unsigned types like <code class="literal">uint16_t</code>, done in some
       cases, are up-scaled into <code class="literal">int</code> by default
</li><li class="listitem">
<code class="literal">char</code>'s, <code class="literal">unsigned</code> or not, seem to be also up-scaled into <code class="literal">int</code>
</li><li class="listitem">
Updated <code class="literal">docs/nut-names.txt</code> with items defined by 42ITy NUT fork. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2339" target="_top">#2339</a>]
</li><li class="listitem">
Various recipe, documentation and source files were revised to address
   respective warnings issued by the new generations of analysis tools.
   [<a class="ulink" href="https://github.com/networkupstools/nut/issues/823" target="_top">#823</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2437" target="_top">#2437</a>, <a class="ulink" href="https://github.com/networkupstools/nut-website/issues/52" target="_top">nut-website issue #52</a>]
</li><li class="listitem">
Fixed <code class="literal">configure</code> script to use default (target-specific) values of
   <code class="literal">CFLAGS</code>, <code class="literal">LIBS</code> etc. when probing relevant settings for each third-party
   dependency; as a consequence, on systems that support building for many
   targets, we check relevant build-ability for that target and not for the
   building system itself. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2673" target="_top">issue #2673</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2675" target="_top">PR #2675</a>]
</li><li class="listitem">
Fixed dynamic linking of Mozilla NSS on systems like Solaris/illumos,
   where the shared objects are not packaged into the common RPATH.
   [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2674" target="_top">issue #2674</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2675" target="_top">PR #2675</a>]
</li><li class="listitem">
<code class="literal">lib/*.pc.in</code>: propagate <code class="literal">-R/PATH</code> to NUT library installation location
   (by default not in system prefix) to help third-party clients link with
   us automatically. [related to <a class="ulink" href="https://github.com/networkupstools/nut/issues/2782" target="_top">issue #2782</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2865" target="_top">PR #2865</a>]
</li><li class="listitem">
Added <code class="literal">scripts/valgrind</code> with a helper script and suppression file to
   ignore common third-party problems. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2511" target="_top">#2511</a>]
</li><li class="listitem">
Fixed <code class="literal">configure --with-valgrind=PATH</code> vs. detection of its usability;
   fixed some portability issues with detection of usability per se, tried
   <code class="literal">--with-valgrind=auto</code> the default to auto-detect and use the feature
   (in tests) wherever possible, but too many NUT CI farm agents disagreed;
   so for now the default is <code class="literal">no</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2823" target="_top">#2823</a>]
</li><li class="listitem">
When drivers dump collected data (during troubleshooting), flush <code class="literal">stdout</code>
   buffer immediately for sane logging (especially on Windows). [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2699" target="_top">PR #2699</a>]
</li><li class="listitem">
Revised <code class="literal">nut.exe</code> (the NUT for Windows wrapper for all-in-one service)
   to be more helpful with command-line use (report that it failed to start
   as a service, have a help message, pass debug verbosity to launched NUT
   programs…) and add a man page for it. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2432" target="_top">issue #2432</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2446" target="_top">PR #2446</a>]
</li><li class="listitem">
The <code class="literal">scripts/Windows/build-mingw-nut.sh</code> helper script was extended to
   use <code class="literal">nut_build_${ARCH}</code> and <code class="literal">nut_install_${ARCH}</code> directories by default,
   with the older <code class="literal">nut_build</code> and <code class="literal">nut_install</code> short names becoming just a
   symbolic link to the latest executed build: this should help compare the
   differences of 32/64-bit builds, without them stepping on each other’s toes.
</li><li class="listitem"><p class="simpara">
NUT binding for Python and the <code class="literal">NUT-Monitor</code> Python UI client updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
The <code class="literal">PyNUTClient</code> module should no longer rely on presence of a <code class="literal">telnetlib</code>
     module in the build or execution environment (deprecated in Python 3.11,
     removed since Python 3.13). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2183" target="_top">issue #2183</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2792" target="_top">PR #2792</a>]
</li><li class="listitem">
The PyPI distribution of the <code class="literal">PyNUTClient</code> module tarball should now use a
     lower-cased file name (and immediate versioned directory name inside) to
     match the requirements of <a class="ulink" href="https://peps.python.org/pep-0625/" target="_top">PEP-0625</a>.
     The Python module name (and its directory) should remain camel-cased. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2773" target="_top">#2773</a>]
</li><li class="listitem">
Added man page for the <code class="literal">NUT-Monitor</code> Python UI client.
</li><li class="listitem">
The <code class="literal">NUT-Monitor</code> Python UI client itself was revised to report the
     <code class="literal">PACKAGE_VERSION</code> and <code class="literal">NUT_WEBSITE_BASE</code> strings in the "About" dialog
     contents; localization support for the dialog and some other resources
     was revised to work in Py3Qt5 variant of the script. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/722" target="_top">#722</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
Documentation recipe updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><p class="simpara">
Enabled installation of built single-file PDF and HTML (including man
     page renditions) under the configured <code class="literal">docdir</code>. It seems that previously
     they were only built (if requested) but not installed via <code class="literal">make</code>, unlike
     the common man pages which are delivered automatically. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2445" target="_top">#2445</a>]
</p><div class="note" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Note</h3><p>The <code class="literal">html-chunked</code> documents are currently still not installed.</p></div></li><li class="listitem">
Added support to <code class="literal">./configure --with-doc=man=dist-auto</code> to use the
     distributed manual page files if present; only fall back to (re-)building
     them if we can. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2473" target="_top">#2473</a>]
</li><li class="listitem">
Added a <code class="literal">make distcheck-light-man</code> recipe to require verification that
     the manual page files can be built using the prepared "tarball" archive.
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2473" target="_top">#2473</a>]
</li><li class="listitem"><p class="simpara">
Revised the documentation building recipes, with the goal to avoid
     building the <code class="literal">ChangeLog</code> products and their intermediate files more
     than once (but still react to <code class="literal">git</code> metadata changes during development),
     and to sanity-check the resulting final document (currently only for
     <code class="literal">html-single</code> mode).
</p><p class="simpara">As part of this, the <code class="literal">CHANGELOG_REQUIRE_GROUP_BY_DATE_AUTHOR</code> setting was
     added (for <code class="literal">make</code> calls and used by <code class="literal">tools/gitlog2changelog.py.in</code>
     script), and it defaults to <code class="literal">true</code> allowing for better ordered documents
     at the cost of some memory during document generation. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2510" target="_top">#2510</a>]
   * Updated man page generation with <code class="literal">configure</code> script options to specify
     that manual section codes on the target platform differ from (Linux-based)
     defaults hard-coded into page sources; this should allow to simplify NUT
     packaging recipe maintenance in those diverse distributions (no more need
     to update patches for changed or added documentation sources).
   * Lines in first section of NUT configuration report (which can optionally
     remain as <code class="literal">config.nut_report_feature.log</code> and be installed into shared
     documentation of a NUT package) are now better grouped as miscellaneous
     features and detection results, then drivers and programs/tools. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2676" target="_top">#2676</a>]</p></li></ul></div></li><li class="listitem">
Added a <code class="literal">common/Makefile.am</code> build product for a new internal library
   <code class="literal">libcommonstr.la</code> which allows a smaller selection of helper methods
   for tools like <code class="literal">nut-scanner</code> which do not need the full <code class="literal">libcommon.la</code>
   nor <code class="literal">libcommonclient.la</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2478" target="_top">#2478</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2491" target="_top">#2491</a>]
</li><li class="listitem">
Added a <code class="literal">drivers/Makefile.am</code> build product for a new internal library
   <code class="literal">libserial-nutscan.la</code> to simplify <code class="literal">tools/nut-scanner/Makefile.am</code> recipes.
   [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2490" target="_top">#2490</a>]
</li><li class="listitem">
Build of <code class="literal">snmp-ups</code> and <code class="literal">netxml-ups</code> drivers now explicitly brings linker
   dependency on chosen SSL libraries. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2479" target="_top">#2479</a>]
</li><li class="listitem">
Introduced <code class="literal">configure --with-modbus+usb</code> option to require an USB-capable
   libmodbus, and defaulted a couple of specific situations as if this was
   required (implicitly): <code class="literal">configure --with-modbus --with-usb</code> and
   either <code class="literal">--with-drivers=*apc_modbus*</code> (actually implies <code class="literal">--with-modbus</code>)
   or <code class="literal">--with-modbus-includes=... --with-modbus-libs=...</code>
   as a way to avoid surprises with custom NUT builds aiming to have an
   USB-capable <code class="literal">apc_modbus</code> driver (currently this requires a custom-built
   libmodbus). Also fixed (re-)detection of libmodbus RTU USB support with
   static libmodbus builds. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2666" target="_top">#2666</a>]
</li><li class="listitem">
Drivers built with libmodbus (<code class="literal">phoenixcontact_modbus</code>, <code class="literal">generic_modbus</code>,
   <code class="literal">huawei-ups2000</code>, <code class="literal">socomec_jbus</code>, <code class="literal">adelsystem_cbi</code>, <code class="literal">apc_modbus</code>) should
   now report whether the library is linked dynamically or statically — this
   can help in troubleshooting (especially of <code class="literal">apc_modbus</code> which may be using
   a custom build of the library not delivered by the operating system). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2897" target="_top">#2897</a>]
</li><li class="listitem"><p class="simpara">
Brought keyword dictionaries of <code class="literal">nutconf</code> and <code class="literal">augeas</code> NUT configuration
   file parsers up to date; restored automated checks for <code class="literal">augeas</code> lenses.
   [<a class="ulink" href="https://github.com/networkupstools/nut/issues/657" target="_top">issue #657</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2294" target="_top">issue #2294</a>]
</p><div class="note" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Note</h3><p>Some known issues remain with augeas lens definitions, so currently
   they should be able to parse common simple use-cases but not certain types
   of more complex configurations (e.g. some line patterns that involve too
   many double-quote characters) which are valid for NUT proper. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/657" target="_top">#657</a>]</p></div></li><li class="listitem">
Cross-builds using only a host implementation of <code class="literal">pkg-config</code> program
   should now ignore host <code class="literal">*.pc</code> files and avoid confusion.
</li><li class="listitem">
NUT CI farm build recipes, documentation and some <code class="literal">m4</code>/<code class="literal">configure.ac</code>
   sources updated to handle a much larger build scope on MacOS. Also
   migrated the builders to Apple Silicon from x86 (deprecated by CircleCI).
   Disabled <code class="literal">HOMEBREW_NO_AUTO_UPDATE</code> to gain 40 min per build at cost of
   slightly older environment. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2502" target="_top">#2502</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1579" target="_top">#1579</a>]
</li><li class="listitem">
Introduced a simple experiment to expose NUT client readings as filesystem
   objects via FUSE, in <code class="literal">scripts/fuse/execfuse-nut</code> now. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2591" target="_top">#2591</a>]
</li><li class="listitem">
Introduced <code class="literal">make install-as-root</code> to create directories not directly
   populated by <code class="literal">make install</code> and NUT build artifacts, apply permissions
   and (on some platforms) restart services involved with NUT. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1298" target="_top">#1298</a>]
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_8_2_what_8217_s_new_since_2_8_1"></a>2.3. Release notes for NUT 2.8.2 - what’s new since 2.8.1</h3></div></div></div><p><a class="ulink" href="https://github.com/networkupstools/nut/milestone/10" target="_top">https://github.com/networkupstools/nut/milestone/10</a></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">
Fix fallout of development in NUT v2.8.0 and/or v2.8.1:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
dstate machinery: a segmentation fault (null pointer dereference) was
     possible with <code class="literal">INSTCMD</code> processing of commands without parameters nor
     <code class="literal">TRACKING</code> identifier. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2155" target="_top">#2155</a>]
</li><li class="listitem">
USB bus number detection for libusb-1.0 builds was overly zealous and
     wrongly considered zero values as an error. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2198" target="_top">#2198</a>]
</li><li class="listitem">
<code class="literal">upsmon</code> recognition of <code class="literal">CAL</code> state could linger after the calibration
     activity was completed by the hardware, which led to mis-processing of
     shutdown triggers. Also, notification was added to report "finished
     calibration". [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2168" target="_top">issue #2168</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2169" target="_top">PR #2169</a>]
</li><li class="listitem">
<code class="literal">upsmon</code> recognition of <code class="literal">OFF</code> state as a trigger for FSD (forced shut
     down) criticality considered also the input line state, which may be
     an independently evolving circumstance. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2278" target="_top">issue #2278</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2279" target="_top">PR #2279</a>]
</li><li class="listitem">
<code class="literal">upsmon</code> support for <code class="literal">POLLFAIL_LOG_THROTTLE_MAX</code> did not neuter the
     applied setting when live-reloading configuration, so commenting it
     away in <code class="literal">upsmon.conf</code> did not have the effect of resetting the logging
     frequency to default. It also did not reset the counters to certainly
     follow the new configuration for existing faults. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2207" target="_top">issue #2207</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2209" target="_top">PR #2209</a>]
</li><li class="listitem">
<code class="literal">upsmon</code> support for <code class="literal">POLLFAIL_LOG_THROTTLE_MAX</code> had an off-by-one error
     (e.g. reporting "Data stale" or "Driver not connected" every 30 sec with
     <code class="literal">POLLFAIL_LOG_THROTTLE_MAX 5</code> and <code class="literal">POLLFREQ 5</code> settings). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2207" target="_top">#2207</a>]
</li><li class="listitem">
Drivers running with non-default user account (e.g. with <code class="literal">user=root</code>
     in their configuration) failed to apply group ownership and permissions
     to their Unix socket file for interaction with the local data server.
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2185" target="_top">#2185</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2096" target="_top">#2096</a>]
</li><li class="listitem">
Dispatcher script <code class="literal">scripts/python/app/NUT-Monitor</code> referenced <code class="literal">py3qt3</code>
     instead of the correct <code class="literal">py3qt5</code>. It also tries to check both <code class="literal">py2gtk2</code>
     and <code class="literal">py3qt5</code> implementations verbosely, even if one is not installed.
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2199" target="_top">#2199</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2201" target="_top">#2201</a>]
</li><li class="listitem">
Set the <code class="literal">DesktopFileName</code> in <code class="literal">scripts/python/app/NUT-Monitor-py3qt5</code>,
     this binds the application with the desktop file and allow the Open
     Desktop compatible implementation to display the proper icon and
     application name. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2205" target="_top">#2205</a>]
</li><li class="listitem">
Original recipe for <code class="literal">apc_modbus</code> strictly required USB support even if
     building NUT without it. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2262" target="_top">#2262</a>]
</li><li class="listitem">
Builds requested with a specific C/C++ language standard revision via
     <code class="literal">CFLAGS</code> and <code class="literal">CXXFLAGS</code> should again be honoured. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2306" target="_top">PR #2306</a>]
</li><li class="listitem">
Allow requesting detailed debug builds (with disabled optimizations for
     binaries to best match the source code) for supported compilers using
     <code class="literal">configure</code> script option <code class="literal">--with-debuginfo</code>. Note that default autoconf
     behavior usually embeds moderate optimizations and debug information on
     its own. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2310" target="_top">PR #2310</a>]
</li><li class="listitem">
A fix applied among clean-ups between NUT v2.7.4 and v2.8.0 releases
     backfired for <code class="literal">usbhid-ups</code> subdriver <code class="literal">belkin-hid</code> which in practice
     relied on the broken older behavior; more details in its entry below.
     [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2371" target="_top">PR #2371</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
nut-usbinfo.pl, nut-scanner and libnutscan:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Library API version for <code class="literal">libnutscan</code> was bumped from 2.2.0 to 2.5.0
     during evolution of this NUT release.
</li><li class="listitem">
USB VendorID:ProductID support list files generated by the script for
     different OS frameworks now include a comment with other possibly
     compatible driver names, where the respective file format allows for
     comments.
</li><li class="listitem">
Added the concept of <code class="literal">alt_driver_names</code> in <code class="literal">nutscan_device_t</code> structure
     for ability to suggest a comment with other possibly compatible driver
     names in configuration snippets generated by <code class="literal">nut-scanner</code>; practical
     support implemented for USB connected drivers.
</li><li class="listitem">
Added the concept of commented-away suggested option values <code class="literal">comment_tag</code>
     and a method to <code class="literal">nutscan_add_commented_option_to_device()</code>, instead of
     hacks in prepared config data which broke some use-cases. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2221" target="_top">#2221</a>]
</li><li class="listitem">
Command-line option <code class="literal">-U</code> for USB scan can now be specified several times
     to increase the detail level about hardware link to the device (this was
     previously always suggested, but may be not reliable if USB enumeration
     gets changed over time). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2221" target="_top">#2221</a>]
</li><li class="listitem">
Added generation of FreeBSD/pfSense quirks for USB devices supported
     by NUT (may get installed to <code class="literal">$datadir</code> e.g. <code class="literal">/usr/local/share/nut</code>
     and need to be pasted into your <code class="literal">/boot/loader.conf.local</code>). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2159" target="_top">#2159</a>]
</li><li class="listitem">
nut-scanner now avoids creating ambiguous <code class="literal">nutdevN</code> device section names
     when called separately to scan different media buses (one at a time).
     Now the "bus" name would be embedded (e.g. non-colliding <code class="literal">nutdev-usb1</code>
     and <code class="literal">nutdev-snmp1</code>). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2247" target="_top">#2247</a>]
</li><li class="listitem">
nut-scanner can now discover NUT simulated devices (<code class="literal">.dev</code> and <code class="literal">.seq</code>
     files) located in your sysconfig directory, and prepare configuration
     sections with the simulation driver (currently <code class="literal">dummy-ups</code>). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2246" target="_top">#2246</a>]
</li><li class="listitem">
nut-scanner now reports <code class="literal">dummy-ups</code> as driver when scanning NUT "bus"
     with Old or Avahi method. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2236" target="_top">#2236</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2245" target="_top">#2245</a>]
</li></ul></div></li><li class="listitem">
upsd: Fixed conditions for "no listening interface available" diagnosis
   to check how many listeners we succeeded with, not whether the first one
   succeeded or not. If not all requested (non-localhost) listeners were
   available, default to fail the daemon start-up attempt; support for an
   <code class="literal">ALLOW_NOT_ALL_LISTENERS</code> setting was added to control this behavior. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/723" target="_top">#723</a>]
</li><li class="listitem"><p class="simpara">
NUT CI improvements:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Added publishing recipes for PyNUT client bindings for NUT, so it ends
     up in the <a class="ulink" href="https://pypi.org/project/PyNUTClient" target="_top">PyPI repository</a>.
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2158" target="_top">#2158</a>]
</li><li class="listitem">
Added support for new <code class="literal">ccache</code> namespace concept, where possible. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2256" target="_top">#2256</a>]
</li><li class="listitem">
Fixed an issue for builds configured <code class="literal">--without-usb</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2263" target="_top">#2263</a>]
</li><li class="listitem">
Added a fallback for <code class="literal">libgd</code> discovery (for CGI etc. builds). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2287" target="_top">#2287</a>]
</li><li class="listitem">
Made <code class="literal">aspell</code> TeX module detection more reliable. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2206" target="_top">#2206</a>]
</li><li class="listitem">
Fixed recipes for completely out-of-tree builds to pass with documentation
     generation and checking on all tested "make" implementations. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2318" target="_top">#2318</a>]
</li><li class="listitem">
Various other recipe and documentation clean-up efforts. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2284" target="_top">#2284</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2269" target="_top">#2269</a>,
     <a class="ulink" href="https://github.com/networkupstools/nut/issues/2261" target="_top">#2261</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
main driver core codebase:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Help users of drivers that can be built to support optionally USB and
     other media (like <code class="literal">nutdrv_qx</code> built for serial-only support), and built
     in fact without USB support but used for USB devices, with some more
     information to make troubleshooting easier. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2259" target="_top">issue #2259</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2260" target="_top">PR #2260</a>]
</li><li class="listitem">
Driver programs with debug tracing support via <code class="literal">-D</code> CLI option and/or
     the <code class="literal">NUT_DEBUG_LEVEL</code> environment variable now check those earlier in
     their life-time, so that initialization routine can be debugged. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2259" target="_top">#2259</a>]
</li><li class="listitem">
Multiple USB-capable drivers got options to customize <code class="literal">usb_config_index</code>
     <code class="literal">usb_hid_rep_index</code>, <code class="literal">usb_hid_desc_index</code>, <code class="literal">usb_hid_ep_in</code> and
     <code class="literal">usb_hid_ep_out</code> hardware connection settings via <code class="literal">ups.conf</code> options.
     This is treated as experimental, not all code paths may be actually
     using such values from <code class="literal">struct usb_communication_subdriver_t</code> rather
     than hard-coded defaults. Discovery of correct values is up to the
     user at the moment (using <code class="literal">lsusb</code>, internet search, luck…) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2149" target="_top">#2149</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
nut-driver-enumerator (NDE) service/script:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
The optional daemon mode (primarily useful for systems which monitor
     a large and dynamic population of power devices) was enhanced with a
     <code class="literal">--daemon-after</code> variant which parses the configuration once before
     daemonization and this has a chance to fail while not forked off, as
     well as to allow only completing the service unit initialization when
     everything is actually ready to work (so further dependencies can start
     at the proper time). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/682" target="_top">#682</a>]
</li><li class="listitem">
Also applied other optimizations to the script implementation. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/682" target="_top">#682</a>]
</li></ul></div></li><li class="listitem">
powerpanel text driver now handles status responses in any format and should
   support most devices. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2156" target="_top">#2156</a>]
</li><li class="listitem">
tripplite_usb driver now allows any device to match if a particular Unit ID
   was not specified in <code class="literal">ups.conf</code>. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2297" target="_top">PR #2297</a>, issues <a class="ulink" href="https://github.com/networkupstools/nut/issues/2282" target="_top">#2282</a> and <a class="ulink" href="https://github.com/networkupstools/nut/issues/2258" target="_top">#2258</a>]
</li><li class="listitem"><p class="simpara">
snmp-ups driver:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
added support for Eaton EMP002 sensor for ATS16 NM2 sub-driver. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2286" target="_top">#2286</a>]
</li><li class="listitem">
mapping table updates for apc-mib sub-driver. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2264" target="_top">#2264</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
usbhid-ups driver:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
<code class="literal">arduino-hid</code> subdriver was enhanced from "initial bare bones" experimental
     set of mapped data points to support some 20 more mappings to make it more
     useful as an UPS driver, not just a controller developer sandbox. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2188" target="_top">#2188</a>]
</li><li class="listitem">
<code class="literal">cps-hid</code> subdriver now supports devices branded as Cyber Energy and built
     by cooperation with Cyber Power Systems. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2312" target="_top">#2312</a>]
</li><li class="listitem">
<code class="literal">belkin-hid</code> subdriver now supports Liebert PSI5 devices which have a
     different numeric reading scale than earlier handled models. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2271" target="_top">issue #2271</a>,
     <a class="ulink" href="https://github.com/networkupstools/nut/pull/2272" target="_top">PR #2272</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2369" target="_top">PR #2369</a>] Generally the wrong-scale processing was addressed,
     including a regression in NUT v2.8.0 which led to zero values
     in voltage data points which NUT v2.7.4 reported well [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2371" target="_top">#2371</a>]
</li><li class="listitem">
The <code class="literal">onlinedischarge</code> configuration flag name was too ambiguous and got
     deprecated (will be supported but no longer promoted by documentation),
     introducing <code class="literal">onlinedischarge_onbattery</code> as the meaningful alias. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2213" target="_top">#2213</a>]
</li><li class="listitem">
Logged notifications about <code class="literal">OL+DISCHRG</code> state should now be throttled
     (see the driver manual page for more details) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2214" target="_top">#2214</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2215" target="_top">#2215</a>]:
</li></ul></div></li><li class="listitem">
If <code class="literal">battery.charge</code> is available, make the message when entering the
       state and then only if the charge differs from that when we posted
       the earlier message (e.g. really discharging) and is under
       <code class="literal">onlinedischarge_log_throttle_hovercharge</code> value (defaults to 100%);
</li><li class="listitem">
Also can throttle to a time frequency configurable by a new option
       <code class="literal">onlinedischarge_log_throttle_sec</code>, by default 30 sec if <code class="literal">battery.charge</code>
       is not reported by the device (should be frequent by default, in case
       the UPS-reported state combination does reflect a bad power condition).
</li><li class="listitem"><p class="simpara">
nutdrv_qx driver:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Fixed handling of <code class="literal">battery_voltage_reports_one_pack</code> configuration flag
     introduced in NUT v2.8.1. [originally by <a class="ulink" href="https://github.com/networkupstools/nut/pull/1279" target="_top">PR #1279</a>; fixed by <a class="ulink" href="https://github.com/networkupstools/nut/pull/2324" target="_top">PR #2324</a>,
     <a class="ulink" href="https://github.com/networkupstools/nut/issues/2325" target="_top">issue #2325</a>]
</li></ul></div></li><li class="listitem">
Various code and documentation fixes for NSS crypto support. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2274" target="_top">#2274</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2268" target="_top">#2268</a>]
</li><li class="listitem">
Laid foundations for the SmartNUT effort (aiming to integrate drivers with
   some other backends than the networked NUT data server process).
</li><li class="listitem">
Eaton contributed recipes and scripts used to create the IPP for Unix
   bundle (aka Eaton IPSS Unix or UPP), a freely available value-added
   packaging of NUT distributed as the UPS software companion for OSes
   where their more complex UPS monitoring/management tools had not been
   ported. This allows for delivery of NUT packages with an interactive
   installer and some system integration scripts (events, notifications,
   status, shutdown daemon…), and was contributed to the NUT upstream
   project by Eaton — provided "as is" at the moment, and may later serve
   as foundation or inspiration for new NUT features. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2288" target="_top">#2288</a>]
</li><li class="listitem">
nutconf (C++ library and tool to read and manage NUT configuration files)
   was started in the open by Eaton employees and used in the IPP installer,
   but the code lingered in a side branch. It was now brushed up to our common
   best practices and added to the main codebase. As of this import, there are
   known deficiencies in Windows platform support, as well as some un-awareness
   about configuration key words which appeared in NUT since 2013. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2290" target="_top">#2290</a>]
</li><li class="listitem">
The <code class="literal">tools/gitlog2changelog.py.in</code> script was revised, in particular to
   convert section titles (with contributor names coming from Git metadata)
   into plain ASCII character set, for <code class="literal">dblatex</code> versions which do not allow
   diacritics and other kinds of non-trivial characters in sections. This can
   cause successful builds of <code class="literal">ChangeLog.pdf</code> file on more platforms, but at
   expense of a semi-cosmetic difference in those names. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/2360" target="_top">PR #2360</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2366" target="_top">PR #2366</a>]
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_8_1_what_8217_s_new_since_2_8_0"></a>2.4. Release notes for NUT 2.8.1 - what’s new since 2.8.0</h3></div></div></div><p><a class="ulink" href="https://github.com/networkupstools/nut/milestone/8" target="_top">https://github.com/networkupstools/nut/milestone/8</a></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
"UPS management protocol", Informational RFC 9271 published
   by IETF at <a class="ulink" href="https://www.rfc-editor.org/info/rfc9271" target="_top">https://www.rfc-editor.org/info/rfc9271</a> and the
   IANA port number registry was updated accordingly at
   <a class="ulink" href="https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml?search=3493" target="_top">https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml?search=3493</a>
   (even though this RFC is not formally an Internet Standard)
</li><li class="listitem">
NUT documentation files were rearranged, renaming some to <code class="literal">*.adoc</code> pattern
   to facilitate automatic rendering in GitHub and IDE GUIs, and adding recipe
   support for GitHub issue/PR links. This <code class="literal">NEWS</code> file is now proper asciidoc
   rendered into <code class="literal">release-notes.pdf</code> (and HTML versions). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1953" target="_top">issue #1953</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/2048" target="_top">PR #2048</a>]
   Internally, the documents would use a new way to define cross-linking to
   other pages and their chapters, to facilitate different renderers (including
   GitHub UI), and file names created for "chunked HTML" documentation format
   will no longer have the "chapter number, section number" format which is
   not easy to maintain over time with independent builds of documentation
   in NUT and the actual and historic snapshots for nut-website for example.
   Chapter/Section names will be adapted to produce "chunked HTML" file names
   instead. Documentation links rendered in GitHub UI should point to the HTML
   pages served by a current iteration of the NUT website. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/226" target="_top">PR #226</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/669" target="_top">PR #669</a>]
</li><li class="listitem">
A new <code class="literal">configure --enable-spellcheck</code> toggle should add spelling checks
   to <code class="literal">make check</code> (by default, if tools are available) to facilitate quicker
   acceptance of contributions. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2067" target="_top">#2067</a>]
</li><li class="listitem"><p class="simpara">
Published a new maintainer GPG key to sign tags and release artifacts,
   and possibly git commits as well, as part of solution for <a class="ulink" href="https://github.com/networkupstools/nut/issues/1410" target="_top">issue #1410</a>.
   You can pull it from common OpenPGP servers with the following command:
</p><pre class="screen">:; gpg --recv-key DE0184DA7043DCF7
gpg: key DE0184DA7043DCF7: public key "Jim Klimov (Doing FOSS
         since last millennium) &lt;jimklimov@gmail.com&gt;" imported
gpg: Total number processed: 1
gpg:               imported: 1</pre><p class="simpara">as part of <a class="ulink" href="https://github.com/networkupstools/nut/issues/1410" target="_top">https://github.com/networkupstools/nut/issues/1410</a> solution.</p></li><li class="listitem"><p class="simpara">
Bug fixes for fallout possible due to "fightwarn" effort and other
   evolution in NUT v2.8.0 release:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
The <code class="literal">upsdebugx()</code> and similar methods were converted to macros in <a class="ulink" href="https://github.com/networkupstools/nut/issues/685" target="_top">#685</a>
     to avoid useless data manipulations and requests for logged information,
     whose results would be ignored instantly because the debug level is
     too low. As <a class="ulink" href="https://github.com/networkupstools/nut/issues/1455" target="_top">issue #1455</a> and <a class="ulink" href="https://github.com/networkupstools/nut/pull/1495" target="_top">PR #1495</a> found, in two cases the called
     commands did "meaningfully" modify data — so without debug logs the
     program misbehaved. A known regression for <code class="literal">upscode2</code> driver; might
     be or not be a problem with <code class="literal">upsd</code> server in NUT v2.8.0 release,
     fixed for NUT v2.8.1.
</li><li class="listitem">
A table in <code class="literal">cyberpower-mib</code> (for <code class="literal">snmp-ups</code> driver) sources was
     arranged in NUT v2.8.0 release in a way that precluded the driver
     logic from looking at all of its entries. Also a fix for instant
     command definitions had in fact broken them due to other development.
     Regressions fixed for NUT v2.8.1 [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1432" target="_top">#1432</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2029" target="_top">#2029</a>]
</li><li class="listitem">
A change for file-change detection in <code class="literal">dummy-ups</code> driver for NUT
     v2.8.0 release misfired on some platforms. Regression fixed for NUT
     v2.8.1 [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1420" target="_top">#1420</a>]
</li><li class="listitem">
Fixed building of NUT man pages when just a few drivers are selected
     by <code class="literal">configure</code> script for custom builds [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1467" target="_top">#1467</a>]
</li><li class="listitem">
Now that <code class="literal">upsdrvctl</code> can pass debugging level through to the launched
     driver(s), they would by default stay in the foreground. This can
     complicate (or simplify, when intentional) the management of service
     instances. Now there are explicit <code class="literal">upsdrvctl</code> options for choosing
     this (<code class="literal">-F</code>/<code class="literal">-B</code>), although default behavior is retained. Note that
     explicit foregrounding mode also keeps <code class="literal">upsdrvctl</code> tool from exiting
     and would not wait for one driver to complete initialization before
     starting another in case of mass-management loop to start all drivers
     (without specifying the single device) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1759" target="_top">#1759</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1806" target="_top">#1806</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1875" target="_top">#1875</a>]
</li><li class="listitem">
The <code class="literal">apcsmart</code> and <code class="literal">apcsmart-old</code> handled invalid data too zealously
     and aborted instead of skipping over it, like they did before [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2015" target="_top">#2015</a>]
</li><li class="listitem">
A bit maths optimization in <code class="literal">riello_ser</code> and <code class="literal">riello_usb</code> misfired [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2137" target="_top">#2137</a>]
</li><li class="listitem">
Something about compile-time macros or other warnings-related refactoring
     seems to have confused the MGE SHUT (Serial HID UPS Transfer) driver
     support [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2022" target="_top">#2022</a>]
</li><li class="listitem">
Some warnings were not detected by the tools or build scenarios used
     earlier, and only got addressed now
</li></ul></div></li><li class="listitem">
An issue was identified which could cause <code class="literal">libupsclient</code> parser of device
   and host names to crash upon bad inputs (e.g. poorly resolved environment
   variables in scripts). Now it should fail more gracefully [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2052" target="_top">#2052</a>]
</li><li class="listitem">
New <code class="literal">configure --enable-inplace-runtime</code> option should set default values
   for <code class="literal">--sysconfdir</code>, <code class="literal">--with-user</code> and <code class="literal">--with-group</code> options to match an
   existing NUT deployment — for users who are trying if a custom build
   of recent codebase solves their practical issues. For "quick tests", a
   shortcut operation <code class="literal">./ci_build.sh inplace</code> was added [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1714" target="_top">#1714</a>]
</li><li class="listitem">
State tree structure and methods (including "dstate" wrapper for common
   driver internals) was enhanced with time-stamping of last modification
   (setting, changing, deleting the value or some fields in an entry):
   this allows to detect stale information in a centralized fashion [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2010" target="_top">#2010</a>]
</li><li class="listitem">
We lacked log information about changes of chroot jail (uncommon) and
   of UID/GID (everywhere), which makes troubleshooting harder (e.g. lack
   of access to config files or USB device nodes). Now we have it [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1694" target="_top">#1694</a>]
</li><li class="listitem">
A <code class="literal">NUT_DEBUG_PID</code> envvar (presence) support was added to add current
   process ID to tags with debug-level identifiers. This may be useful
   when many NUT daemons write to the same console or log file. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2118" target="_top">#2118</a>]
</li><li class="listitem">
huawei-ups2000 is now known to support more devices, noted in docs and
   for auto-detection [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1448" target="_top">#1448</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1684" target="_top">#1684</a>]
</li><li class="listitem"><p class="simpara">
nutdrv_qx updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
a <code class="literal">battery_voltage_reports_one_pack</code> driver option was added for devices
     which "natively" report a <code class="literal">battery.voltage</code> for a single battery pack or
     cell, not for the whole assembly [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1279" target="_top">#1279</a>]
</li><li class="listitem">
the <code class="literal">voltronic_qs_protocol</code> should now accept both "V" (as before)
     and newly "H" dialects, which otherwise seem interchangeable [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1623" target="_top">#1623</a>]
</li><li class="listitem">
the <code class="literal">armac</code> subdriver was enhanced to support devices with a different
     response pattern than previously expected per initial contribution.
     It was tested to work with Vultech V2000 and Armac PF1 series. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1978" target="_top">#1978</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
nutdrv_qx and blazer updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
extended default ranges for max battery voltage when guessing [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1279" target="_top">#1279</a>]
</li></ul></div></li><li class="listitem">
sms_ser, a driver for SMS Brazil UPS Protocol 1Phase, was introduced.
   NOTE: it may later become a subdriver under nutdrv_qx. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2090" target="_top">#2090</a>]
</li><li class="listitem"><p class="simpara">
usbhid-ups updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
added support for <code class="literal">subdriver</code> configuration option, to select the
     USB HID subdriver for the device manually where automatic match
     does not suffice (e.g. new devices for which no <code class="literal">vendorid</code>/<code class="literal">productid</code>
     pair was built into any driver, or for different-capability devices
     with same interface chips, notably "phoenixtec/liebert" and "mge") [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1369" target="_top">#1369</a>]
</li><li class="listitem">
cps-hid subdriver now applies same report descriptor fixing logic to
     devices with ProductID 0x0601 as done earlier for 0x0501, to get the
     correct output voltage data [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1497" target="_top">#1497</a>]
</li><li class="listitem">
apc-hid subdriver now also supports ProductID 0x0004 [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1429" target="_top">#1429</a>]
</li><li class="listitem">
ever-hid subdriver reported a <code class="literal">powerfactor</code> without a namespace (bug
     in 2.8.0 release), fixed to <code class="literal">outlet.powerfactor</code>
</li><li class="listitem">
the <code class="literal">usbhid-ups</code> driver should now reconnect if <code class="literal">libusb</code> returned a
     memory allocation error [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1422" target="_top">#1422</a>] (seen as "Can’t retrieve Report 0a:
     Resource temporarily unavailable"), which can cause practical problems
     in the field — the driver otherwise interpreted the situation as
     <code class="literal">ups.status</code> being <code class="literal">OL OFF</code> and cut the power supply.
</li><li class="listitem">
powercom-hid subdriver: fixed <code class="literal">UPS.Battery.ManufacturerDate</code> to map
     to <code class="literal">battery.mfr.date</code> (not <code class="literal">battery.date</code> which is the maintenance
     replacement date) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1644" target="_top">#1644</a>]
</li><li class="listitem">
added <code class="literal">onlinedischarge_calibration</code> option for UPSes that report
     <code class="literal">OL+DISCHRG</code> when they are in calibration mode [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2104" target="_top">#2104</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
riello_usb updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
added <code class="literal">localcalculation</code> option to compute <code class="literal">battery.runtime</code> and
     <code class="literal">battery.charge</code> if the device provides bogus values [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1692" target="_top">#1692</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1685" target="_top">#1685</a>]
     (similar to <code class="literal">runtimecal</code> in some other drivers, may be refactored
     to that configuration and logic model in later NUT releases)
</li></ul></div></li><li class="listitem">
powercom driver should now try harder to refresh data from device [<a class="ulink" href="https://github.com/networkupstools/nut/issues/356" target="_top">#356</a>]
</li><li class="listitem">
tripplite_usb driver now supports configuration of <code class="literal">upsid</code> to match the
   specific device (not all firmware/hardware models support this) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2075" target="_top">#2075</a>]
</li><li class="listitem"><p class="simpara">
apcupsd-ups:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
improvement for <code class="literal">POLL_INTERVAL_MIN</code> from <a class="ulink" href="https://github.com/networkupstools/nut/pull/797" target="_top">PR #797</a> was buggy [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2007" target="_top">#2007</a>]
</li><li class="listitem">
fix to clean obsoleted readings (if any) AFTER getting new info from an
     <code class="literal">apcupsd</code> daemon, to avoid the gap when NUT driver knows nothing [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2007" target="_top">#2007</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
apc_modbus driver was introduced, to cover the feature gap between existing
   NUT drivers for APC hardware and the actual USB-connected devices (or their
   firmwares) released since roughly 2010, which deprecated standard USB HID
   support in favor of Modbus-based protocol which is used across the board
   (also with their network management cards). The new driver can monitor APC
   UPS devices over TCP and Serial connections, as well as USB with a patched
   libmodbus (check <a class="ulink" href="https://github.com/EchterAgo/libmodbus/commits/rtu_usb" target="_top">https://github.com/EchterAgo/libmodbus/commits/rtu_usb</a>
   for now, PR pending). [<a class="ulink" href="https://github.com/networkupstools/nut/issues/139" target="_top">#139</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/2063" target="_top">#2063</a>]
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
For a decade until this driver got introduced, people were advised to
     use apcupsd project as the actual program which talks to a device, and
     NUT apcupsd-ups driver to relay information back and forth. This was a
     limited solution due to lack of command and variable setting support,
     as well as relaying of just some readings (just whatever apcupsd exposes,
     further constrained by what our driver knows to re-translate), with
     little leverage for NUT to tap into everything the device has to offer.
     There were also issues on some systems due to packaging (e.g. marking
     NUT and apcupsd as competing implementations of the same features) which
     required clumsy workarounds to get both installed and running. Finally,
     there is a small matter of long-term viability of that approach: last
     commits to apcupsd sources were in 2017 (with last release 3.14.14 in
     May 2016): <a class="ulink" href="https://sourceforge.net/p/apcupsd/svn/HEAD/tree/" target="_top">https://sourceforge.net/p/apcupsd/svn/HEAD/tree/</a>
</li></ul></div></li><li class="listitem"><p class="simpara">
dummy-ups:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Added an <code class="literal">repeater_disable_strict_start</code> option to disable the driver
      exiting upon encountering any kind of error at startup (as repeater).
      This option should allow for collective <code class="literal">upsdrvctl</code> startup despite
      individual target UPS to be repeated or <code class="literal">upsd</code> not having come up yet.
      [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2132" target="_top">#2132</a>]
</li><li class="listitem">
Revised detection of file path (for "dummy" mode) which misfired under
      some conditions, and unified several implementations. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2118" target="_top">#2118</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
NUT for Windows:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Ability to build NUT for Windows, last tackled with a branch based on
     NUT v2.6.5 a decade ago, has been revived with the 2.8.x era codebase [<a class="ulink" href="https://github.com/networkupstools/nut/issues/5" target="_top">#5</a>].
     It is known that at this time some features are not complete, for more
     details see <a class="ulink" href="https://github.com/orgs/networkupstools/projects/2/views/1" target="_top">https://github.com/orgs/networkupstools/projects/2/views/1</a>
</li><li class="listitem">
Cross-builds of NUT for Windows using Linux and MinGW (and many custom
     built dependency packages, as documented in the
     <a class="ulink" href="scripts/Windows/README.adoc" target="_top">scripts/Windows/README.adoc file</a>)
     are now regularly tested on NUT CI farm with moderate integration via
     custom build script <code class="literal">scripts/Windows/build-mingw-nut.sh</code> [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1489" target="_top">#1489</a>]
</li><li class="listitem">
Semi-native NUT for Windows builds with MSYS2/MinGW x64 environment are
     now regularly tested on AppVeyor, with the same <code class="literal">ci_build.sh</code> script and
     <code class="literal">Makefile</code> checks as used across the board for local developer builds,
     Linux/illumos/FreeBSD/OpenBSD/… on dedicated NUT CI farm on Fosshost,
     and MacOS on CircleCI [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1552" target="_top">#1552</a>]
</li></ul></div></li><li class="listitem"><p class="simpara">
snmp-ups updates:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Fixed detection for device agents which wrongly return the sysOID value
     as a string instead of an OID [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1710" target="_top">#1710</a>]
</li><li class="listitem">
Clearer messages about skipping MIBs during driver initialization [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2037" target="_top">#2037</a>]
</li><li class="listitem">
IETF MIB mapping updated for data points where negative readings
     are invalid [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1558" target="_top">#1558</a>]
</li><li class="listitem">
Added SNMP subdriver "apc-epdu-mib" for APC easy PDU support [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1674" target="_top">#1674</a>]
</li><li class="listitem">
Added SNMP subdriver "eaton-pdu-nlogic-mib" for nLogic (rebranded Eaton)
     support [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1698" target="_top">#1698</a>]
</li><li class="listitem">
Added SNMP subdriver "hpe-pdu3-cis-mib" for HPE G2 Metered &amp; Switched PDU
     initial "unitary" support (no daisychain support yet); also note that due
     to SNMP v1 implementation limitations on this device, you should prefer
     SNMP v3 to get both read and write rights [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1713" target="_top">#1713</a>]
</li><li class="listitem">
Fixed processing loop for large SNMPv2/SNMPv3 responses where one item
     in the middle has a type error [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1682" target="_top">#1682</a>]
</li><li class="listitem">
Better manage the slight nuances (especially in <code class="literal">ups.status</code>) between
     Eaton UPSs, and rename mibs from <code class="literal">pw</code> to <code class="literal">eaton_pw_nm2</code>, and from
     <code class="literal">pxgx_ups</code> to <code class="literal">eaton_pxg_ups</code> [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1715" target="_top">#1715</a>]
</li><li class="listitem">
Fixed the long standing "Warning: excessive poll failures" issue, that
     was tied to non-existent OIDs, not well handled in some parts of the
     driver [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1716" target="_top">#1716</a>]
</li><li class="listitem">
<code class="literal">baytech-mib.c</code> subdriver: fixed <code class="literal">baytech_outlet_status_info[]</code> set
     of valid outlet status values [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1871" target="_top">#1871</a>]
</li><li class="listitem">
<code class="literal">cyberpower-mib.c</code> subdriver: support devices which report the shorter
     Vendor OID as their sysOID, e.g. "CyberPower PowerPanel Personal" [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1997" target="_top">#1997</a>]
     and support more data points including hardware status alarms [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1982" target="_top">#1982</a>]
</li></ul></div></li><li class="listitem">
The <code class="literal">bestfortress</code> driver shutdown handling was fixed to use a non-trivial
   default timeout [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1820" target="_top">#1820</a>]
</li><li class="listitem">
The <code class="literal">optiups</code> driver only gave accurate voltage information with 120VAC
   models and assumed a 12V battery when calculating capacity. There is
   a protocol command that gives a (fixed) voltage which correlates with
   the voltage selection DIP switches on the back of the UPS, taking into
   account whether it is a 120 or 240VAC model. Likewise, now the battery
   capacity fix is applied globally, based on whether or not the battery
   voltage is greater than 20V. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2089" target="_top">#2089</a>]
</li><li class="listitem"><p class="simpara">
GPIO drivers [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1855" target="_top">#1855</a>]:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Added a new category of drivers, using GPIO interface to locally connected
     devices (currently limited to 2018+ Linux libgpiod, but its architecture
     was designed to support more OSes with their equivalents - PRs welcome)
</li><li class="listitem">
<code class="literal">generic_gpio_libgpiod</code> driver using <code class="literal">libgpiod</code> backend was added
     (defaults to be required on Linux, optional on other platforms)
</li></ul></div></li><li class="listitem">
Added support for <code class="literal">make install</code> of PyNUT module and NUT-Monitor desktop
   application [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1462" target="_top">#1462</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1504" target="_top">#1504</a>]
</li><li class="listitem">
Regular CI coverage for NUT codebase enhanced with CircleCI running some
   scenarios on MacOS, might add Windows in the future. Fixed some build
   issues for MacOS that had crept into NUT v2.8.0 release [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1415" target="_top">#1415</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1421" target="_top">#1421</a>]
</li><li class="listitem">
NUT software-only drivers (dummy-ups, clone, clone-outlet) separated from
   serial drivers in respective Makefile and configure script options [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1446" target="_top">#1446</a>]
</li><li class="listitem">
Fixed support for common USB matching options ("vendor", "device", "bus",
   etc.) for <code class="literal">riello_usb</code> and <code class="literal">richcomm_usb</code> [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1763" target="_top">#1763</a>] and updated man pages
   of all USB drivers using these options to include the same description
   [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1766" target="_top">#1766</a>]
</li><li class="listitem">
Added a "busport" USB matching option (if supported by the hardware, OS and
   libusb on the particular deployment, it should allow to specify physical
   port numbers on an USB hub, rather than logical "device" enumeration values,
   and in turn — this should be less volatile across reboots etc.) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2043" target="_top">#2043</a>]
</li><li class="listitem">
Added an <code class="literal">allow_duplicates</code> flag for common USB matching options which
   may help monitor several related no-name devices (although without knowing
   reliably which one is which… better than nothing) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1756" target="_top">#1756</a>]
</li><li class="listitem">
The <code class="literal">nut-scanner</code> program should now suggest same configuration fields as
   those used by common USB matching options in (most of the) drivers, e.g.
   adding "device" to the generated configuration section [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1790" target="_top">#1790</a>]
</li><li class="listitem">
Stuck drivers that do not react to <code class="literal">SIGTERM</code> quickly are now retried with
   <code class="literal">SIGKILL</code> [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1424" target="_top">#1424</a>]
</li><li class="listitem">
Each driver should now report its <code class="literal">driver.state</code> to help readers determine
   whether it is initializing, reconnecting, or running regular loops [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1767" target="_top">#1767</a>]
</li><li class="listitem">
Code which resolves full paths to libraries should now consider the common
   environment variable <code class="literal">LD_LIBRARY_PATH</code> as a preferred possible override
   to built-in paths (note that most operating systems advise against setting
   this variable unless troubleshooting, although other systems rely on it)
   [<a class="ulink" href="https://github.com/networkupstools/nut/issues/805" target="_top">#805</a>]
</li><li class="listitem">
Debug information tracing methods like <code class="literal">upsdebugx()</code> should now be less
   limited in the sizes of messages that they can print, such as path names
   that may be quite long. Note that the OS methods manipulating the strings,
   and receivers such as logging systems, may still impose limits of their own.
</li><li class="listitem">
The <code class="literal">nut-scanner</code> usage and debug printouts now include the loadable library
   search paths, to help troubleshooting especially in multi-platform builds;
   pre-filtering of the built-in paths was introduced (to walk only existing
   and unique directory names) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/317" target="_top">#317</a>]
</li><li class="listitem">
The nut-scanner program was updated to fall back to loading unresolved
   library filenames, hoping that <code class="literal">lt_dlopen()</code> implementation on the current
   platform would find library files better [<a class="ulink" href="https://github.com/networkupstools/nut/issues/805" target="_top">#805</a>]
</li><li class="listitem">
Detection of <code class="literal">libltdl</code> in <code class="literal">configure</code> script updated with fallback code to
   find it on systems that deliver the library to <code class="literal">/usr/local/lib</code> (e.g. on
   FreeBSD) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1577" target="_top">#1577</a>]
</li><li class="listitem">
An explicit <code class="literal">configure --with-nut-scanner</code> toggle was added, specifically
   so that build environments requesting <code class="literal">--with-all</code> but lack <code class="literal">libltdl</code> would
   abort and require either to install the dependency or explicitly forfeit
   the tool (some distro packages missed it quietly in the past) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1560" target="_top">#1560</a>]
</li><li class="listitem">
The <code class="literal">nut-scanner</code> program should now by default warn about serial numbers
   which do not make much sense (are duplicate, empty, all same character, etc)
   [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1810" target="_top">#1810</a>]
</li><li class="listitem">
Existing openssl-1.1.0 support added for NUT v2.8.0 release was tested to
   be sufficient without deprecation warnings for builds against openssl-3.0.x
   (but no real-time testing was done yet) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1547" target="_top">#1547</a>]
</li><li class="listitem">
upslog: Added support for logging multiple devices with one call to the
   program [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1604" target="_top">#1604</a>]
</li><li class="listitem">
Documentation to integrate NUT USB driver startup with <code class="literal">usb_resetter</code> script
   has been contributed to <code class="literal">scripts/usb_resetter</code> (the script itself is tracked
   externally on GitHub), along with a configuration example for Linux+systemd
   [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1887" target="_top">#1887</a>]
</li><li class="listitem">
Some fixes applied to Solaris/illumos packaging and SMF service support
   [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1554" target="_top">#1554</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1564" target="_top">#1564</a>]
</li><li class="listitem"><p class="simpara">
Some fixes for builds on older OSes with less functional default system
   shell interpreters - now <code class="literal">autogen.sh</code> supports a <code class="literal">CONFIG_SHELL</code> envvar
   to inject its value into generated <code class="literal">configure</code> script [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1736" target="_top">#1736</a>]
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Note that you may have to install additional tools (possibly from
     third-party FOSS packaging efforts) to prepare and build the NUT
     codebase, and/or prefer non-default system provided implementations
     (e.g. to use the XPG4 <code class="literal">grep</code> with <code class="literal">-E</code> support on Solaris as detailed
     in <a class="ulink" href="https://github.com/networkupstools/nut/issues/1736" target="_top">https://github.com/networkupstools/nut/issues/1736</a> comments)
</li><li class="listitem">
Build environment configuration notes in <a class="ulink" href="docs/config-prereqs.txt" target="_top">docs/config-prereqs.txt</a>
     file refreshed to cover building of current NUT codebase in CentOS 6
     [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1804" target="_top">#1804</a>] and Solaris 8 [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1736" target="_top">#1736</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1738" target="_top">#1738</a>]
</li></ul></div></li><li class="listitem">
<code class="literal">configure</code> script, reference init-script and packaging templates updated
   to eradicate <code class="literal">@PIDPATH@/nut</code> ambiguity in favor of <code class="literal">@ALTPIDPATH@</code> for the
   unprivileged processes vs. <code class="literal">@PIDPATH@</code> for those running as root [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1719" target="_top">#1719</a>]
</li><li class="listitem">
<code class="literal">configure</code> script enhanced: <code class="literal">--with-unmapped-data-points</code> option allows
   to build SNMP and USB-HID subdrivers with entries discovered by the scripts
   which generated them from data walks, but developers did not rename yet
   to NUT mappings conforming to <a class="ulink" href="docs/nut-names.txt" target="_top">docs/nut-names.txt</a> standards [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1699" target="_top">#1699</a>]
</li><li class="listitem"><p class="simpara">
PyNUT.py version bumped to 1.5.0 with some improvements:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
<code class="literal">ListClients()</code> method fixed (was broken in many ways), and is now
     CI-tested [<a class="ulink" href="https://github.com/networkupstools/nut/issues/549" target="_top">#549</a>]
</li><li class="listitem">
<code class="literal">DeviceLogin()</code> method added (mostly as aid to CI-test <code class="literal">ListClients()</code>
     in a practically relevant manner, so far)
</li></ul></div></li><li class="listitem"><p class="simpara">
nutclient C++ library:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
added <code class="literal">listDeviceClients()</code> and <code class="literal">deviceGetClients(dev)</code> to <code class="literal">Client</code>
     classes, and <code class="literal">Device::getClients()</code> to match PyNUT capabilities [<a class="ulink" href="https://github.com/networkupstools/nut/issues/549" target="_top">#549</a>]
</li><li class="listitem">
published artifacts may include a <code class="literal">libnutclientstub</code> which is an
     implementation of a NUT TCP client in C++ with in-memory data store.
</li></ul></div></li><li class="listitem"><p class="simpara">
upsclient C library:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
added support for <code class="literal">NUT_QUIET_INIT_SSL</code> environment variable to hide
     the infamous "Init SSL without certificate database" warning [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1662" target="_top">#1662</a>]
</li></ul></div></li><li class="listitem">
The <code class="literal">upsd.conf</code> listing of <code class="literal">LISTEN</code> addresses was previously inverted
   (the last listed address was applied first), which was counter-intuitive
   and fixed for this release [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2012" target="_top">#2012</a>]
</li><li class="listitem">
The <code class="literal">upsd</code> configured to listen on IPv6 addresses should handle only
   IPv6 (and not IPv4-mappings) to avoid surprises and insecurity; it
   will now warn if a host name resolves to several addresses (and will only
   listen on the first hit, as before in such cases) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2012" target="_top">#2012</a>]
</li><li class="listitem">
A definitive behavior for <code class="literal">LISTEN *</code> directives became specified, to try
   handling both IPv4 and IPv6 "any" address (subject to <code class="literal">upsd</code> CLI options
   to only choose one, and to OS abilities). When both address families are
   enabled, the <code class="literal">upsd</code> data server will first try to open an IPv6 socket
   asking for disabled IPv4-mapped IPv6 address support (if the OS honors
   that), and then an IPv4 socket (which may fail if the IPv6 socket already
   covers it anyway); in other words, you can end up with one or two separate
   listening sockets. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2012" target="_top">#2012</a>]
</li><li class="listitem">
sstate (server state, e.g. upsd) should now "PING" drivers also if they
   last reported themselves as "stale" (and might later crash) so their
   connections would be terminated if really no longer active [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1626" target="_top">#1626</a>]
</li><li class="listitem">
Clarified documentation in codebase according to end-user feedback [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1721" target="_top">#1721</a>,
   <a class="ulink" href="https://github.com/networkupstools/nut/issues/1750" target="_top">#1750</a> and others over time]
</li><li class="listitem"><p class="simpara">
upsmon client changes include:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Several fixes for <code class="literal">upsmon</code> behavior [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1761" target="_top">#1761</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1680" target="_top">#1680</a>…], including new
     ability to configure default POWERDOWNFLAG location — packagers are
     encouraged to pick optimal location for their distributions (which
     remains mounted at least read-only late in shutdown) and a new optional
     POLLFAIL_LOG_THROTTLE_MAX setting [<a class="ulink" href="https://github.com/networkupstools/nut/issues/529" target="_top">#529</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/506" target="_top">#506</a>]
</li><li class="listitem">
Also <code class="literal">upsmon</code> should now recognize <code class="literal">OFF</code> and <code class="literal">BYPASS</code> flags in <code class="literal">ups.status</code>
     and report that these states begin or end. The <code class="literal">OFF</code> state usually means
     than an administrative action happened to power off the load, but the UPS
     device is still alive and communicating (USB, SNMP, etc.); corresponding
     <code class="literal">MONITOR</code>'ed amount of power sources are considered not being "fed" for
     the power value calculation purposes. The <code class="literal">BYPASS</code> state is now treated
     similarly to <code class="literal">ONBATT</code>: currently this UPS "feeds" its load, but if later
     communications fail, it is considered dead. This may have unintended
     consequences for devices (or NUT drivers) that do not report these modes
     correctly (e.g. an APC calibration routine seems to start with a few
     seconds of "OFF" state), so the reported status is only considered as a
     loss of feed if it persists for more than <code class="literal">OFFDURATION</code> seconds. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2044" target="_top">#2044</a>,
     <a class="ulink" href="https://github.com/networkupstools/nut/issues/2104" target="_top">#2104</a>]
</li><li class="listitem">
Introduced <code class="literal">SHUTDOWNEXIT no</code> configuration toggle for systems which
     require a long time to stop their workload such as virtual machines.
     Since the disconnection of a "secondary" client is treated by the
     "primary" system as permission to proceed with its own shutdown and
     power-off for the UPS, the original (now merely default) behavior to
     call <code class="literal">SHUTDOWNCMD</code> and immediately exit could be counter-productive.
     An optional delay can also be introduced. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2133" target="_top">#2133</a>]
</li><li class="listitem">
Note there were other changes detailed below which impacted several NUT
     programs, including <code class="literal">upsmon</code>.
</li></ul></div></li><li class="listitem"><p class="simpara">
Extended Linux systemd support with optional notifications about daemon
   state (READY, RELOADING, STOPPING) and watchdog keep-alive messages [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1590" target="_top">#1590</a>]
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Normally <span class="strong"><strong>inability</strong></span> to send such notifications (e.g. lack of systemd
     or similar framework on the particular platform) would be reported once
     per daemon uptime on its console log, to help troubleshooting situations
     where such lack of notifications can cause automated service restarts.
     These messages can be hidden by setting <code class="literal">NUT_QUIET_INIT_UPSNOTIFY=true</code>
     environment variable in init-scripts on platforms where such frameworks
     are not expected. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/2136" target="_top">#2136</a>]
</li></ul></div></li><li class="listitem">
Extended Linux systemd units with aliases named after the daemons:
   <code class="literal">nut-server.service</code> as <code class="literal">upsd.service</code>, and <code class="literal">nut-monitor.service</code> as
   <code class="literal">upsmon.service</code> (so simple <code class="literal">systemctl reload upsd</code> can work) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1777" target="_top">#1777</a>]
</li><li class="listitem">
Extended driver-server socket protocol with <code class="literal">BROADCAST (num)</code> keyword,
   and a <code class="literal">NOBROADCAST</code> as a shortcut for <code class="literal">BROADCAST 0</code>. This allows clients
   to toggle whether they want to receive <code class="literal">send_to_all()</code> updates from a
   driver, or only answers to requests they send [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1914" target="_top">#1914</a>]
</li><li class="listitem">
Added support for <code class="literal">make sockdebug</code> for easier developer access to the tool;
   also if <code class="literal">configure --with-dev</code> is in effect, it would now be installed to
   the configured <code class="literal">libexec</code> location. A man page was also added. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1936" target="_top">#1936</a>]
</li><li class="listitem"><p class="simpara">
Numerous daemons (<code class="literal">upsd</code>, <code class="literal">upsmon</code>, drivers, <code class="literal">upsdrvctl</code>, <code class="literal">upssched</code>)
   which accepted <code class="literal">-D</code> option for debug setting previously, now can also
   honour a <code class="literal">NUT_DEBUG_LEVEL=NUM</code> environment variable if no <code class="literal">-D</code> arguments
   were provided. Unlike those arguments, the environment variable does
   not enforce that daemons run in foreground mode by default [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1915" target="_top">#1915</a>]
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Note that unlike some other NUT daemons, <code class="literal">upssched</code> with enabled
     debug does not stop reporting on <code class="literal">stderr</code>! [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1965" target="_top">#1965</a>]
</li></ul></div></li><li class="listitem">
A bug in <code class="literal">upssched</code> was discovered and fixed, where it ran a tight loop
   stressing the CPU; it was presumably introduced between NUT v2.7.4 and
   v2.8.0 releases [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1964" target="_top">#1964</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1965" target="_top">#1965</a>]
</li><li class="listitem">
Implemented generic support for INSTCMD and SETVAR use-cases shared by
   all drivers, and in particular to see and change active debug verbosity
   using the driver-server and server-client protocol (at higher priority
   than CLI or config file choices) per [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1285" target="_top">#1285</a>], e.g.
</li></ul></div><pre class="screen"># Set verbosity level 6:
:; upsrw -s driver.debug=6 UPS

# Set verbosity level 0 to disable the noise (even if debug_min is set):
:; upsrw -s driver.debug=0 UPS1@localhost

# Un-set the protocol override, honour CLI or config-file settings again:
:; upsrw -s driver.debug=-1 remoteUPS@1.2.3.4</pre><p>+
and a <code class="literal">driver.killpower</code> instant command (for safety, must be unlocked by
   <code class="literal">driver.flag.allow_killpower</code> protocol setting or <code class="literal">allow_killpower</code>
   configuration flag), which is now the first choice for <code class="literal">driver -k</code>
   operations [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1917" target="_top">#1917</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1923" target="_top">#1923</a>]</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Implemented basic support for <code class="literal">ups.conf</code> reloading in NUT drivers,
   with a <code class="literal">driver.reload-with-error</code> instant command (more commands and
   signal handling may be available depending on platform), with a goal
   of changing inconsequential settings like <code class="literal">debug_min</code> for a running
   driver. This can also benefit the drivers on systems managed by real-time
   <code class="literal">nut-driver-enumerator</code> and for simpler changes the drivers get only
   reloaded and not redefined and restarted. Reload signals should also
   be reasonably supported with <code class="literal">upsdrvctl</code> tool. Relevant CLI options
   for <code class="literal">-c CMD</code> handing were added to drivers and <code class="literal">upsdrvctl</code>, although
   their availability may vary between operating systems [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1903" target="_top">#1903</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1914" target="_top">#1914</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1924" target="_top">#1924</a>]
</li><li class="listitem">
Drivers should now accept <code class="literal">SIGURG</code> (or <code class="literal">SIGWINCH</code> on systems that lack
   the former) on POSIX platforms to dump their current state information
   and move on. Such report goes to <code class="literal">stdout</code> of the driver process (may
   be disconnected when background mode is used) — this can help with
   troubleshooting [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1907" target="_top">#1907</a>]
</li><li class="listitem">
Recipes and <code class="literal">main.c</code> code were enhanced to produce a <code class="literal">libdummy_mockdrv.la</code>
   helper library during build (not intended to be installed nor distributed),
   in order to facilitate creation of test programs which behave like a driver
   [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1855" target="_top">#1855</a>]
</li><li class="listitem">
Further revision of public headers delivered by NUT was done, particularly
   to address lack of common data types (<code class="literal">size_t</code>, <code class="literal">ssize_t</code>, <code class="literal">uint16_t</code>,
   <code class="literal">time_t</code> etc.) in third-party client code that earlier sufficed to only
   include NUT headers. Sort of regression by NUT 2.8.0 (note those consumers
   still have to re-declare some numeric variable types used) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1638" target="_top">#1638</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1615" target="_top">#1615</a>]
</li><li class="listitem">
The <code class="literal">COPYING</code> file was updated with licenses and attribution for certain
   source code files and blocks coming from the Internet originally [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1758" target="_top">#1758</a>]
</li><li class="listitem">
The <code class="literal">tools/gitlog2changelog.py.in</code> script was revised, in particular to
   generate the <code class="literal">ChangeLog</code> file more consistently with different versions
   of Python interpreter, and without breaking the long file paths in the
   resulting mark-up text [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1945" target="_top">#1945</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1955" target="_top">#1955</a>]
</li><li class="listitem">
The "NUT client for VMware ESXi" project (by René Garcia) got its build
   recipes published on GitHub at <a class="ulink" href="https://github.com/rgc2000/NutClient-ESXi" target="_top">https://github.com/rgc2000/NutClient-ESXi</a>
   [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1961" target="_top">#1961</a>]
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_8_0_what_8217_s_new_since_2_7_4"></a>2.5. Release notes for NUT 2.8.0 - what’s new since 2.7.4</h3></div></div></div><div class="note" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Note</h3><p>Earlier discussions (mailing list threads, GitHub issues, etc.) could
refer to this change set (too long in the making) as NUT 2.7.5.</p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
New (optional) keywords for configuration files were added,
   so existing NUT 2.7.x builds would not accept them if some
   deployments switch versions back and forth — due to this,
   semantically the version was bumped to NUT 2.8.x.
</li><li class="listitem">
Add support for openssl-1.1.0 (Arjen de Korte)
</li><li class="listitem">
libusb-1.0 API support in addition to libusb-0.1 API [<a class="ulink" href="https://github.com/networkupstools/nut/issues/300" target="_top">#300</a>]
</li><li class="listitem">
Add support for <code class="literal">DISABLE_WEAK_SSL=true</code> in upsd.conf to disable older/weaker
   SSL/TLS protocols and ciphers: when NUT is built against relatively recent
   versions of OpenSSL or NSS it will be restricted to TLSv1.2 or better.
   For least-surprise, currently defaults to <code class="literal">false</code> and complains in log
   [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1043" target="_top">PR #1043</a>]
</li><li class="listitem">
Add support for <code class="literal">ALLOW_NO_DEVICE=true</code> (as an upsd.conf flag or environment
   variable passed from caller of the program), to allow starting the data
   server initially without any device configurations and reloading it later
   to apply config changes on the fly [<a class="ulink" href="https://github.com/networkupstools/nut/pull/766" target="_top">PR #766</a>]
</li><li class="listitem">
Add support for <code class="literal">debug_min=NUM</code> setting (ups.conf, upsd.conf, upsmon.conf)
   to specify the minimum debug verbosity for daemons. This allows "in-vivo"
   troubleshooting of service daemons without editing init scripts or service
   unit definitions.
</li><li class="listitem">
Improve support for upsdrvctl for managing of numerous device configs,
   including default "maxretry=3" and a "nowait" option to complete the
   "start of everything" mode after triggering the drivers and not waiting
   for them to complete initializing. This matters on systems that monitor
   from dozens to hundreds of devices.
</li><li class="listitem">
Drivers support a new value for <code class="literal">synchronous</code> setting, which is the
   new default now: <code class="literal">auto</code>.  Initially after driver start-up this mode
   acts as the older default <code class="literal">off</code>, but would fall back to <code class="literal">on</code> in case
   the driver fails to send reports to <code class="literal">upsd</code> by overflowing the socket
   buffer in async mode — so the next connections of this driver uptime
   would be synchronized (potentially slower, but safer — blocking on
   writes to the data server).  This adaptation would primarily impact
   and benefit devices with many (hundreds of) data points, such as
   ePDUs and daisy chains. [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1309" target="_top">issue #1309</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/1315" target="_top">PR #1315</a>]
</li><li class="listitem">
Daemons such as upsd, upsmon, upslog, and device drivers previously
   implied that enabled debugging (or upslog to stdout) means foreground
   running, otherwise the daemon was always sent to the background.
   Now there are explicit options for this (<code class="literal">-F</code>/<code class="literal">-B</code>), although default
   behavior is retained. This change is used for simplified service unit
   definitions.
</li><li class="listitem"><p class="simpara">
Improvements for device discovery or driver "lock-picking", including
   general support for:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
"Standalone" mode (<code class="literal">-s</code> option), to monitor a device which is not
     detailed or mentioned in ups.conf
</li><li class="listitem">
<code class="literal">NUT_ALTPIDPATH</code> and <code class="literal">NUT_STATEPATH</code> environment variables to override
     the paths built into the driver binary [<a class="ulink" href="https://github.com/networkupstools/nut/pull/473" target="_top">PR #473</a> and <a class="ulink" href="https://github.com/networkupstools/nut/issues/507" target="_top">#507</a>]
</li><li class="listitem">
"Driver data dump" mode (<code class="literal">-d</code> option), to poll a device for one or
     few (<span class="emphasis"><em>update_count</em></span> ) loops, report discovered values (dump the data
     tree in upsc-like format), and exit. This complements the <code class="literal">nut-scanner</code>
     for finding and identifying devices.
</li></ul></div></li><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
IBM 6000 VA LCD 4U Rack UPS; 5396-1Kx (USB)
</li><li class="listitem">
Phoenix Contact QUINT-UPS model 2320461 (Modbus)
</li><li class="listitem">
Tripp-Lite SU3000LCD2UHV (USB; protocol 1330)
</li><li class="listitem">
Emerson Avocent PM3000 PDU (SNMP)
</li><li class="listitem">
HPE ePDU (SNMP)
</li></ul></div></li><li class="listitem">
nutdrv_qx: enhanced estimation of remaining battery runtime based
   on speed of voltage drop, which varies as they age [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1027" target="_top">PR #1027</a>]
</li><li class="listitem"><p class="simpara">
nutdrv_qx: several subdrivers added or improved, including:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
"snr" subdriver with USB connection, for SNR-UPS-LID-XXXX [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1008" target="_top">PR #1008</a>].
     Note that end-users should reference explicitly the <code class="literal">snr</code> subdriver
     in their <code class="literal">ups.conf</code> settings because of USB chip using the same
     values of VendorID/ProductID as fabula_subdriver, fuji_subdriver,
     and krauler_subdriver.
</li><li class="listitem">
"hunnox" subdriver, as a dialect of earlier "fabula" [<a class="ulink" href="https://github.com/networkupstools/nut/pull/638" target="_top">PR #638</a>]
     adds support for Hunnox HNX-850 with USB connection and reported to work
     for Powercool, Iron Guardian, ARES devices and possibly many others from
     discussions linking to the pull request which introduced the driver.
</li><li class="listitem">
"phoenixtec" subdriver for Masterguard A and E series, device series
     A700/1000/2000/3000(-19) and E40/60/100(-19). [<a class="ulink" href="https://github.com/networkupstools/nut/pull/975" target="_top">PR #975</a>]
</li><li class="listitem">
"ablerex" subdriver provided by the OEM vendor, note that it replaces
     "krauler_subdriver" as default handler for VID:PID 0xffff:0x0000
     [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1135" target="_top">PR #1135</a>]
</li><li class="listitem">
Legrand HID defined and handled by "krauler_subdriver" by default
     [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1075" target="_top">PR #1075</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/616" target="_top">issue #616</a>]
</li><li class="listitem">
add new "armac" subdriver, tested with Armac R/2000I/PSW, but should
     support other UPSes that work with "PowerManagerII" software from
     Richcomm Technologies from around 2004-2005 [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1239" target="_top">PR #1239</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1238" target="_top">issue #1238</a>]
</li></ul></div></li><li class="listitem">
microsol-apc (starting at version 0.68 as derived from solis 0.67):
   adding support for newer APC Back-UPS BR hardware, such as
   APC Back-UPS BZ1500, BZ2200BI and BZ2200I [<a class="ulink" href="https://github.com/networkupstools/nut/pull/994" target="_top">PR #994</a>]
</li><li class="listitem">
pijuice: added new i2c bus driver for PiJuice HAT, a battery UPS module
   for the Raspberry Pi systems [<a class="ulink" href="https://github.com/networkupstools/nut/pull/730" target="_top">PR #730</a>]
</li><li class="listitem">
huawei-ups2000: added new driver for USB (Linux 5.12+ so far) and Serial
   RS-232 Modbus device support of Huawei UPS2000/2000A (1kVA-3kVA) series,
   and possibly some related FSP UPS models. [<a class="ulink" href="https://github.com/networkupstools/nut/pull/954" target="_top">PR #954</a>]
</li><li class="listitem">
socomec_jbus: added new driver for modbus-based JBUS protocol over serial
   RS-232 for Socomec UPS (tested with a DIGYS 3/3 15kVA model, working
   on Linux x86-64 and Raspberry Pi 3 ARM). [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1313" target="_top">PR #1313</a>]
</li><li class="listitem">
adelsystem_cbi: added new driver for ADELSYSTEM CBI2801224A, an all-in-one
   12/24Vdc DC-UPS, which supports the modbus RTU communication protocol
   [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1282" target="_top">PR #1282</a>]
</li><li class="listitem">
generic_modbus: added new driver for TCP and Serial Modbus device support.
   The driver has been tested against PULS UPS (model UB40.241) via
   MOXA ioLogikR1212 (RS485) and ioLogikE1212 (TCP/IP), and configuration
   allows to map custom registers and addresses to NUT events [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1052" target="_top">PR #1052</a>]
</li><li class="listitem">
genericups: added support for FTTx battery backup devices, and new signal
   type mappings for the contact closure pins interpretation (RB for replace
   battery, BYPASS for disconnected battery, and "none" or NULL for signals
   to ignore) [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1061" target="_top">PR #1061</a>]
</li><li class="listitem"><p class="simpara">
add devices to HCL/DDL:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
APC Back-UPS CS (USB)
</li><li class="listitem">
CPS CP1500EPFCLCD (USB)
</li><li class="listitem">
CPS EC350G, EC750G (USB)
</li><li class="listitem">
CPS PR2200LCDRT2U (SNMP)
</li><li class="listitem">
Eaton ATS 16 and 30 (SNMP)
</li><li class="listitem">
Eaton 5E2200VA (USB)
</li><li class="listitem">
Eaton 9PX Split Phase 6/8/10 kVA (XML/USB/SHUT)
</li><li class="listitem">
Eaton 9PX (XML/USB/SHUT)
</li><li class="listitem">
Eaton Ellipse PRO 650 VA (USB)
</li><li class="listitem">
Ippon Back Comfo Pro II 650/850/1050 (USB)
</li><li class="listitem">
Numeric Digital 800 (USB)
</li><li class="listitem">
Opti-UPS PS1500E (USB)
</li><li class="listitem">
Powercool 350VA to 1600VA (USB)
</li></ul></div></li><li class="listitem">
C++11 support in nutclient library and cppunit tests
</li><li class="listitem">
Added C++ testing mock for TcpClient class (nutclientmem/MemClientStub:
   data stored in local memory) [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1034" target="_top">PR #1034</a>]
</li><li class="listitem">
Dual Python 2 and 3 compatibility in development scripts; ability to
   run build activities and resulting built NUT programs on systems that
   do not have a binary named "python" [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1115" target="_top">PR #1115</a> and some before it]
</li><li class="listitem">
Added Russian translation for NUT-Monitor GUI client [<a class="ulink" href="https://github.com/networkupstools/nut/pull/806" target="_top">PR #806</a>]
</li><li class="listitem">
Separated NUT-Monitor UI into two applications, NUT-Monitor-py2gtk2 and
   NUT-Monitor-py3qt5, suitable for two generations of Python ecosystem
   with their great differences; <code class="literal">NUT-Monitor</code> name is retained for wrapper
   script which calls one of these, such that the current system can execute
   [PRs <a class="ulink" href="https://github.com/networkupstools/nut/issues/1310" target="_top">#1310</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1354" target="_top">#1354</a>]
</li><li class="listitem">
Various USB driver families: expanded device-matching with "device" in
   addition to "bus" and generic USB fields. This is needed to support
   multiple attached devices that seem identical by other fields (e.g.
   same vendor, same model, same USB bus, and no serial number) [<a class="ulink" href="https://github.com/networkupstools/nut/pull/974" target="_top">PR #974</a>]
</li><li class="listitem">
Various USB driver families: Improved HID parsing for byte-stream to
   number conversions on different CPU architectures [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1024" target="_top">PR #1024</a>]
</li><li class="listitem">
Various USB HID driver families: added support for composite devices
   utilizing interface greater than 0 for the UPS interface [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1044" target="_top">PR #1044</a>]
</li><li class="listitem"><p class="simpara">
usbhid-ups:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
added generic framework for fixing Report Descriptors which can be
     used for different manufacturers by adding code to the appropriate
     subdriver rather than polluting the main code with UPS specific
     exceptions, and applied fixes for known mistakes in (some releases
     of firmware for) CyberPower CPS*EPFCLCD [<a class="ulink" href="https://github.com/networkupstools/nut/issues/439" target="_top">issue #439</a>, <a class="ulink" href="https://github.com/networkupstools/nut/pull/1245" target="_top">PR #1245</a>]
</li><li class="listitem">
added <code class="literal">onlinedischarge</code> option for UPSes that report <code class="literal">OL+DISCHRG</code>
     when wall power is lost [<a class="ulink" href="https://github.com/networkupstools/nut/pull/811" target="_top">PR #811</a>]
</li><li class="listitem">
changed detection of VendorID 0x06da handling of which is claimed
     by Liebert/Phoenixtec HID historically, and MGE HID (for AEG PROTECT
     NAS UPSes) since NUT 2.7.4, so that the higher-priority MGE subdriver
     would not grab each and all of the devices exposing that ID [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1357" target="_top">PR #1357</a>]
</li><li class="listitem">
CPS HID: add input.frequency and output.frequency
</li><li class="listitem">
OpenUPS2: only check OEM Information string once (fewer log messages)
</li><li class="listitem">
Liebert GXT4 USB VID:PID [10AF:0000]
</li><li class="listitem">
add battery voltage and input/output transfer voltage and frequency
     in Liebert/Phoenixtec HID mapping, to support PowerWalker VFI 2000 TGS
     better [<a class="ulink" href="https://github.com/networkupstools/nut/pull/564" target="_top">PR #564</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/560" target="_top">issue #560</a>]
</li><li class="listitem">
add a little delay between multicommands [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1228" target="_top">PR #1228</a>]
</li><li class="listitem">
fix Eaton/MGE mapping for beeper handling
</li><li class="listitem">
add IBM USB VID
</li><li class="listitem">
add deep battery test for CyberPower OL3000RMXL2U
</li><li class="listitem">
report the libusb version used
</li><li class="listitem">
fixed CPU architecture dependent bitmask math issues, causing wrong
     numbers interpreted from wire protocol data in Big-Endian LP64 builds
     (SPARC64, s390x, etc.) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1023" target="_top">issue #1023</a>, PRs <a class="ulink" href="https://github.com/networkupstools/nut/issues/1024" target="_top">#1024</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1040" target="_top">#1040</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1055" target="_top">#1055</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1226" target="_top">#1226</a>]
</li><li class="listitem">
add Delta UPS Amplon R Series, tested on R1K and R3K model [<a class="ulink" href="https://github.com/networkupstools/nut/pull/987" target="_top">PR #987</a>]
</li><li class="listitem">
add Delta Minuteman UPS VID/PID [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1230" target="_top">PR #1230</a>, issues <a class="ulink" href="https://github.com/networkupstools/nut/issues/555" target="_top">#555</a> and <a class="ulink" href="https://github.com/networkupstools/nut/issues/1227" target="_top">#1227</a>]
</li><li class="listitem">
add AMETEK Powervar UPM [<a class="ulink" href="https://github.com/networkupstools/nut/pull/733" target="_top">PR #733</a>]
</li><li class="listitem">
add Tripplite AVR750U (ProductID 0x3024) [<a class="ulink" href="https://github.com/networkupstools/nut/pull/963" target="_top">PR #963</a>]
</li><li class="listitem">
add Arduino HID device support with new arduino-hid subdriver [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1044" target="_top">PR #1044</a>]
</li><li class="listitem">
add new salicru-hid subdriver, tested with Salicru SPS Home 850 VA
     [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1199" target="_top">PR #1199</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/732" target="_top">issue #732</a>]
</li><li class="listitem">
add new ever-hid subdriver to support EVER UPS devices (Sinline RT Series,
     Sinline RT XL Series, ECO PRO AVR CDS Series) [<a class="ulink" href="https://github.com/networkupstools/nut/pull/431" target="_top">PR #431</a>]
</li><li class="listitem">
add ability to set <code class="literal">battery.mfr.date</code> for APC HID UPS [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1318" target="_top">PR #1318</a>]
</li></ul></div></li><li class="listitem">
usbhid-ups / mge-shut: compute a realpower output load approximation for
   Eaton UPS when the needed data is not present
</li><li class="listitem"><p class="simpara">
snmp-ups:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
APC ePDU MIB support
</li><li class="listitem">
add <code class="literal">input.phase.shift</code> variable
</li><li class="listitem">
add configurable write-able <code class="literal">ondelay</code> (<code class="literal">ups.delay.start</code>) and <code class="literal">offdelay</code>
     (<code class="literal">ups.delay.shutdown</code>) as timeticks support [<a class="ulink" href="https://github.com/networkupstools/nut/pull/276" target="_top">PR #276</a>]
</li><li class="listitem">
outlet groups
</li><li class="listitem">
fix the rounding / truncation of some values
</li><li class="listitem">
add outlet.N.name for Eaton ePDU
</li><li class="listitem">
add input.bypass.frequency for Eaton 3ph
</li><li class="listitem">
fix support for Eaton 2-phase ("split phase") UPS
</li><li class="listitem">
add flag to list currently loaded MIB-to-NUT mappings
</li><li class="listitem">
fix input.L2.voltage on Eaton G2/G3 PDU
</li><li class="listitem">
update Eaton Aphel Revelation MIB
</li><li class="listitem">
support Raritan Dominion PX2 PDU
</li><li class="listitem">
support Emerson Avocent PM3000 PDU
</li><li class="listitem">
improve ALARM flag handling
</li><li class="listitem">
add firmware version for new HPE Network card
</li><li class="listitem">
add ups.load, battery.charge, input.{voltage,frequency} and output.voltage
     for CyberPower, as well as shutdown and other instant commands
</li><li class="listitem">
several rounds of updates for Eaton devices, including new ATS and ePDU
     hardware families
</li><li class="listitem">
fixed bit mask values for flags to surely use different numbers behind
     logical items (inevitably changing some of those macro symbols) [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1180" target="_top">PR #1180</a>]
</li></ul></div></li><li class="listitem">
snmp-ups and nut-scanner should now support more SNMPv3 Auth and Priv
   protocols, as available at NUT build time [PRs <a class="ulink" href="https://github.com/networkupstools/nut/issues/1165" target="_top">#1165</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1172" target="_top">#1172</a>]
</li><li class="listitem"><p class="simpara">
nut-scanner: various improvements, including:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
detection of libraries at runtime
</li><li class="listitem">
tracing information
</li><li class="listitem">
limiting parallelism (thread count) [PRs <a class="ulink" href="https://github.com/networkupstools/nut/issues/1158" target="_top">#1158</a>, <a class="ulink" href="https://github.com/networkupstools/nut/issues/1164" target="_top">#1164</a>]
</li></ul></div></li><li class="listitem">
nut-ipmipsu: improve FreeIPMI support to build cleanly against older and
   newer FreeIPMI versions [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1179" target="_top">PR #1179</a>]
</li><li class="listitem">
the powerpanel driver now also supports CyberPower OR1500LCDRTXL2U with
   serial cable [<a class="ulink" href="https://github.com/networkupstools/nut/pull/538" target="_top">PR #538</a>]
</li><li class="listitem">
powercom driver: implement <code class="literal">nobt</code> config parameter to skip battery check
   on initialization/startup [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1256" target="_top">PR #1256</a>]
</li><li class="listitem"><p class="simpara">
netxml-ups:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Report calibration status
</li><li class="listitem">
Fix for erroneous battery info (MGEXML/0.30) [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1069" target="_top">PR #1069</a>]
</li></ul></div></li><li class="listitem">
solis: various improvements and fixes
</li><li class="listitem">
liebert-esp2: Correct battery V scaling, update docs, implement split-phase
   unit support [<a class="ulink" href="https://github.com/networkupstools/nut/pull/412" target="_top">PR #412</a>]
</li><li class="listitem">
tripplite: the "Tripp-Lite SmartUPS driver" as tested with SMART2200NET
   learned to discover the firmware generation and some device features,
   and in particular to manage power separately on one or two outlet groups
   [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1048" target="_top">PR #1048</a>]
</li><li class="listitem">
tripplite_usb: updated to recognize the "3005" protocol [<a class="ulink" href="https://github.com/networkupstools/nut/pull/584" target="_top">PR #584</a>]
</li><li class="listitem">
libnutclient: introduce getDevicesVariableValues() to improve performances
   when querying many devices (up to 15 times faster)
</li><li class="listitem">
nut-driver-enumerator: introduced a script for Linux systemd and
   Solaris/illumos SMF to inspect current NUT configuration in ups.conf
   file and generate service management instances for each currently
   tracked power device. Also introduced services to monitor the NUT
   configuration and react to editions of this file, mostly intended
   for deployments that do massive monitoring of dynamically changing
   farms of power devices.
</li><li class="listitem">
Fix File descriptors leaks by upsmon and upssched (SELinux errors)
</li><li class="listitem"><p class="simpara">
systemd support improvements:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
POWEROFF_WAIT
</li><li class="listitem">
reload support for upsd
</li><li class="listitem">
Deliver systemd-tmpfiles config to pre-create runtime locations
     [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1037" target="_top">PR #1037</a> for Issue <a class="ulink" href="https://github.com/networkupstools/nut/issues/1030" target="_top">#1030</a>]
</li><li class="listitem">
Update units with SyslogIdentifier=%N for better logging [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1054" target="_top">PR #1054</a>]
</li></ul></div></li><li class="listitem">
upsrw: display the variable type beside ENUM / RANGE
</li><li class="listitem">
Added <code class="literal">PROTVER</code> as alias to <code class="literal">NETVER</code> to report the protocol version in use.
   Note that NUT codebase itself does not use this value and handles commands
   and reported errors individually [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1347" target="_top">issue #1347</a>]
</li><li class="listitem">
Implement status tracking for instant commands (instcmd) and variables
   settings (setvar): this allows to get the actual execution status from the
   driver, and is available in libraries and upscmd / upsrw [<a class="ulink" href="https://github.com/networkupstools/nut/pull/659" target="_top">PR #659</a>]
</li><li class="listitem">
Add support for extra parameter for instant commands, both in library and
   in upscmd
</li><li class="listitem">
dummy-ups can now specify <code class="literal">mode</code> as a driver argument, and separates the
   notion of <code class="literal">dummy-once</code> (new default for <code class="literal">*.dev</code> files that do not change)
   vs. <code class="literal">dummy-loop</code> (legacy default for <code class="literal">*.seq</code> and others) [<a class="ulink" href="https://github.com/networkupstools/nut/issues/1385" target="_top">issue #1385</a>]
</li><li class="listitem"><p class="simpara">
new protocol variables:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
<code class="literal">input.phase.shift</code>
</li><li class="listitem">
<code class="literal">outlet.N.name</code>
</li><li class="listitem">
<code class="literal">outlet.N.type</code>
</li><li class="listitem">
<code class="literal">battery.voltage.cell.max</code>, <code class="literal">battery.voltage.cell.min</code>
</li><li class="listitem">
<code class="literal">battery.temperature.cell.max</code>, <code class="literal">battery.temperature.cell.min</code>
</li><li class="listitem">
<code class="literal">battery.status</code>
</li><li class="listitem">
<code class="literal">battery.capacity.nominal</code>
</li><li class="listitem">
<code class="literal">battery.date.maintenance</code> (and clarified purpose of <code class="literal">battery.date</code>)
</li><li class="listitem">
<code class="literal">battery.packs.external</code> (and clarified purpose of <code class="literal">battery.packs</code>)
</li><li class="listitem">
<code class="literal">experimental.*</code> namespace introduced [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1046" target="_top">PR #1046</a>] to facilitate
     introduction of NUT drivers and their data points for which we do
     not yet have concepts, or which the original driver contributors
     did not map well per suitable NUT standards: this allows to balance
     having those drivers available in the project vs. least surprise
     for when the explicitly experimental names are changed to something
     stable and standardized.
</li><li class="listitem"><p class="simpara">
Proposed to track Date and Time values (still as "opaque strings")
     preferably in representations compatible to ISO-8601/RFC-3339 [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1076" target="_top">PR #1076</a>]
     (standards update; changes to actual codebase to be applied in the future)
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: square; "><li class="listitem">
New routine to convert a US formatted date string "MM/DD/YYYY" to an
      ISO 8601 Calendar date "YYYY-MM-DD" was added to snmp-ups.c [<a class="ulink" href="https://github.com/networkupstools/nut/pull/1078" target="_top">PR #1078</a>]
</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
Master/Slave terminology was deprecated in favor of Primary/Secondary
   modes of <code class="literal">upsmon</code> client:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Respective keywords in the configuration files (<code class="literal">upsd.users</code> and
     <code class="literal">upsmon.conf</code>) are supported as backwards-compatible settings,
     but the obsoleted values are no longer documented.
</li><li class="listitem">
Protocol keyword support was similarly updated, with <code class="literal">upsmon</code> now
     first trying to elevate privileges with <code class="literal">PRIMARY &lt;ups&gt;</code> request,
     and falling back to <code class="literal">MASTER &lt;ups&gt;</code> just in case it talks to an
     older build of an <code class="literal">upsd</code> server.
</li><li class="listitem">
For the principle of least surprise, NUT codebase still exposes the
     <code class="literal">net_master()</code> (as handler for <code class="literal">MASTER</code> net command) in header and
     C code for the sake of existing linked binaries, and returns the
     <code class="literal">OK MASTER-GRANTED</code> line to the older client that invoked it.
</li><li class="listitem">
Newly introduced <code class="literal">net_primary()</code> (as handler for <code class="literal">PRIMARY</code> net command)
     calls the exact same application logic, but returns <code class="literal">OK PRIMARY-GRANTED</code>
     line to the client.
</li><li class="listitem">
Python binding updated to handle both cases, as the only found in-tree
     protocol consumer of the full-line text.
</li><li class="listitem">
For more details see <a class="ulink" href="https://github.com/networkupstools/nut/issues/840" target="_top">issue #840</a> and several pull requests referenced
     from it, and discussions on NUT mailing lists.
</li></ul></div></li><li class="listitem"><p class="simpara">
Build fixes:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
In general, numerous fixes were applied to ensure portability and avoid
     warnings (fixing a number of real bugs that caused them); CI was extended
     to keep the codebase free of those types of warnings which we have got
     rid of, requiring builds to succeed cleanly in several dozen combinations
     of compiler versions, C standard revisions (C99 upwards, though on many
     OSes with GNU99+ extensions), operating systems and CPU architectures.
</li><li class="listitem">
Public CI introduced to automatically test every contribution (PR) and
     resulting increment of main NUT codebase, including Travis CI and LGTM.com
     services, and a Jenkins farm on virtual hardware donated by Fosshost.org;
     this augments testing earlier provided for some branches by Buildbot.
</li><li class="listitem">
Added cppunit testing with valgrind for the C++ client library
</li><li class="listitem">
Make targets added for shell script syntax checks for helper and service
     scripts
</li><li class="listitem">
Make targets added for spellcheck and for maintenance of the dictionary,
     including incremental spellcheck to only parse recently edited text files
</li><li class="listitem">
The AsciiDoc detection has been reworked to allow NUT to be built from
     source without requiring asciidoc/a2x (using pre-built man pages from
     the distribution tarball, for instance)
</li><li class="listitem">
Makefile contents rearranged for more resilient out-of-tree and in-tree
     builds beside those made from the root workspace directory
</li><li class="listitem">
Makefiles are tested with GNU Make and BSD Make to ensure portable recipes
</li><li class="listitem">
More use of <code class="literal">pkg-config</code> to detect dependencies at configure time, as
     well as fail-safe detection of presence of pkg-config (and its macros)
     to survive and build without it too
</li><li class="listitem">
"slibtool" pedantic nuances now supported, allowing an alternative to
     GNU libtool
</li><li class="listitem">
Build scripts updated to remove obsoleted calls to cleanly work with
     autoconf-2.70 releases in 2020 (also works with 2.69 which was the
     earlier release since 2012)
</li><li class="listitem">
Dynamic library loading used in certain programs and use-cases improved,
     especially for 64-bit vs. 32-bit builds on multiple-bitness OSes
</li><li class="listitem">
Logging routines like <code class="literal">upsdebugx()</code> were refactored as macros so there
     is slightly less overhead when logging is disabled [PRs <a class="ulink" href="https://github.com/networkupstools/nut/issues/685" target="_top">#685</a> and <a class="ulink" href="https://github.com/networkupstools/nut/issues/1100" target="_top">#1100</a>]
</li><li class="listitem">
Numerous classes of compilation warnings eradicated, many of those being
     potential issues with implicit data type conversions and varied numeric
     type width, signedness, string buffer size, uninitialized variables or
     structure fields; some more in progress
</li><li class="listitem">
Several logical errors found and fixed during this walk over codebase.
</li><li class="listitem">
Cases where compilers were overly zealous and particular code was written
     the way wit was intentionally, including some comparisons that help with
     different-bitness builds but indeed seem superfluous in a certain single
     bitness, were commented and encased in pragmas to disable the warnings
</li><li class="listitem">
Basic coding style (indentations, lack of trailing white space) applied
     per developer guide, but not automatically enforced/checked yet.
</li></ul></div></li><li class="listitem">
Due to changes needed to resolve build warnings, mostly about mismatching
   data types for some variables, some structure definitions and API signatures
   of several routines had to be changed for argument types, return types,
   or both. Primarily this change concerns internal implementation details
   (may impact update of NUT forks with custom drivers using those), but a
   few changes also happened in header files installed for builds configured
   <code class="literal">--with-dev</code> and so may impact <code class="literal">upsclient</code> and <code class="literal">nutclient</code> (C++) consumers.
   At the very least, binaries for those consumers should be rebuilt to remain
   stable with NUT 2.8.0 and not mismatch int-type sizes and other arguments.
</li><li class="listitem">
As usual, more bugfixes, cleanup and improvements, on both source code
   and documentation.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_7_4_what_8217_s_new_since_2_7_3"></a>2.6. Release notes for NUT 2.7.4 - what’s new since 2.7.3</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
New class of device supported: ATS - Automatic Transfer Switch are now
   supported in NUT. Eaton ATS are supported, and APC ones should be too. Users
   are welcomed to test and provide feedback
</li><li class="listitem"><p class="simpara">
NUT command and variable naming scheme:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Document battery.charger.status, which will in time replace the historic
     CHRG and DISCHRG flags published in ups.status
</li><li class="listitem">
Many extensions to support outlets groups, thresholds / alarms (ambient,
     input, output, outlet and outlet.group)
</li></ul></div></li><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
AEG PROTECT B / NAS
</li><li class="listitem">
APC ATS AP7724 (should be supported)
</li><li class="listitem">
Asium P700
</li><li class="listitem">
Eaton ATS
</li><li class="listitem">
Eaton 5E 1100iUSB
</li><li class="listitem">
Eaton E Series DX UPS 1-20 kVA
</li><li class="listitem">
Eaton Powerware 9125-5000g
</li><li class="listitem">
Electrys UPS 2500
</li><li class="listitem">
Fideltronic INIGO Viper 1200
</li><li class="listitem">
Legrand Keor Multiplug
</li><li class="listitem">
LYONN CTB-800V
</li><li class="listitem">
Micropower LCD 1000
</li><li class="listitem">
NHS Laser Senoidal 5000VA
</li><li class="listitem">
Sweex model P220
</li><li class="listitem">
TS Shara
</li><li class="listitem">
Various APCUPSD-controlled APC devices
</li></ul></div></li><li class="listitem"><p class="simpara">
snmp-ups:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Improve automatic detection algorithm
</li><li class="listitem">
Provide access to Net-SNMP timeout and retries
</li><li class="listitem">
Proper handling of integer RW variables
</li><li class="listitem">
Implement support for alarms, through ups.alarm and outlet.n.alarm
</li><li class="listitem">
Improve log/debug output trace
</li><li class="listitem">
Fix loss of precision when setting values, using upsrw
</li><li class="listitem">
Support for outlets group management
</li><li class="listitem">
Many improvements and simplification
</li><li class="listitem">
Add support for Tripplite units using IETF mib
</li><li class="listitem">
Improve communication staleness detection and recovery
</li><li class="listitem">
Add devices MAC address publication
</li><li class="listitem">
Register values enumerations, when available
</li><li class="listitem">
Many improvements and fixes to the SNMP subdriver creation script
</li></ul></div></li><li class="listitem"><p class="simpara">
Eaton:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
3ph SNMP:
     Many improvements to Powerware / XUPS MIB, for data and commands
     Add support for Eaton Power Xpert Gateway UPS Card
     Improve support for temperature and humidity, including low / high values
     Alarms handling
</li><li class="listitem">
ePDU (G2 and G3):
     Improve support for ambient sensor, including thresholds and dry contacts
     Outlet groups handling, including data, thresholds, settings and commands
     Alarms handling
</li><li class="listitem">
XML/PDC (netxml-ups):
     Fix Eaton XML published data
     Add some settings (R/W flags) on ambient thresholds
</li></ul></div></li><li class="listitem">
bcmxcp_usb: improvements for device claiming and multi-packets responses
</li><li class="listitem">
dummy-ups: allow any variable to be modified
</li><li class="listitem">
libnutclient: Fix for reads when the socket was closed by NUT server
</li><li class="listitem"><p class="simpara">
macosx-ups:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
fix for 10.10 (Yosemite), v1.1
</li><li class="listitem">
gracefully handle disconnection of UPS (return "data stale")
</li></ul></div></li><li class="listitem">
nutdrv_atcl_usb: point to nutdrv_qx (fuji) for 0001:0000
</li><li class="listitem"><p class="simpara">
nutdrv_qx:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Add new <span class="emphasis"><em>sgs</em></span> USB subdriver to support TS Shara units
</li><li class="listitem">
various improvements and simplification, to the code and documentation
</li></ul></div></li><li class="listitem">
nut-ipmipsu: improve FreeIPMI support
</li><li class="listitem"><p class="simpara">
nut-scanner:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Don’t depend on development libraries, by looking at some known paths,
     including the one provided through --libdir, to find the correct libraries
</li><li class="listitem">
Fix a crash on a 2nd call to libnutscan with SNMP method
</li></ul></div></li><li class="listitem">
powercom: fix the processing of input and output voltage for KIN units
</li><li class="listitem"><p class="simpara">
solis:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
many improvements and cleanup
</li><li class="listitem">
resync with end-of-packet character
</li><li class="listitem">
fixes for Microsol Back-Ups BZ1200-BR
</li></ul></div></li><li class="listitem">
tripplitesu: Fix initialization when tripplite firmware is buggy (for
   Tripplite SU1000RT2U and possibly more)
</li><li class="listitem"><p class="simpara">
usbhid-ups:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
various minor improvements
</li><li class="listitem">
support for Eaton UPS with dual HID report descriptor in HID Parser
</li><li class="listitem">
handle missing USB strings in APC code
</li></ul></div></li><li class="listitem">
SSL support through Mozilla NSS: Rework the NSS tests to ensure that NSS is
   actually installed and usable for enabling SSL support in NUT
</li><li class="listitem">
Augeas support: Augeas lens for ups.conf was updated to add various missing
   global directives and ups fields
</li><li class="listitem">
scripts/systemd/nut-server.service.in: Restore systemd relationship since it
   was preventing upsd from starting whenever one or more drivers, among several,
   was failing to start
</li><li class="listitem">
Fix UPower device matching for recent kernels, since hiddev* devices now have
   class "usbmisc", rather than "usb"
</li><li class="listitem">
Network protocol information: default to type NUMBER for variables that are
   not flagged as STRING . This point is subject to improvements or change in
   the next release 2.7.5.  Refer to <a class="ulink" href="docs/net-protocol.txt" target="_top">docs/net-protocol.txt</a> for more
   information
</li><li class="listitem">
As usual, more bugfixes, cleanup and improvements, on both source code
   and documentation.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_7_3_what_8217_s_new_since_2_7_2"></a>2.7. Release notes for NUT 2.7.3 - what’s new since 2.7.2</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
reverted POWERDOWNFLAG to /etc/killpower as in 2.6.5 (packagers may want to
   put this in another filesystem, though)
</li><li class="listitem">
configure/make fixes for <code class="literal">systemdsystemunitdir</code>
</li><li class="listitem">
apcsmart: fix command set parsing for protocol version 4 (e.g. Smart-UPS
   RT 10000 XL)
</li><li class="listitem">
upslog: SIGUSR1 forces an immediate log entry
</li><li class="listitem">
riello_usb/_ser: USB interface claim fix; improved error handling
</li><li class="listitem">
usbhid-ups: add support for OpenUPS2 (PID: D005), Liebert GXT3 (PID: 0008)
   APC AP9584 Serial→USB kit (PID: 0000), and some Powercom models
   (PID: 0001). Fixed scaling for Cyberpower 0764:0501.
</li><li class="listitem">
USB core: do not call usb_set_altinterface(0) by default
</li><li class="listitem"><p class="simpara">
nutdrv_qx:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
added fabula, fuji USB and Voltronic-QS-HEX subdrivers
</li><li class="listitem">
add bestups subdriver to supersede the old standalone bestups driver
</li></ul></div></li><li class="listitem">
NUT Monitor: added FreeDesktop AppData file (including screenshots)
</li><li class="listitem">
renamed udev rules file to 62-nut-usbups.rules (permissions fix)
</li><li class="listitem">
added AIX packaging
</li><li class="listitem">
asem: added a driver for the UPS in ASEM PB1300 embedded PCs
</li><li class="listitem">
solis: updated to support APC Microsol units sold in Brazil
</li><li class="listitem"><p class="simpara">
tripplite_usb:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
updated to use dv/dq charge calculation for all models (also
     exposes battery_min and battery max as configuration variables)
</li><li class="listitem">
added binary 3005 protocol support (such as for SMART500RT1U)
</li></ul></div></li><li class="listitem">
genericups: better debugging while parsing the cable description flags
</li><li class="listitem">
all drivers: a new <span class="emphasis"><em>synchronous</em></span> driver flag is available for very verbose
   units, such as some ePDUs
</li><li class="listitem"><p class="simpara">
Eaton:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Add support for EnergySaving features for Eaton UPSs (HID USB/SHUT and
     XCP USB/serial)
</li><li class="listitem">
Fix and complete Eaton ePDUs G2/G3 support
</li><li class="listitem">
ABM (Advanced Battery Monitoring) support through battery.charger.status
     in HID (USB and SHUT), XCP (USB and serial) and SNMP (Powerware XUPS MIB)
</li></ul></div></li><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
APC Back-UPS 1200BR and Back-UPS BZ2200BI-BR (Microsol)
</li><li class="listitem">
ASEM SPA PB1300 UPS
</li><li class="listitem">
Belkin Regulator PRO-USB
</li><li class="listitem">
Cyber Power Systems Value 1500ELCD-RU
</li><li class="listitem">
EUROCASE EA200N 2000VA
</li><li class="listitem">
Fideltronik LUPUS 500
</li><li class="listitem">
Flight Technic &amp; International (FTUPS) FT-1000BS and FT-1000BS(T)
</li><li class="listitem">
Grafenthal PR-3000-HS
</li><li class="listitem">
JAWAN JW-UPSLC02
</li><li class="listitem">
Lacerda New Orion 800VA
</li><li class="listitem">
Mecer ME-1000-WTU
</li><li class="listitem">
NHS Sistemas de Energia Expert C Online 6000/8000/10000
</li><li class="listitem">
NHS Sistemas de Energia Expert S Online 6000/8000/10000
</li><li class="listitem">
Powercom BNT-xxxAP (USB product id: 0001)
</li><li class="listitem">
Rucelf UPOII-3000-96-EL
</li><li class="listitem">
Tripp Lite OMNIVSINT800
</li><li class="listitem">
Voltronic Power Apex 1KVA and Imperial 1KVA
</li></ul></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_7_2_what_8217_s_new_since_2_7_1"></a>2.8. Release notes for NUT 2.7.2 - what’s new since 2.7.1</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
This release is the second interim release of the 2.7 testing series.
</li><li class="listitem">
libupsclient had undefined references related to functions of libcommon.
   This issue was reported on Debian (bug <a class="ulink" href="https://github.com/networkupstools/nut/issues/731156" target="_top">#731156</a>) and is now fixed
</li><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
CABAC UPS-1700DV2
</li><li class="listitem">
Eaton Powerware 3105
</li><li class="listitem">
Emerson Network Power Liebert PSI 1440
</li><li class="listitem">
MicroDowell B.Box LP 500
</li><li class="listitem">
Numeric Digital 800 plus
</li><li class="listitem">
OptiUPS vs. 575C
</li><li class="listitem">
Tripp Lite SU10KRT3/1X
</li></ul></div></li><li class="listitem">
FreeDesktop Hardware Abstraction Layer (HAL) support was removed.
</li><li class="listitem">
nutdrv_atcl_usb: new driver for <span class="emphasis"><em>ATCL FOR UPS</em></span>
</li><li class="listitem">
al175: re-introduced this driver (actually, it was in 2.7.1)
</li><li class="listitem">
upsdrvctl now provides retry options for upsdrvctl and driver(s)
</li><li class="listitem">
snmp-ups: add support for XPPC-MIB and Tripp Lite SU10KRT3/1X.
   Also fix erroneous status in HP/Compaq SNMP MIB (with the most recent HP
   firmware (1.76); improved various MIBs (APC, HP/Compaq, …)
</li><li class="listitem">
nutdrv_qx: add new <span class="emphasis"><em>fallback</em></span> Q1 subdriver, with minimal <span class="emphasis"><em>Q1</em></span> support.
   General improvements on all subdrivers.
</li><li class="listitem">
mge-shut: partially revert PnP/RTS change, for initializing the
   communication with the UPS. Note that nut-scanner similar function was
   not modified however.
</li><li class="listitem">
FreeBSD DEVD support: generate devd.conf files for USB UPSes
   This adds a --with-devd-dir=PATH option to ./configure
</li><li class="listitem">
The NUT website was moved to a standalone website. A separate code
   repository and source archive are now available.
</li><li class="listitem">
As usual, more bugfixes, cleanup and improvements, on both source code
   and documentation.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_7_1_what_8217_s_new_since_2_6_5"></a>2.9. Release notes for NUT 2.7.1 - what’s new since 2.6.5</h3></div></div></div><div class="note" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Note</h3><p>There was no public NUT 2.7.0 release.</p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
This release is an interim release, part of the testing series, and the
   first release after the transition from Subversion to Git.
   The last release (2.6.5) is almost a year old. A lot of work has
   been done, but a good amount remains to achieve 2.8.0 goals.
   Please read the <a class="ulink" href="UPGRADING.adoc" target="_top">UPGRADING.adoc</a> notes.
</li><li class="listitem">
Added support for SSL via the Mozilla NSS library, in addition to the
   existing OpenSSL support.
</li><li class="listitem">
Added a new driver, nutdrv_qx, for Megatec/Qx devices. This driver will
   eventually replace the blazer_ser and blazer_usb drivers. In particular, it
   adds support for Voltronic Power devices.
</li><li class="listitem">
Increased USB_TIMEOUT to standards-compliant 5.000 seconds in most drivers.
   This should reduce the number of timeouts on low-speed USB 1.1 devices.
</li><li class="listitem">
The jNut Java source has been split into a separate GitHub repository.
</li><li class="listitem">
Added many devices to the HCL. Of particular note are many Tripp Lite USB
   HID PDC models which were tested against NUT by Tripp Lite.
</li><li class="listitem">
Reworked some visual elements of the HCL. The output is better tailored for
   graphical and text-only browsers, but suggestions are welcome for additional
   accessibility enhancements.
</li><li class="listitem">
Also increased timeouts and added redundant commands to improve reliability
   of mge-utalk driver.
</li><li class="listitem">
Added the apcupsd-ups driver to interoperate with apcupsd installations.
</li><li class="listitem">
Added documentation on creating subdrivers for snmp-ups and nutdrv_qx.
</li><li class="listitem">
Added new drivers for the Riello UPS product line (riello_ser/riello_usb).
</li><li class="listitem">
Many improvements to the BCM/XCP drivers have been merged in. This includes
   an improved data reception loop, and additional mappings.
</li><li class="listitem">
Added a few variables to the Powercom HID mappings.
</li><li class="listitem">
Updated the apcsmart driver, and renamed the previous driver to apcsmart-old.
</li><li class="listitem">
Fixed the battery percentage calculation in the bestfcom driver.
</li><li class="listitem">
libnutclient has been added as a C++ alternative to libupsclient.
</li><li class="listitem">
Packaging files for Solaris and HP-UX (sponsored by Eaton)
</li><li class="listitem">
Fix shutdown of Eaton HID, using usbhid-ups and mge-shut
</li><li class="listitem"><p class="simpara">
usbhid-ups: final fix for APC Back UPS ES.  APC Back UPS ES devices have
   buggy firmware, and this version does not cause a regression. The max_report
   variable should be set automatically based on the USB identification values.
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
UPDATE: known as <code class="literal">maxreport</code> flag for <code class="literal">usbhid-ups</code> driver, and as a
     <code class="literal">max_report_size</code> setting in code, as of NUT v2.8.2 release.
</li></ul></div></li><li class="listitem">
nut-scanner: fix crash
</li><li class="listitem">
IPMI support can handle more different versions of FreeIPMI
</li><li class="listitem">
Support power supplies scan over the network
   nut-scanner can now scan for power supplies with IPMI over LAN.
   This is currently limited to IPMI 1.5 only
</li><li class="listitem">
Implement a framework to spell check documentation source files,
   using Aspell. This includes an interactive build target (make
   spellcheck-interactive), and an automated one (make spellcheck),
   mainly for QA / Buildbot purpose. Note that a base NUT dictionary
   is also available (<a class="ulink" href="docs/nut.dict" target="_top">docs/nut.dict</a>), providing a glossary of
   terms related to power devices and management
</li><li class="listitem">
Improve systemd integration
</li><li class="listitem">
snmp-ups: Fixed a crash on outlet management, and added delta_ups MIB
   support. Also fixed mappings for upsBypassVoltage, upsBypassCurrent, and
   upsBypassPower in three-phase IETF MIB.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_6_5_what_8217_s_new_since_2_6_4"></a>2.10. Release notes for NUT 2.6.5 - what’s new since 2.6.4</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
This release fixes an important regression in upssched:
   any upssched.conf command that takes a second argument resulted in
   a defective frame sent to the parent process. Thus, the command was
   not executed (report and patch from Oliver Schonefeld)
</li><li class="listitem">
Website hosting: free NUT from Eaton website hosting
  
  
   NUT website (<a class="ulink" href="https://www.networkupstools.org" target="_top">https://www.networkupstools.org</a>) is no longer hosted by Eaton.
   Arnaud Quette (NUT project leader) has taken over NUT hosting on his own,
   to give NUT back some independence.
  
  
   This effort is also part of a logic to stop crediting Eaton for
   contributions from others (especially Arnaud Quette, as an individual).
   The new hosting service is located, as for Arnaud’s blog
   (<a class="ulink" href="http://arnaud.quette.fr" target="_top">http://arnaud.quette.fr</a>) on Gandi servers, using PaaS.
  
  
   This will allow more flexibility and automation of the release process.
</li><li class="listitem"><p class="simpara">
macosx-ups: new OS X Power Sources meta-driver
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Mac OS X provides UPS status information in a format similar to
     what is shown for laptop batteries. This driver will convert that
     information into a format compatible with NUT (Charles Lepple).
</li></ul></div></li><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Eaton ePDU Switched
</li><li class="listitem">
Online Zinto A (USB ID 0x06da:0x0601)
</li><li class="listitem">
REDi Blazer 400VA / 600VA / 800VA
</li><li class="listitem">
UNITEK Alpha650ipF and Alpha650ipE (USB ID 0x0f03:0x0001)
</li></ul></div></li><li class="listitem">
mge-shut driver has been replaced by a new implementation (newmge-shut).
   In case of issue with this new version, users can revert to oldmge-shut.
   UPDATE: oldmge-shut was dropped between 2.7.4 and 2.8.0 releases.
</li><li class="listitem">
First NUT virtualization package: NUT now supports integration with
   VMware ESXI 5.0, through a native VIB package. This is, for the time
   being, an external effort from René Garcia (refer to the Download section
   on NUT website). But work is underway to improve this integration, and
   include it in the NUT source tree
</li><li class="listitem">
IPMI support (nut-ipmipsu driver and nut-scanner): prepare for supporting
   API changes in upcoming FreeIPMI versions 1.1.x and 1.2.x.
</li><li class="listitem">
snmp-ups now supports high precision values for APC, and more variables
</li><li class="listitem">
the NUT variables and commands namespace has been fixed and
   completed, with the known and used variables that were missing.
</li><li class="listitem">
more bugfixes, cleanup and improvements, on both source code and
   documentation.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_6_4_what_8217_s_new_since_2_6_3"></a>2.11. Release notes for NUT 2.6.4 - what’s new since 2.6.3</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
This release fixes an important vulnerability in upsd
   (CVE-2012-2944: upsd can be remotely crashed)
  
  
   NUT server (upsd), from versions 2.4.0 to 2.6.3, are exposed to
   crashes when receiving random data from the network.
  
  
   This issue is related to the way NUT parses characters,
   especially from the network. Non printable characters were missed
   from strings operation (such as strlen), but still copied to the
   buffer, causing an overflow.
  
  
   Thus, fix NUT parser, to only allow the subset of ASCII charset from
   <code class="literal">Space</code> to <code class="literal">~</code>
   (Reported by Sebastian Pohle, Alioth bug <a class="ulink" href="https://github.com/networkupstools/nut/issues/313636" target="_top">#313636</a>, CVE-2012-2944)
  
  
   A separate patch, which applies to any faulty version, is also available:
   <a class="ulink" href="http://trac.networkupstools.org/projects/nut/changeset/3633" target="_top">http://trac.networkupstools.org/projects/nut/changeset/3633</a>
  
  
   For more information, refer to the Common Vulnerabilities and Exposures:
   <a class="ulink" href="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2012-2944" target="_top">http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2012-2944</a>
</li><li class="listitem">
A static source code analysis has been done by Michal Hlavinka from RedHat,
   using Coverity (12 issues fixed).
</li><li class="listitem">
Add new "LIST CLIENTS" and "NETVER" commands to NUT network protocol.
   "NETVER" allows to retrieve the Network protocol version, while
   "LIST CLIENTS" provides the list of clients connected to a device.
   Refer to the developer guide, "Network protocol information" section for
   more information.
</li><li class="listitem">
Support of ranges of values for writable variables has been added, to
   complete the existing enumerated values mechanism. This will start to
   appear in some drivers soon, beginning with Eaton. Refer to the developer
   guide, "Creating a new driver…" section for more information.
</li><li class="listitem">
PyNUT.py has been updated to version 1.2.2, adding support for
   LIST CLIENTS, FSD, HELP and VER (Rene Martín Rodríguez)
</li><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
AEG Power Solutions PROTECT HOME
</li><li class="listitem">
more APC SNMP cards
</li><li class="listitem">
ATEK Defensor range
</li><li class="listitem">
all Borri models
</li><li class="listitem">
all COVER ENERGY SA
</li><li class="listitem">
CyberPower OR700LCDRM1U, PR6000LCDRTXL5U and CP1000PFCLCD
</li><li class="listitem">
Dell UPS Network Management Card
</li><li class="listitem">
Dynamix 1000VA USB
</li><li class="listitem">
Eaton Management Card Contact (ref 66104)
</li><li class="listitem">
EVER POWERLINE RT / 11 / 31 and DUO II Pro
</li><li class="listitem">
GE Digital Energy GT Series 1000-3000 VA
</li><li class="listitem">
Gtec models
</li><li class="listitem">
all recent HP serial / USB UPS (G2, G3 and R/T models, ) and HP UPS
     Management Module
</li><li class="listitem">
Ippon INNOVA RT
</li><li class="listitem">
KOLFF BLACK NOVA
</li><li class="listitem">
Lexis X-power Tigra 1kVA
</li><li class="listitem">
Microline C-Lion Innova
</li><li class="listitem">
Online Yunto YQ450
</li><li class="listitem">
PowerShield Defender 1200VA
</li><li class="listitem">
PowerWalker Online VFI LCD, Line-Interactive VI LCD and Line-Interactive VI
</li><li class="listitem">
Riello Netman Plus 102 SNMP Card
</li><li class="listitem">
Tripp-Lite OMNISMART500
</li></ul></div></li><li class="listitem">
apcsmart has received some fixes to work better on Mac OS X, and in general
</li><li class="listitem">
bcmxcp has improved support for battery status, and better supports
   PW9120 units
</li><li class="listitem">
bestfortress has improved Best Fortress LI675VA support
</li><li class="listitem">
blazer_ser and blazer_usb now try to automatically estimate high and low
   voltages, to be able to calculate battery charge; support for online
   Innova UPS (T, RT and 3/1 T) has been added; Best UPS support has been
   improved, to prepare for superseding bestups driver
</li><li class="listitem">
bestups has also received some care, though users are encouraged to switch
   to blazer_ser, since bestups will soon be deprecated.
</li><li class="listitem">
newmge-shut has been heavily improved.  However, replacement of the
   current mge-shut has been postponed to the next release, due to the CVE
   issue.
</li><li class="listitem">
oneac 0.80 improves support for all families of Oneac (EG, ON, OZ and OB),
   including more data and instant commands (Bill Elliot).
</li><li class="listitem">
usbhid-ups: for Eaton devices, ups.start.auto is now automatically adjusted
   for shutdown.{return,stayoff} to behave as expected; Liebert firmwares with
   incorrect exponents have also been addressed.
</li><li class="listitem">
snmp-ups now provides support for UPS shutdown, based on usbhid-ups
   mechanisms (composite commands and fallback). Composite commands are also
   supported now. This means, for example, that if <span class="emphasis"><em>shutdown.return</em></span> is not
   supported, a combination of <span class="emphasis"><em>load.off</em></span> + <span class="emphasis"><em>load.on</em></span> may be used;
   Actual validity of instant commands is now tested before commands addition;
   Eaton/MGE MIB has been cleaned and completed; 3-phases support has been
   added to Socomec Netvision MIB; HP/Compaq MIB has been completed, with
   thresholds, nominal values and more commands.
</li><li class="listitem">
nut-scanner now also has libupsclient has a weak runtime dependency; more
   docs and bugfixes have also happened.
</li><li class="listitem">
Provide an Uncomplicated Firewall (UFW) profile (nut.ufw.profile)
</li><li class="listitem">
Riello protocols have been officially published in NUT protocols library:
   <a class="ulink" href="https://www.networkupstools.org/ups-protocols.html#_riello" target="_top">https://www.networkupstools.org/ups-protocols.html#_riello</a>
</li><li class="listitem">
Duplicate instances of upsd / upsmon are now detected upon startup
</li><li class="listitem">
NUT variables namespace has been completed with missing variables and
   commands that are already known and standard
</li><li class="listitem">
upslog now comes with a companion file, for logrotate configuration
</li><li class="listitem">
more devices embed NUT for power protection, now including Thecus NAS range
</li><li class="listitem">
more bugfixes, cleanup and improvements, on both source code and
   documentation, with a good bunch from Greg A. Woods.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_6_3_what_8217_s_new_since_2_6_2"></a>2.12. Release notes for NUT 2.6.3 - what’s new since 2.6.2</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
nut-scanner is now more portable, and provides more coherent option names.
   IPMI support has also been added, to discover local power supplies.
   This version brings weak runtime dependencies in libnutscan, which allows to
   compile nut-scanner with all options and to run according to the available
   dependencies (USB, SNMP, IPMI, …).
</li><li class="listitem">
libnutscan now provides pkg-config support and the needed header files are
   distributed. Some documentation is also available in the developer guide and
   manual pages have been updated and completed.
</li><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Cyber Power Systems with SNMP RMCARD (100, 201, 202 and 301)
</li><li class="listitem">
Dynamix 650VA USB
</li><li class="listitem">
LDLC UPS-1200D
</li><li class="listitem">
Tecnoware UPS ERA LCD 0.65
</li><li class="listitem">
Powercom BNT-xxxAP (USB ID 0d9f:0004)
</li><li class="listitem">
Various USB devices using UPSilon 2000 software
</li></ul></div></li><li class="listitem">
apcsmart has received minor correction.
</li><li class="listitem">
bcmxcp_usb now handles disconnection issues and reconnection mechanism.
</li><li class="listitem">
blazer_usb enables again inclusion of buggy USB Device and Vendor IDs in
   udev rules file; language ID support has been added for USB units from
   LDLC, Dynamix and other no names.
</li><li class="listitem">
nut-ipmipsu has also received some improvements.
</li><li class="listitem">
snmp-ups has fixed outlets reported current in aphel_genesisII MIB;
   MGE 3 phases handles better low battery condition; support for Cyber Power
   Systems with SNMP RMCARD has been added; support of the newer Eaton ePDUs
   has been improved.
</li><li class="listitem">
upsd doesn’t anymore fail to start if at least one of the listening
   interface is available. This is needed on systems where either IPv4 or IPv6
   is disabled, and no explicit LISTEN directive has been specified.
</li><li class="listitem">
Avahi support is now automatically enabled, upon detection
</li><li class="listitem">
jNut (NUT Java interface) adds device discovery support, through a
   nut-scanner wrapper; jNutWebAPI, a HTTP/JSON web service interface, has
   also been added to interact with upsd and nut-scanner.
</li><li class="listitem">
Base files for HPUX packaging have been added. This is still a work in
   progress.
</li><li class="listitem">
Compilation on IBM AIX has been fixed (namespace conflict with ctypes).
</li><li class="listitem">
more bugfixes, cleanup and improvements, on both source code and
   documentation.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_6_2_what_8217_s_new_since_2_6_1"></a>2.13. Release notes for NUT 2.6.2 - what’s new since 2.6.1</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
NUT can now monitor power supply units (PSU) in servers, through IPMI, using
   the new experimental <span class="emphasis"><em>nut-ipmipsu</em></span> driver. Users are encouraged to test it,
   and send feedback and debug output to the development mailing list.
   This requires GNU FreeIPMI (0.8.5 or higher) development package or files.
   Thanks goes to Al Chu, FreeIPMI project leader, for his help during this
   development.
</li><li class="listitem"><p class="simpara">
NUT now provides a tool, called <span class="emphasis"><em>nut-scanner</em></span>, to discover supported devices,
   both local and remote. nut-scanner will help to ease the configuration step,
   and power infrastructure discovery.
  
  
   This development, sponsored by Eaton, supports the following methods:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
USB,
</li><li class="listitem">
SNMP,
</li><li class="listitem">
XML/HTTP (from Eaton),
</li><li class="listitem">
NUT servers, using the classic connect or Avahi / mDNS methods.
  
  
   IPMI support will be added in the next release.
  
  
   A separate library, called <span class="emphasis"><em>libnutscan</em></span>, is also available to provide these
   feature. Future NUT releases will provides binding for the supported
   languages (Perl, Python and Java).
</li></ul></div></li><li class="listitem">
NUT now provides a Java interface called <span class="emphasis"><em>jNut</em></span>.
   This development, sponsored by Eaton, is currently limited to the client
   interface. But it will be broaden to device discovery and configuration in
   the future.
  
  
   For more info, refer to nut/scripts/java/README, or the developer guide
   (chapter <span class="emphasis"><em>Creating new client</em></span>). Javadoc documentation is also provided,
   along with Java archives (.jar) in the Download section.
</li><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Eaton 3S
</li><li class="listitem">
Cyber Power Systems CP1000AVRLCD
</li><li class="listitem">
various APC models equipped with APC AP9618 management card, including
     APC Smart-UPS RT XL
</li><li class="listitem">
Orvaldi 750 / 900SP
</li><li class="listitem">
POWEREX VI 1000 LED
</li><li class="listitem">
PowerWalker VI 850 LCD
</li><li class="listitem">
SVEN Power Pro+ series (USB ID ffff:0000)
</li></ul></div></li><li class="listitem">
A regression has been fixed in udev rules file. This previously caused
   permission issues to owners of some USB devices.
</li><li class="listitem">
Avahi support has been added, for NUT mDNS publication, through a static
   service file (nut/scripts/avahi/nut.service).
</li><li class="listitem">
usbhid-ups has had Eaton completion: some features have been improved, such
   as <span class="emphasis"><em>output.voltage.nominal</em></span>; 3S Eco control support has been added, along
   with battery.runtime.low and end of battery life (life cycle monitoring)
   support; new measurements for 5 PX are also supported now (outlet power
   factor, power, real power and current).
</li><li class="listitem">
apcsmart has been updated to support more variables and features; the
   previous driver is however still available as <span class="emphasis"><em>apcsmart-old</em></span>, in case of
   issues.
</li><li class="listitem">
bcmxcp now supports per outlet startup and shutdown delays setting; shutdown
   delay is also used, when available, for outlet.n.shutdown.return instead of
   the default 3 seconds.
</li><li class="listitem">
snmp-ups.c has a new initialization method, that uses sysObjectID, which is
   a pointer to the preferred MIB of the device, to detect supported devices.
   This speeds up even more init stage and should render void the use of <span class="emphasis"><em>mib</em></span>
   option. SNMP v3 session initialization has also been fixed, and Eaton PDU
   support has been completed.
</li><li class="listitem">
Initial support has been added for systemd, the System and Service Manager
   from RedHat.
</li><li class="listitem">
The chapter <span class="emphasis"><em>NUT configuration management with Augeas</em></span> of the developer guide
   has received some completion: a complete Python Augeas example code is now
   provided.
</li><li class="listitem">
Finally, after years of dedication to NUT, Arjen de Korte is now retired.
   Sincere thanks to you Arjen from us all.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_6_1_what_8217_s_new_since_2_6_0"></a>2.14. Release notes for NUT 2.6.1 - what’s new since 2.6.0</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
the various recent USB regressions have been definitely fixed.
</li><li class="listitem">
NUT now propose a variable to expose UPS efficiency (ups.efficiency).
   Eaton 5 PX already uses it.
</li><li class="listitem">
the Perl module from Gabor Kiss (rewritten from Kit Peters') is now
   distributed with NUT source code.
</li><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Eaton Ellipse ECO, Powerware 9140, Eaton 5 PX, and ambient sensor
     on Eaton ePDU managed
</li><li class="listitem">
GE EP series
</li><li class="listitem">
Inform Sinus SS 210
</li><li class="listitem">
IPAR Mini Energy ME 800
</li><li class="listitem">
Mustek Yukai PowerMust 1000 USB
</li><li class="listitem">
Numeric 3000 SW
</li><li class="listitem">
SVEN Power Pro+ series (recent models)
</li><li class="listitem">
Vivaldi EA200 LED
</li></ul></div></li><li class="listitem">
liebert-esp2: Improved Liebert ESP II support, including UPS shutdown
   (poweroff), 1 and 3-phase input and output variables, and most
   input / output / bypass / nominal variables. There is also a fix for the
   USB to serial cable (Farkas Levente and Spiros Ioannou).
</li><li class="listitem">
powercom has improved PowerCom BNT 1500A and BNT-other support, along with
   driver documentation and code conformance to the NUT rules (Keven L. Ates).
</li><li class="listitem">
apcsmart has more improved UPS poweroff support and options (Michal Soltys).
</li><li class="listitem">
blazer has also seen some improvements.
</li><li class="listitem">
usbhid-ups has completed a bit supported variables for APC and Eaton / MGE.
</li><li class="listitem">
on the quality assurance side, Eaton has worked on fixing a few
   non-conformance issues, like C++ style comments and warnings, using
   a newly developed verification tool (Prachi Gandhi).
</li><li class="listitem">
fix remaining references to LIBSSL_LDFLAGS, instead of LIBSSL_LIBS,
   which cause unresolved symbol on libupsclient users (Fabrice Coutadeur).
</li><li class="listitem">
the website has now a better support for Internet Explorer 6.
</li><li class="listitem">
graphic illustrations, used for the Features page on the website Features
   and chapter of the user manual, have been refreshed (courtesy of Eaton).
</li><li class="listitem">
more bugfixes, cleanup and improvements, on both source code and
   documentation.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_6_0_what_8217_s_new_since_2_4_3"></a>2.15. Release notes for NUT 2.6.0 - what’s new since 2.4.3</h3></div></div></div><div class="note" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Note</h3><p>Per original semantic versioning, there were no public NUT 2.5.x releases.</p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
the main focus of this release is the complete documentation revamping,
   using AsciiDoc. This includes a new website, user manual, developer guide,
   packager guide and manual pages, available in various formats (single and
   multiple pages HTML, and PDF at the moment).
  
  
   Be sure to check the <code class="literal">--with-doc</code> option help of <code class="literal">configure</code> script, and
   <a class="ulink" href="docs/configure.txt" target="_top">docs/configure.txt</a> for more information.
</li><li class="listitem">
Add Augeas support, to provide easy NUT configuration management, through
   tools and development APIs. For more information, refer to the developer
   guide, or <a class="ulink" href="scripts/augeas/README.adoc" target="_top">scripts/augeas/README.adoc</a> in the source directory.
</li><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
APC 5G
</li><li class="listitem">
Eaton PowerWare 5119 RM (smart mode using upscode2 driver)
</li><li class="listitem">
Eaton Best Ferrups (using older ConnectUPS card)
</li><li class="listitem">
Eaton 9395 (serial interface)
</li><li class="listitem">
Eaton ConnectUPS X / BD / E Slot
</li><li class="listitem">
HP T1000 INTL
</li><li class="listitem">
HP T1500 INTL
</li><li class="listitem">
HP T750 G2
</li><li class="listitem">
HP R1500 G2 INTL
</li><li class="listitem">
iDowell iBox UPS
</li><li class="listitem">
Tripp Lite SmartOnline SU1000XLA
</li><li class="listitem">
Tripp Lite Smart1000LCD
</li><li class="listitem">
and some more USB/HID devices IDs
</li><li class="listitem">
CyberPower CP1500AVRLCD and CP1350AVRLCD
</li><li class="listitem">
PowerWalker Line-Interactive VI 1400
</li><li class="listitem">
Rocketfish RF-1000VA / RF-1025VA
</li></ul></div></li><li class="listitem">
usbhid-ups has better support for shutting down APC SmartUPS RM series,
   and finally fix the "buffer size" issue, which was breaking some
   devices data retrieval, or truncating some data on others.
</li><li class="listitem">
snmp-ups now support SNMP v3 and its security parameters. IETF MIB support
   has also been extended.
</li><li class="listitem">
fix dummy-ups simulation driver status handling bug, and add the
   capability to remove exposed variables on the fly.
</li><li class="listitem">
the belkin driver now support control commands and status reporting
   for beeper and battery test.
</li><li class="listitem">
the powerpanel driver supports more older CyberPower units.
</li><li class="listitem">
mge-utalk, upscode2, blazer and liebert-esp2 have also received some
   care, and been improved.
</li><li class="listitem">
NUT-Monitor and the PyNUT client module have been updated to 1.3,
   adding more features like automatic connection to the first local device
   and i18n support.
</li><li class="listitem">
improve configure time dependencies checking and processing.
</li><li class="listitem">
improve older Unix systems support (HP-UX, AIX, …) for missing functions.
</li><li class="listitem">
refresh and improve USB helper files (udev and UPower).
</li><li class="listitem">
more generation automation: the ChangeLog file is now generated
   automatically at distribution time, along with the files needed for
   the website hardware compatibility list.
</li><li class="listitem">
SSL support has also received some improvements.
</li><li class="listitem">
tcp-wrapper now allows hostnames in /etc/hosts.allow too (not only IPv4
   and/or IPv6 addresses).
</li><li class="listitem">
many bugfixes, cleanup and improvements.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_4_3_what_8217_s_new_since_2_4_2"></a>2.16. Release notes for NUT 2.4.3 - what’s new since 2.4.2</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
this is a bugfix release that only solves the regression on IPv6 activation.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_4_2_what_8217_s_new_since_2_4_1"></a>2.17. Release notes for NUT 2.4.2 - what’s new since 2.4.1</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
the general USB support has been vastly improved, including many bug
   fixes, better OS support, new features and devices.
</li><li class="listitem">
NUT now talks to Solar Controller Devices with the new ivtscd driver.
</li><li class="listitem">
the snmp-ups driver supports more PDU, with a smaller disk footprint.
</li><li class="listitem">
apcsmart supports more older SmartUPS and Matrix units.
</li><li class="listitem">
the bestfortress driver is resurrected.
</li><li class="listitem">
the virtual driver has been renamed to <span class="emphasis"><em>clone</em></span>.
</li><li class="listitem">
the netxml-ups driver has received some care.
</li><li class="listitem">
various debugging and development improvements have been done, around
   driver output; dummy-ups with more interaction and scripting and the
   device-recorder.sh script.
</li><li class="listitem">
the build system has received many bugfixes and improvements.
</li><li class="listitem">
the UPower (previously known as DeviceKit-power) rules file is now
   generated by NUT.
</li><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Apollo 1000A and 1000F
</li><li class="listitem">
various Baytech RPC
</li><li class="listitem">
old Best Power Fortress
</li><li class="listitem">
Cyber Power Systems PR3000E, CP 1500C and OR2200LCDRM2U
</li><li class="listitem">
all the new Dell UPS range (serial, USB and network)
</li><li class="listitem">
Eaton E Series NV and DX UPS, and Powerware 9130
</li><li class="listitem">
older HP T500 and T750, newer T750 INTL (USB) and R1500 G2 (serial)
</li><li class="listitem">
Inform Informer Compact 1000VA
</li><li class="listitem">
many serial and USB devices from Ippon, like Back Comfo Pro,
     Smart Power Pro and Smart Winner
</li><li class="listitem">
IVT SCD series
</li><li class="listitem">
Liebert GXT2-3000RT230 and PowerSure PSA
</li><li class="listitem">
Mustek PowerMust 424 / 636 / 848 USB
</li><li class="listitem">
all new PowerCOM USB devices with HID PDC interface
</li><li class="listitem">
Tripp-Lite INTERNETOFFICE700, SMART700USB and ECO550UPS
</li><li class="listitem">
UPSonic DS-800 (USB)
</li></ul></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_4_1_what_8217_s_new_since_2_4_0"></a>2.18. Release notes for NUT 2.4.1 - what’s new since 2.4.0</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
the microdowell driver has appeared to support various MicroDowell Enterprise
   units (see the "new devices" list below).
</li><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
MicroDowell Enterprise B8, B10, N8, N11, N15, N20,
     N22, N30, N40, N50, N60 and HiBox ST.
</li></ul></div></li><li class="listitem">
NUT-Monitor now better handles the ups.status field, and has switched to
   version 1.1.
</li><li class="listitem">
the situation of the build toolchain has been fixed, with regard to the
   "make clean" target and the wrongly removed generated USB files. This broke
   further configure call.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_4_0_what_8217_s_new_since_2_2_2"></a>2.19. Release notes for NUT 2.4.0 - what’s new since 2.2.2</h3></div></div></div><div class="note" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Note</h3><p>Per original semantic versioning, there were no public NUT 2.3.x releases.</p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">
preliminary support for Power Distribution Units (PDUs): NUT can now support
   PDUs, either natively (ie using NUT snmp-ups driver), or through a binding to
   the Powerman daemon. The list of supported PDUs is already quite long,
   including:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Eaton ePDUs (Managed and Monitored),
</li><li class="listitem">
some Aphel models,
</li><li class="listitem">
some Raritan PDUs,
</li><li class="listitem">
and the whole list of Powerman supported devices:
     <a class="ulink" href="http://powerman.sourceforge.net/supported.html" target="_top">http://powerman.sourceforge.net/supported.html</a>
</li></ul></div></li><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
the various PDUs cited above
</li><li class="listitem">
Chloride Desk Power 650
</li><li class="listitem">
Cyber Power Systems Value 400E/600E/800E (USB models)
</li><li class="listitem">
Delta GES602N
</li><li class="listitem">
Digitus DN-170020
</li><li class="listitem">
the whole Eaton ranges (mostly composed of MGE Office Protection Systems
     and Powerware units) including BladeUPS
</li><li class="listitem">
Forza Power Technologies SL-1001
</li><li class="listitem">
HP PowerTrust 2997A
</li><li class="listitem">
HP R/T 2200 G2
</li><li class="listitem">
Infosec XP 1000 and XP 500
</li><li class="listitem">
Ippon Back Power Pro (serial and USB)
</li><li class="listitem">
Kebo 1200D/D Series
</li><li class="listitem">
Liebert PowerSure Personal XT
</li><li class="listitem">
MGE Office Protection Systems Protection Station
</li><li class="listitem">
Neus 400va and 600va
</li><li class="listitem">
Phasak 400VA and 600VA
</li><li class="listitem">
Plexus 500VA
</li><li class="listitem">
Powercom Black Knight PRO / King PRO and Imperial
</li><li class="listitem">
PowerKinetics BlackOut Buster
</li><li class="listitem">
Sweex 1000 USB
</li><li class="listitem">
UNITEK Alpha 500
</li><li class="listitem">
WinPower CPM-800
</li></ul></div></li><li class="listitem">
NUT now embeds Python client support through the PyNUTClient module and the
   NUT-Monitor application. Both are from David Goncalves, and are still
   available from <a class="ulink" href="http://www.lestat.st" target="_top">http://www.lestat.st</a>.
   For more information, refer to <a class="ulink" href="scripts/python/README.adoc" target="_top">scripts/python/README.adoc</a>.
</li><li class="listitem">
the dummy-ups driver now supports a "repeater" mode. This allows it to act as
   a NUT client, and to forward data. This can be useful for supervision and
   load sharing purposes.
</li><li class="listitem">
tcp-wrappers support has been added to the upsd server, to grant users access
   by source IP for commands that require to be logged into the server. This
   replaces the previous internal implementation (ACL in upsd.conf).
</li><li class="listitem">
the nut.conf file has been introduced to standardize startup configuration
   across the various systems.
</li><li class="listitem">
NUT now ships a bash completion function for <span class="emphasis"><em>upsc</em></span> command
   (scripts/misc/nut.bash_completion). Simply copy it to /etc/bash_completion.d
</li><li class="listitem">
many internal changes to improve maintainability, while lowering the
   maintenance cost (thus allowing developers to focus on what matters: the
   code!). Examples of this are:
</li><li class="listitem">
the USB information automatic extraction to generate the various USB helper
     files,
</li><li class="listitem">
the upsdrv_info_t structure to track more driver information, and remove
     the need for the upsdrv_banner() function
</li><li class="listitem">
common USB code refactoring, as it is done for the serial functions.
</li><li class="listitem">
tons of bugfixes, cleanup and improvements to make NUT stronger than ever!
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_2_2_what_8217_s_new_since_2_2_1"></a>2.20. Release notes for NUT 2.2.2 - what’s new since 2.2.1</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
support for new devices: APC BACK-UPS XS LCD, Atlantis Land,
   Mustek Powermust Office 650, Oneac XAU models, Powerware PW5115 and
   PW9120 (USB), Nitram Elite 2005
</li><li class="listitem">
Integrated Power Management (NUT HAL integration) has reached a
   major milestone: it is now the most advanced UPS integration into
   Power Management layer known in existing OSs. It has received many
   corrections and improvements, and allows to PowerOff the UPS at the
   end of a power cycle (which is the most important feature, not
   supported on other systems).
   The various files are now installed into the correct location.
</li><li class="listitem">
the usbhid-ups driver has received attention. Most notably, the
   shutdown handling has been reworked, and support for MGE UPS SYSTEMS
   3 phases units has been added.
</li><li class="listitem">
snmp-ups now supports MGE* Environment Sensor (ref 66 846).
   The ambient.temperature reporting has also been fixed for units
   other than APC.
</li><li class="listitem">
the netxml-ups driver has appeared to support MGE* network HTTP/XML
   cards.
</li><li class="listitem">
NUT now distributes by default the shared version of libupsclient
   (version 1.0.0), and use this for the provided clients (upsmon, upsc,
   upsrw, upscmd). This is part of an effort to reduce NUT’s footprint,
   both on disk and in memory.
</li><li class="listitem">
powerpanel has reach a new step toward the replacement of nitram and
   cpsups drivers. The final step is scheduled for NUT 2.4.
</li><li class="listitem">
many changes, cleanup and fixes to the NUT core and various drivers.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_2_1_what_8217_s_new_since_2_2_0"></a>2.21. Release notes for NUT 2.2.1 - what’s new since 2.2.0</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
all MGE Office Protection Systems units
</li><li class="listitem">
Advice TopGuard 2000
</li><li class="listitem">
Belkin F6H375-USB
</li><li class="listitem">
Dynamix UPS1700D
</li><li class="listitem">
Effekta RM2000MH,
</li><li class="listitem">
Jageson Technology Jasuny USPS
</li><li class="listitem">
Powercom SMK-1500A and SXL-1500A
</li><li class="listitem">
PowerWalker Line-Interactive VI 400/800 and 600
</li><li class="listitem">
Powerware 9110
</li><li class="listitem">
UNITEK Alpha 2600
</li><li class="listitem">
UPSonic CXR1000
</li><li class="listitem">
some vintage serial APC UPSs
</li></ul></div></li><li class="listitem">
the usbhid-ups driver has been improved, and fixed in many areas, through
   a backport of the development (trunk) version.
</li><li class="listitem">
the udev rules, for Linux hotplug support of the USB UPSs, has been
   updated to support kernel newer than 2.6.22.
</li><li class="listitem">
the megatec and megatec_usb drivers have also been backported from the
   development (trunk) version.
</li><li class="listitem">
the client development files have also received some care:
   the upsclient pkg-config file has been fixed, and the upsclient.h
   file allows older NUT clients to continue using the UPSCONN structure.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_2_0_what_8217_s_new_since_2_0_5"></a>2.22. Release notes for NUT 2.2.0 - what’s new since 2.0.5</h3></div></div></div><div class="note" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Note</h3><p>Per original semantic versioning, there were no public NUT 2.1.x releases.</p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
The new build infrastructure, using automake, is now used.
   This has major impact on the compilation and installation procedures,
   and thus on the NUT packaging.
   For more information, refer to <a class="ulink" href="UPGRADING.adoc" target="_top">UPGRADING.adoc</a> and packaging/debian/ for
   an example of migration.
</li><li class="listitem">
NUT now provides support for FreeDesktop Hardware Abstraction Layer
   (HAL) which brings full Plug And Play experience to USB UPS owners.
   For more information, refer to <a class="ulink" href="docs/nut-hal.txt" target="_top">docs/nut-hal.txt</a>.
</li><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
Ablerex 625L
</li><li class="listitem">
ActivePower 400VA, 2000VA;
</li><li class="listitem">
Belkin Home Office F6H350-SER, F6H500-SER, F6H650-SER
</li><li class="listitem">
Belkin Office Series F6C550-AVR
</li><li class="listitem">
Belkin Universal UPS F6C100-UNV (USB), F6C1100-UNV (USB),
     F6C1200-UNV (USB), F6H350deUNV (serial),
     F6H350ukUNV (serial), F6H650ukUNV (serial)
</li><li class="listitem">
Compaq R3000h
</li><li class="listitem">
Cyber Power Systems PR2200
</li><li class="listitem">
Dynex DX-800U
</li><li class="listitem">
Geek Squad GS1285U
</li><li class="listitem">
Krauler UP-M500VA
</li><li class="listitem">
Mecer ME-2000
</li><li class="listitem">
MGE UPS SYSTEMS Ellipse MAX
</li><li class="listitem">
Online Zinto D
</li><li class="listitem">
PowerTech SMK-800
</li><li class="listitem">
SVEN Power Pro+ series
</li><li class="listitem">
Power Smart RM 2000
</li><li class="listitem">
Tripp-Lite SmartOnline SU1500RTXL2ua, smart2200RMXL2U.
</li></ul></div></li><li class="listitem">
added IPv6 support,
</li><li class="listitem">
the newmge-shut driver has appeared. This one uses the same HID core
   as usbhid-ups, but communicate over a serial link. It will eventually
   replace the current mge-shut driver.
</li><li class="listitem">
client commands (upsc, upsrw and upscmd): hostname is now optional,
   and defaults to "localhost"
</li><li class="listitem">
many drivers have been improved and have received bug fixes:
   powerpanel, megatec, megatec_usb, safenet, tripplite_usb, gamatronic,
</li><li class="listitem">
the hotplug and udev scripts, in charge of setting the right
   permissions on the USB devices, are now installed automatically
   when appropriate.
</li><li class="listitem">
more generally, the NUT core and documentation, including the manpages,
   have been improved and updated.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_0_5_what_8217_s_new_since_2_0_4"></a>2.23. Release notes for NUT 2.0.5 - what’s new since 2.0.4</h3></div></div></div><p>This release is a backport of the development version.  Many changes
have already been backported previously.  Thus it is more a
synchronization release, though it includes many bugfixes and support
for new models.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">
support for new devices:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
APC Smart-UPS with 6TI firmware
</li><li class="listitem">
Belkin Small Enterprise F6C1500-TW-RK
</li><li class="listitem">
Compaq R3000 XR, R5500 XR
</li><li class="listitem">
Cyber Power 550SL, 725SL, 685AVR, 800AVR, 1200AVR, AE550
</li><li class="listitem">
Eltek
</li><li class="listitem">
Inform GUARD
</li><li class="listitem">
Microsol Rhino
</li><li class="listitem">
Opti-UPS PowerES 420E
</li><li class="listitem">
PowerMan RealSmart, BackPro
</li><li class="listitem">
Powerware PW9315 3-phase
</li><li class="listitem">
SOLA 305
</li><li class="listitem">
Tripp-Lite SMART550USB, SMART2200RMXL2U, OMNI1000LCD, OMNI900LCD,
     OMNI650LCD, 1500 LCD, AVR550U
</li><li class="listitem">
Viewsonic PowerES 420E
</li></ul></div></li><li class="listitem">
bcmxcp: added 3-phase support
</li><li class="listitem">
megatec: better hardware support, more instant commands
</li><li class="listitem">
mge-hid: support more instant commands
</li><li class="listitem">
newhidups: fixed APC and Tripp Lite bugs, various memory bugs,
   improved report buffering, improved Solaris support, added
   <span class="emphasis"><em>-x explore</em></span> option for easy diagnosis of new devices
</li><li class="listitem">
solis: shutdown programming, support new cables, Solaris support
</li><li class="listitem">
tripplite_usb: updated SMARTPRO support, fixed OL/OB reporting,
   better error handling, some memory bugs
</li><li class="listitem">
new dummy-ups driver simulator
</li><li class="listitem">
added HTML interface for access to CGI scripts
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_0_4_what_8217_s_new_since_2_0_3"></a>2.24. Release notes for NUT 2.0.4 - what’s new since 2.0.3</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
The newhidups critical bug (segmentation fault) has been fixed. It has
   also received some more care, like bugfixes and new models support and
   enhancement for Solaris.
   [Peter Selinger and Arnaud Quette]
</li><li class="listitem">
A bug has been fixed in NUT core to support resuming from suspend-to-disk.
   This should also fix other similar issues, like time synchronization
   through the NTP - Network Time Protocol.
   [Arjen de Korte]
</li><li class="listitem">
The mge-shut driver now better detects the Low Battery status, support
   new models and fixes some wrong status and data. It also fixes some
   issue where the UPS wasn’t restarting (refer to mge-shut manpage).
   [Arnaud Quette]
</li><li class="listitem">
The genericups custom configuration through ups.conf is working again
   [Arjen de Korte]
</li><li class="listitem">
The genericups driver type 22 also support CyberPower 725SL
   (and maybe others SL models)
   [David Kaufman]
</li><li class="listitem">
The new megatec driver, which will replace a bunch of drivers by nut 2.2
   (refer to <a class="ulink" href="docs/megatec.txt" target="_top">docs/megatec.txt</a> and <a class="ulink" href="UPGRADING.adoc" target="_top">UPGRADING.adoc</a>) has been
   backported from the trunk (Development tree). The powermust driver has
   also received some attention.
   [Carlos Rodrigues]
</li><li class="listitem">
The new rhino driver was added to support Microsol Rhino UPS hardware
   The solis has also been improved for Solaris compatibility, and
   internal / external shutdown programming. solis can now save external
   shutdown programming to ups, and support new cables for solis 3
   [Silvino B. MagalhÃ£es]
</li><li class="listitem">
Several fixes and improvements have been made to upsrw, upsset,
   cpsups, tripplite_usb and the FAQ.
   [Arjen de Korte and Charles Lepple]
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_0_3_what_8217_s_new_since_2_0_2"></a>2.25. Release notes for NUT 2.0.3 - what’s new since 2.0.2</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
The recent and major newhidups changes have been backported from the
   Development tree. It now:
</li><li class="listitem">
supports models from MGE UPS SYSTEMS, APC and Belkin. Mustek and Unitek
     units are also recognized for development purpose,
</li><li class="listitem">
handles better device reopening, after a disconnection,
</li><li class="listitem">
handles multiple devices, with several parameters to find the right UPS.
   [Peter Selinger, Charles Lepple and Arnaud Quette]
</li><li class="listitem">
The bcmxcp_usb driver has been added to support Powerware USB units.
   [Wolfgang Ocker and Kjell Claesson]
</li><li class="listitem">
The tripplite_usb driver has been added to support Tripp Lite USB units.
   [Charles Lepple]
</li><li class="listitem">
The sec driver is back as gamatronic
   [Gamatronic, Nadav Moskovitch]
</li><li class="listitem">
The genericups driver has received official care from Gamatronic
   to add support for the Gamatronic UPS with alarm interface.
   [Gamatronic, Nadav Moskovitch]
</li><li class="listitem">
The powermust driver now supports Soyntec Sekury C 500 and C 800 units.
   [Hanno Borns]
</li><li class="listitem">
The mge-shut driver has received a bit of attention too, and enhance
   ups.model retrieval for some specific case (release 0.65)
</li><li class="listitem">
The drivers don’t change to the "statepath" directory anymore at
   initialization time if called using -k. This avoid unneeded
   failure to poweroff the UPS if /var is already unmounted.
   [Gaspar Bakos]
</li><li class="listitem">
The belkinunv driver now supports Belkin F6C1100-UNV
   [Dave Breiland]
</li><li class="listitem">
The isbmex driver has been upgraded to version 0.05, which fixes
   various errors in formulas, add shutdown capability and revert
   back baudrate to B9600 (instead of B2400), as it broke the
   communication
   [Ricardo Martinezgarza]
</li><li class="listitem">
The support of Sysgration UPGUARDS Pro650 in fentonups has
   been fixed
   [Simon J. Rowe]
</li><li class="listitem">
The packaging files for Red Hat have received various fixes
   [Thomas Jarosch]
</li><li class="listitem">
The solis driver has been fixed to avoid a naming collision and
   compile on Solaris
   [Paweł Kierdelewicz]
</li><li class="listitem">
The snmp-ups driver has corrected the problem when exposing
   certain time data.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_0_2_what_8217_s_new_since_2_0_1"></a>2.26. Release notes for NUT 2.0.2 - what’s new since 2.0.1</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
the newhidups USB driver has been improved a lot and is no more
   experimental. It also now has a basic APC support, which will
   soon replace the legacy hidups driver.
</li><li class="listitem">
The mge-utalk driver has improved its support for old units.
</li><li class="listitem">
The mge-shut driver has been improved for restart/shutdown
   sequences which was previously blocking the serial port.
</li><li class="listitem">
The general MGE support has been added Pulsar EXtreme C / EX RT,
   Comet EX RT, Pulsar SV, Pulsar PSX, Ellipse Office and NOVA AVR USB.
</li><li class="listitem">
The genericups driver now supports Generic RUPS 2000, AEC MiniGuard
   UPS 700 (using Megatec M2501 cable), and Powerware 3110.
   [Nick Barnes, Paul Andreassen]
</li><li class="listitem">
The powermust driver now supports SquareOne Power QP1000, Mustek
   PowerMust 1400VA Plus and 2000VA USB.
   [Carlos Rodrigues]
</li><li class="listitem">
The fentonups driver has been enhanced and now supports Sysgration
   UPGUARDS Pro650.
   [Michel Bouissou, Simon J. Rowe]
</li><li class="listitem">
The cpsups driver now supports MicroDowell B.Box BP 500/750/1000/1500.
   [Armin Diehl]
</li><li class="listitem">
The snmp-ups driver now supports Socomec SNMP devices (Netvision MIB),
   and Powerware ConnectUPS SNMP cards.
   [Thanos Chatziathanassiou, Olli Salvia]
</li><li class="listitem">
The bcmxcp driver is back with support for Powerware UPSs.
   [Tore Ørpetveit, Kjell Claesson]
</li><li class="listitem">
The cyberpower driver now supports CyberPower 1000AVR.
   [Dave Huang]
</li><li class="listitem">
The new solis driver supports Microsol units: Solis 1.0, 1.5,
   2.0 and 3.0.
   [Silvino B. Magalhaes]
</li><li class="listitem">
The apcsmart driver has fixed APC600 support.
</li><li class="listitem">
The etapro driver fixes brokenness due to ser_get_line use
   [Marek Michalkiewicz]
</li><li class="listitem">
The new upscode2 driver supports Fiskars, Compaq and Powerware
   devices.
   [Niels Baggesen, Havard Lygre]
</li><li class="listitem">
The tripplite driver has fixed a battery charge bug
   [Cedric Tefft]
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_0_1_what_8217_s_new_since_2_0_0"></a>2.27. Release notes for NUT 2.0.1 - what’s new since 2.0.0</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
The bestuferrups driver has been forked into the new bestfcom driver
   which has better handling of the inverter status alarm messages and
   more.
   [Kent Hill]
</li><li class="listitem">
Mustek UPS support returns with two drivers which have overlapping
   coverage: mustek and powermust.
   [powermust: Carlos Rodrigues, mustek: Martin Hajduch]
</li><li class="listitem">
Additional CyberPower Systems hardware is supported with the new
   cpsups driver.  Three recognized models are the CPS1500AVR,
   CPS1100VA, and OP500TE.
   [Walt Holman, Brad Sawatzky]
</li><li class="listitem">
The genericups driver can now generate staleness warnings in
   specific cases where the UPS provides a way to test for its
   presence.  See the "CON" setting in ups.conf for more details.
   [stan / saticed.me.uk]
</li><li class="listitem">
Documentation for monitoring a Back-UPS RS 500 on a system without
   USB ports has been added to the cables directory.
   [Martin Edlman]
</li><li class="listitem">
The everups driver now supports types 73-76 (NET 700/1000/1400/500-DPC)
   [hunter]
</li><li class="listitem">
The new metasys driver supports Meta System models: Line,
   HF Millennium, HF Top Line, ECO Network, ECO, Ally HF, Megaline
   [BlaXwan]
</li><li class="listitem">
The ippon driver now allows user-defined settings for the delay
   before switching off, and the delay before powering on.
   [Yuri Elizarov]
</li><li class="listitem">
The victronups driver is now at version 0.1.9, which adds many
   instant commands: calibration control, battery and front panel tests,
   and bypass control.
   [Gert Lynge]
</li><li class="listitem">
The tripplite driver has received a major overhaul to bring it up to
   working condition for the 2.0 tree, including code cleanups, several
   new variables, commands, and user-definable parameters.  See
   ChangeLog for more.
   [Nicholas J Kain]
</li><li class="listitem">
The mge-utalk driver has been upgraded to version 0.81, which fixes
   the lack of read-write variables and loss of sync on models which
   don’t support restoring settings.
   [Arnaud Quette]
</li><li class="listitem">
The Micro Ferrups model RE is now supported by the bestuferrups
   driver.  The driver will also now read the ambient temperature and
   will no longer constantly report the data as stale.
   [Tim Thompson]
</li><li class="listitem">
The fentonups driver’s init sequence has been reworked to work better
   with some hardware, including a fix to the parser code.
   [MLH]
</li><li class="listitem">
A workaround has been added to the hidups driver to avoid variables
   which are stuck by calling HIDIOCINITREPORT in every poll.
   [Stuart D. Gathman]
</li><li class="listitem">
SOLA 610 UPS hardware and others which do not support the ID command
   may now be monitored by the bestups driver after forcing ID= in
   ups.conf.
   [Jason White]
</li><li class="listitem">
"pollinterval" is now available via driver.parameter for consistency.
   [Arnaud Quette]
</li><li class="listitem">
The mge-shut and newhidups drivers, along with the supporting
   hidparser/libhid code have received many updates, including lowering
   USB bandwidth consumption, driver unbinding (only in Linux), code
   cleanups, and more which can be seen in the ChangeLog file.
   [Arnaud Quette]
</li><li class="listitem"><p class="simpara">
The fentonups driver now recognizes several more Megatec protocol
   units:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
SuperPower HP360, Hope-550 [Denis Zaika]
</li><li class="listitem">
Unitek Alpha 1000is        [Antoine Cuvellard]
</li></ul></div></li><li class="listitem">
Some variables like uc_sigmask were renamed to avoid clashes with
   symbols on systems like HP/UX.
</li><li class="listitem">
All man pages have been reworked to switch literal "-" characters to
   hyphens or "\-" as appropriate.
   [Shaul Karl]
</li><li class="listitem">
upssched’s CANCEL events were broken following the change to
   text-based socket messages in 1.5 and have been fixed.
   [Steven Schoch]
</li><li class="listitem">
Calls to varargs functions with raw strings from the config files
   without an intervening "%s" have been fixed in upsmon, upssched,
   snmp-ups and upsd.
   [Ulf Harnhammar]
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_2_0_0_what_8217_s_new_since_1_4_x"></a>2.28. Release notes for NUT 2.0.0 - what’s new since 1.4.x</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
The new naming scheme for variables and commands (introduced in 1.4)
   is now mandatory.  The 1.4 tree supported both the old (STATUS) and
   the new (ups.status) as a transitional release, and now that time is
   over.
  
  
   This means that 2.0 is generally smaller than 1.4 code, since the
   interim compatibility hacks have been removed.
</li><li class="listitem">
New serial handling code has been added, with greatly simplified
   operations.  The old mess involving repeated calls to sigaction,
   alarm, and read has been condensed to a select-read loop.
  
  
   This change allows drivers which don’t do any serial communications
   at all (hidups, snmp-ups) to drop that baggage, so they are a bit
   smaller when compiled.
</li><li class="listitem">
The drivers now recognize "chroot=' and <span class="emphasis"><em>user=</em></span> in the global section
   of ups.conf.  This means you don’t have to use -r and -u when
   starting upsdrvctl.
</li><li class="listitem">
upsmon now supports the -K argument to check for the presence of the
   POWERDOWNFLAG file.  If it exists and contains the magic string, then
   upsmon will exit(EXIT_SUCCESS).  Otherwise, it will
   exit(EXIT_FAILURE).
  
  
   This feature can be used to simplify shutdown scripts, since now you
   don’t have to keep the script in sync with the upsmon.conf.
</li><li class="listitem">
Many small things like signed value comparisons, int vs. size_t and
   proper use of const/struct were fixed throughout the source.  These
   were mostly for correctness, but a few potential bugs involving very
   big or very small numbers were fixed at the same time.
</li><li class="listitem">
The access control system in upsd.conf has been reworked and
   simplified.  Since access levels have become meaningless in recent
   releases, the new system is just ACCEPT &lt;acl&gt; or REJECT &lt;acl&gt;.
  
  
   If you are upgrading from a previous version of the software, you
   will have to edit your upsd.conf to use this method.  See
   the <a class="ulink" href="UPGRADING.adoc" target="_top">UPGRADING.adoc</a> file for more details.
</li><li class="listitem">
The build process now halts when make fails in one of the
   subdirectories.
   [Petter Reinholdtsen, Charles Lepple]
</li><li class="listitem">
Helper data for using upsclient via pkgconfig is now created if
   pkgconfig is detected when configure runs.
   [Arnaud Quette]
</li><li class="listitem">
The polling interval in drivers may now be set with <span class="emphasis"><em>pollinterval</em></span>
   in ups.conf.
   [Gabriel Faber]
</li><li class="listitem">
Blazer UPS equipment is now supported with the blazer driver.
   [Phil Hutton]
</li><li class="listitem">
Energizer USB UPS hardware is now supported on Linux with a new
   experimental driver.
   [Viktor T. Toth]
</li><li class="listitem">
The newhidups driver has been merged as the first step towards
   portable USB UPS support.  This will eventually replace the old
   Linux-only hidups driver.  The newhidups driver is tagged
   experimental since it is under active development.
   [Arnaud Quette, Charles Lepple]
</li><li class="listitem">
The newapc driver has been renamed to apcsmart, replacing the old
   driver with that name. If you used the newapc driver, be sure to
   delete the old binary and fix your ups.conf.
</li><li class="listitem">
The apcsmart driver now supports asynchronous notification data
   from the hardware, which means it can wake up as soon as something
   happens.  This affects the OL/OB/LB/RB data in ups.status, and
   generally reduces the latency in dispatching status changes by a few
   seconds.
</li><li class="listitem">
The apcsmart driver can now support quirky hardware which does not
   provide the usual listing of valid command characters.  This feature
   is necessary to monitor new models like the APC CS 350 and old ones
   like the Matrix 5000.  It also now has sdtype=4 to handle the strange
   shutdown behavior on the CS series.
</li><li class="listitem">
The belkin driver now works around broken firmware version 001,
   avoiding a lengthy delay at startup.  It also implements the shutdown
   sequence differently, and should actually work on more hardware now.
</li><li class="listitem">
The bestups driver has been slowed down to play nicer with the
   hardware, and is much more reliable as a result.  Among other things,
   it should always detect the UPS on the first try, meaning no more
   "dot dot dot" when it starts.
</li><li class="listitem">
The cyberpower driver is no longer tagged experimental, and now
   supports powering off the load.  It also supports battery tests via
   instcmds.
</li><li class="listitem">
Effekta MT 2000 RM hardware is now supported by the fentonups driver.
   [Christoph Moar]
</li><li class="listitem">
The new safenet driver supports UPS hardware that uses the protocol
   of the same name.  This includes models from many manufacturers,
   including Fairstone, Fenton, Gemini, Powerwell, Repotec, Soltec and
   Sweex.  See the README or driver.list for the full details.
   [Arjen de Korte]
</li><li class="listitem">
The genericups driver now has type 20 to monitor the Powerware 5119
   RM.  See <a class="ulink" href="http://lists.exploits.org/ups/Oct2003/00052.html" target="_top">http://lists.exploits.org/ups/Oct2003/00052.html</a>.
   [Daniel Thompson]
</li><li class="listitem">
The belkinunv driver has been added to allow monitoring Belkin
   Universal UPS hardware.
   [Peter Selinger]
</li><li class="listitem">
Cyber Power Systems 1100AVR hardware which has a different protocol
   than the existing binary type (supported by <span class="emphasis"><em>cyberpower</em></span>) is now
   supported by the experimental cyberpower1100 driver.
   [Walt Holman]
</li><li class="listitem">
upsdrvctl now returns success or failure information in the exit
   code.  Any failure during a requested operation will result in a
   nonzero value (specifically EXIT_FAILURE).
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_1_4_0_what_8217_s_new_since_1_2_x"></a>2.29. Release notes for NUT 1.4.0 - what’s new since 1.2.x</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
The drivers and upsd now communicate over Unix domain sockets instead
   of state files, shared memory, or state files with mmap.  This change
   makes many things possible, including the new dynamic variable and
   command naming scheme described below.
  
  
   There is a new development tool called sockdebug in the server
   directory for debugging driver-server communications on the sockets.
</li><li class="listitem">
The old static variable scheme has been replaced by a new dynamic
   implementation.  Vague names have been turned into meaningful names
   that fit into an organized system.  UTILITY is now input.voltage.
   OUTVOLT is now output.voltage.
  
  
   This also applies to the names of instant commands.  BTEST1 is
   test.battery.start, and BTEST0 is test.battery.stop.
  
  
   The old names are still supported for compatibility with older
   clients.  This compatibility mode will be maintained throughout
   the 1.4 series, and will be gone by the release of 2.0.  Users
   with older clients are encouraged to upgrade their software
   during this time.
</li><li class="listitem">
The network protocol has been expanded to handle these new names.
   Older functions which only apply to the old names will continue to
   be supported through the 1.4 series.
</li><li class="listitem">
The drivers and server (upsd) can now change their user ids and
   chroot themselves with the new -u and -r arguments.  This lets you
   create a "chroot jail" with the bare minimum components.
  
  
   This technique is used to provide a higher degree of security.  If
   someone exploited upsd to get a shell somehow, they would be stuck
   in the jail.
</li><li class="listitem">
upssched now explicitly confirms reception of timer commands before
   exiting.  This was done to avoid a race where one process would
   exit right when another one was starting.  The second one would
   believe its command had been handled when it had been lost.
</li><li class="listitem">
upslog has been reworked to use standard getopt parsing to provide
   the monitoring settings.  The old way of specifying arguments is
   still supported for backwards compatibility.
  
  
   upslog has also been changed to only parse the format string once,
   rather than doing it every time through the loop.  This should
   provide a minuscule drop in CPU utilization.
</li><li class="listitem">
Usernames are now required in upsmon and upsd.  This means that you
   must add a username to your MONITOR lines in upsmon.conf and then
   create a matching user in upsd.users.
  
  
   Installations from the 1.2 era probably already used usernames, so
   this mostly affects those from 1.0 and before.
</li><li class="listitem">
Drivers are now pinged regularly by upsd when they aren’t posting
   updates about the UPS status.  This provides another check in the
   data validation process.  If upsd fails to get a response within
   a few seconds, the UPS will be marked stale.
</li><li class="listitem">
A few minor memory leaks were discovered with valgrind and squashed.
</li><li class="listitem">
upsstats now reuses connections to upsd when cycling through multiple
   entries in the hosts.conf.  This makes things a bit faster and
   avoids some of the noise in the syslog.
  
  
   This only applies to entries that are adjacent.  To take advantage
   of this feature, you may have to rearrange them per example below.
  
  
   Connection reuse for nonadjacent entries may be considered in the
   future.
</li></ul></div><pre class="screen">        MONITOR ups-1@host-1 ...
        MONITOR ups-1@host-2 ...
        MONITOR ups-2@host-2 ...
        MONITOR ups-3@host-3 ...</pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
upsd now warns about insecure configuration files at startup.
   These files (upsd.conf, upsd.users, and the certfile) should
   only be readable by upsd.  Never make them world-readable.
</li><li class="listitem">
The programs no longer print "shutting down" when they are just
   exiting.  This was changed to avoid confusion about the term, since
   "shutting down" has a special meaning in UPS software.
</li><li class="listitem">
Signal handlers no longer do any significant amount of work.  Some of
   the programs used to do numerous things in there, raising concerns
   about reentrancy.  They now set flags and allow the main loop to do
   the actual work from there.
</li><li class="listitem">
A bug in upsmon where NOTIFYFLAG settings could be ignored was fixed.
</li><li class="listitem">
Group handling has been changed.  configure no longer accepts
   --with-group, and the programs no longer setgid() to a hardcoded
   value.  They now setgid() to the primary group of whatever the
   user value may be.
  
  
   This may be compiled in with --with-user as before, and many programs
   accept -u to override it at runtime.
</li><li class="listitem">
The state path is no longer created during <span class="emphasis"><em>make install</em></span>.  Users
   are now expected to create it themselves.  This removes a lot of
   evil complexity from the build and install sequences.
</li><li class="listitem">
upsd no longer implements the DROP access command, as it
   could confuse the clients by getting them out of sync.  DROP is now
   implemented as DENY, which sends an error message.  If you use DROP,
   you should change it to DENY rather than relying on this
   compatibility measure.
</li><li class="listitem">
The belkin driver no longer reports OFF and OL at the same time.
</li><li class="listitem">
The bestups driver no longer sleeps during polls, which makes it
   more responsive to things like instant commands.
</li><li class="listitem">
The cyberpower driver now has much better hardware detection code
   and no longer freezes at startup under some conditions.  It also now
   supports the shutdown function.  Instant commands for shutdowns and
   battery tests were also added.
</li><li class="listitem">
The dummyups testing driver has been removed.  The dummycons testing
   driver can do everything that dummyups once did and much more.
   dummycons is also now built by default for easier testing.
</li><li class="listitem">
The newapc driver has been reworked to take advantage of the new
   internal driver state functions.  Some variables without an obvious
   purpose were dropped.
</li><li class="listitem">
The newapc driver now sends all five bytes when using sdtype 1.
   Previously it didn’t send the entire string, and it didn’t work.
   [Don Lewis]
</li><li class="listitem">
The hidups driver has been expanded to allow for setting variables,
   a shutdown sequence, and more.
   [Arnaud Quette]
</li><li class="listitem">
The mge-utalk driver had trouble establishing communications in
   some cases due to the RTS line being set.  This has been fixed.
  
  
   The mge-shut driver has been added to the tree, and has replaced
   the older mge-ellipse driver.
   [Arnaud Quette, Philippe Marzouk]
</li><li class="listitem">
Outlet-level control has been defined in the variable tree, and will
   be added to drivers where the hardware supports it.  This can be
   used to shut down some components earlier than others to prolong
   your runtime on battery.
  
  
   This is supported in the mge-shut driver now, and may show up in
   others before long.
   [Arnaud Quette]
</li><li class="listitem">
KIN-2200AP hardware is now recognized by the powercom driver.
   This change may also support other KIN-xxxxAP equipment.
   [Preston A. Elder]
</li><li class="listitem">
The 1.1kVA UPS is now supported by the bestuferrups driver.  This
   driver was also changed to allow easy addition of more models
   in the future.
   [Bob Apodaca]
</li><li class="listitem">
The fentonups driver can now handle devices which implement the
   "I" detection differently, and now supports the Giant/WELI 500
   as a result.
   [Joon Guillen]
</li><li class="listitem">
The serial number of the UPS being monitored can now be specified
   with serial= in ups.conf in the genericups driver.
   [Shaul Karl]
</li><li class="listitem">
The newapc driver now sends ESC to break out of menus when the
   initial detection fails.  Some new APC models have interactive menus
   on the serial port, and the driver couldn’t handle them before.
</li><li class="listitem">
The snmp-ups driver now reports ambient temperature and humidity
   data for APC equipment.  It also now supports the shutdown.reboot and
   shutdown.reboot.graceful commands.
   [Dmitry Frolov]
</li><li class="listitem">
The list of supported variables and commands in the snmp-ups driver
   has been expanded.
   [Arnaud Quette, J.W. Hoogervorst]
</li><li class="listitem">
Various drivers now report bypass mode with the BYP status word.
   [Arnaud Quette]
</li><li class="listitem">
Energy Sistem equipment is now supported with the esupssmart driver.
   [Antonio Trujillo Coronado]
</li><li class="listitem">
The Tripp-Lite SU series (SmartOnline) is supported with the new
   tripplitesu driver.
   [Allan Hessenflow]
</li><li class="listitem">
The HP PowerTrust A2994A is now recognized by the hp driver.
   [Jan Sporbeck]
</li><li class="listitem">
Many drivers were cleaned up to perform basic sanity checks on the
   status data before using it.
</li><li class="listitem">
An explicit cleanup function has been added to the driver core to
   ensure that all dynamic resources are freed before exiting.  This
   is part of the larger process to check for memory leaks and other
   bad things.
   [Arnaud Quette]
</li><li class="listitem">
upsd now provides variable descriptions from an auxiliary file.
   This file is optional, which allows for a smaller memory footprint.
   It can also be edited for localization or other customizations.
</li><li class="listitem">
upsimage and upsstats can now render BATTVOLT data.
   [Andrew R. Ghali]
</li><li class="listitem">
String handling has been cleaned up throughout the tree.  Calls to
   functions like strcpy and strcat were either replaced with other
   (range-checking) functions or were rewritten to avoid it.
</li><li class="listitem">
Many compile-time defaults may now be overridden at runtime.  In
   the environment NUT_CONFPATH and NUT_STATEPATH may be used.
   upsdrvctl has been changed to execve to pass these along to the
   drivers.  ups.conf now supports driverpath=, and upsd.conf supports
   DATAPATH.
   [Bryan Henderson]
</li><li class="listitem">
The configure --with-gd switches now actually do something useful
   when gd has been installed outside the default search directories.
   [Patrik Schindler]
</li><li class="listitem">
The inline keyword is now handled properly on systems which do not
   support it or have it specified as another name.  This was breaking
   compiles on some systems.
   [Petter Reinholdtsen]
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_1_2_2_what_8217_s_new_since_1_2_1"></a>2.30. Release notes for NUT 1.2.2 - what’s new since 1.2.1</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
The snmp-ups driver has been upgraded and expanded.  It now supports
   multiple MIBs, meaning it can handle RFC 1628, APCC, and MGE
   equipment.  You can pick the right one with "mibs=" in ups.conf.
  
  
   Support for setting variable and instant commands is also available.
   [Arnaud Quette and Dmitry Frolov]
</li><li class="listitem">
The powernet driver has been upgraded.  It now supports more
   variables, has cleaner logging, and may now be considered stable.
   [Dmitry Frolov]
</li><li class="listitem">
The hidups driver now supports physical port IDs.  This avoids most
   of the problems where the hiddev* names can jump around too easily.
   It will now stay in the same place as long as you keep it plugged
   into the same physical port.  See the ChangeLog file for more details.
   [David Brownell]
</li><li class="listitem">
The hidups driver now also supports the MFR variable on APC
   Back-UPS ES equipment.
   [Jonathan A. Davis]
</li><li class="listitem">
The sms driver has been updated to version 0.70.
   [Marcio Gomes]
</li><li class="listitem">
The bestups driver now recognizes Best Power Axxium Rackmount
   equipment.
   [Ales Casar]
</li><li class="listitem">
The liebert driver now uses O_NONBLOCK, and should now work
   consistently on OpenBSD as a result.
   [Alex Cichowski]
</li><li class="listitem">
The liebert driver also now uses debouncing logic on the status
   lines.  It was possible to get false readings that would start a
   shutdown or just annoy users with excessive onbatt/online notify
   messages.  The new code forces the status to settle down for 3 polls
   before accepting the new value.
  
  
   This means that very short power events may not be detected.  The
   alternative is having your machine shut down just because it decided
   to wiggle over to OB LB for a few seconds.
</li><li class="listitem">
upsmon has had the disconnect logic fixed so the "communications
   lost" (COMMBAD) notify will actually go out when the connection
   fails.
   [Steve Monett]
</li><li class="listitem">
upssched now uses a lock file to prevent a race where two could
   start at the same time.  The second upssched would "win", and the
   first one would be unreachable.  This had the side-effect of not
   being able to cancel timers on the first one.
  
  
   If you use upssched, you must define the LOCKFN directive when
   upgrading to this version, or it will not work.
   [Gaspar Bakos]
</li><li class="listitem">
The packaging and scripts for Red Hat systems have been updated.
   [Antonino Albanese]
</li><li class="listitem">
upsd is now a bit more lenient about access levels in the
   <span class="emphasis"><em>numlogins</em></span> check, which is what caused the problem in upsmon
   (next item).
</li><li class="listitem">
upsmon no longer gets stuck in slavesync() when upsd is configured
   to drop certain queries.  This usually happened at the worst
   possible time: in the middle of a shutdown.
   [John David Garza]
</li><li class="listitem">
The upsclient functions now do more sanity checking on data from
   upsd so a short read won’t return garbage to the callers.
</li><li class="listitem">
upsset now works properly with ENUM/VARTYPE values for multiple
   UPSes on a single upsd.
   [Dmitry Frolov]
</li><li class="listitem">
Various portability fixes for building on SGI were applied.
   [Andrea Suatoni]
</li><li class="listitem">
upsd no longer tries to reference a deleted client structure if the
   client disconnects at the wrong time.  Previously, it tried to use
   that pointer after the sendback() function had already failed on
   write and deleted the client.  This could cause upsd to segfault
   depending on what areas were accessed.
   [Patrik Schindler]
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_release_notes_for_nut_1_2_1_what_8217_s_new_since_1_2_0"></a>2.31. Release notes for NUT 1.2.1 - what’s new since 1.2.0</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
The sms driver is back, with support for Microlink Manager III
   hardware. [Marcio Gomes]
</li><li class="listitem">
Fideltronik Ares Series hardware is now supported as genericups
   type 19.  [Tomek Orzechowski and Arkadiusz Mikiewicz]
</li><li class="listitem">
The drivers no longer silently drop instant commands or set commands
   from upsd that happen to get fragmented in transit.
   [<a class="ulink" href="mailto:linux@horizon.com" target="_top">linux@horizon.com</a>]
</li><li class="listitem">
The old multilink driver is back with a new name: liebert.  It
   supports Liebert UPStation GXE hardware with the contact-closure
   cable.  This is currently an experimental driver as there is no
   way to power down the load.
</li><li class="listitem">
configure now picks up the right flags for gd automatically if gd
   2.0.8 or higher is installed.  This greatly simplifies the CGI build
   process for most users.
</li><li class="listitem">
Shutdowns on FreeBSD using the genericups driver should work again.
   [Petri Riihikallio]
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_historic_releases"></a>2.32. Historic releases</h3></div></div></div><p>More ancient history is not covered in detail here.</p><p>You can see <a class="ulink" href="docs/history.txt" target="_top">docs/history.txt</a> for more details.</p></div></div><div xmlns="" class="navfooter nut_footer"><hr />
		Last updated 2025-07-18 17:44:51 -- Network UPS Tools 2.8.3.707</div><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_introduction.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="NUT_Upgrading_Notes.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>