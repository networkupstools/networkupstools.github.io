<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>3. NUT Semantic Versioning</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><link rel="home" href="index.html" title="Network UPS Tools Developer Guide" /><link rel="up" href="index.html" title="Network UPS Tools Developer Guide" /><link rel="prev" href="design.html" title="2. NUT design document" /><link rel="next" href="developers.html" title="4. Information for developers" /><meta xmlns="" name="format-detection" content="telephone=no" /><script xmlns="" type="text/javascript">

// @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&dn=expat.txt Expat
//
// AnchorJS - v5.0.0 - 2023-01-18
// https://www.bryanbraun.com/anchorjs/
// Copyright (c) 2023 Bryan Braun; Licensed MIT
//
// @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&dn=expat.txt Expat
!function(A,e){"use strict";"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():(A.AnchorJS=e(),A.anchors=new A.AnchorJS)}(globalThis,function(){"use strict";return function(A){function u(A){A.icon=Object.prototype.hasOwnProperty.call(A,"icon")?A.icon:"",A.visible=Object.prototype.hasOwnProperty.call(A,"visible")?A.visible:"hover",A.placement=Object.prototype.hasOwnProperty.call(A,"placement")?A.placement:"right",A.ariaLabel=Object.prototype.hasOwnProperty.call(A,"ariaLabel")?A.ariaLabel:"Anchor",A.class=Object.prototype.hasOwnProperty.call(A,"class")?A.class:"",A.base=Object.prototype.hasOwnProperty.call(A,"base")?A.base:"",A.truncate=Object.prototype.hasOwnProperty.call(A,"truncate")?Math.floor(A.truncate):64,A.titleText=Object.prototype.hasOwnProperty.call(A,"titleText")?A.titleText:""}function d(A){var e;if("string"==typeof A||A instanceof String)e=[].slice.call(document.querySelectorAll(A));else{if(!(Array.isArray(A)||A instanceof NodeList))throw new TypeError("The selector provided to AnchorJS was invalid.");e=[].slice.call(A)}return e}this.options=A||{},this.elements=[],u(this.options),this.add=function(A){var e,t,o,i,n,s,a,r,l,c,h,p=[];if(u(this.options),0!==(e=d(A=A||"h2, h3, h4, h5, h6")).length){for(null===document.head.querySelector("style.anchorjs")&&((A=document.createElement("style")).className="anchorjs",A.appendChild(document.createTextNode("")),void 0===(h=document.head.querySelector('[rel="stylesheet"],style'))?document.head.appendChild(A):document.head.insertBefore(A,h),A.sheet.insertRule(".anchorjs-link{opacity:0;text-decoration:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}",A.sheet.cssRules.length),A.sheet.insertRule(":hover>.anchorjs-link,.anchorjs-link:focus{opacity:1}",A.sheet.cssRules.length),A.sheet.insertRule("[data-anchorjs-icon]::after{content:attr(data-anchorjs-icon)}",A.sheet.cssRules.length),A.sheet.insertRule('@font-face{font-family:anchorjs-icons;src:url(data:n/a;base64,AAEAAAALAIAAAwAwT1MvMg8yG2cAAAE4AAAAYGNtYXDp3gC3AAABpAAAAExnYXNwAAAAEAAAA9wAAAAIZ2x5ZlQCcfwAAAH4AAABCGhlYWQHFvHyAAAAvAAAADZoaGVhBnACFwAAAPQAAAAkaG10eASAADEAAAGYAAAADGxvY2EACACEAAAB8AAAAAhtYXhwAAYAVwAAARgAAAAgbmFtZQGOH9cAAAMAAAAAunBvc3QAAwAAAAADvAAAACAAAQAAAAEAAHzE2p9fDzz1AAkEAAAAAADRecUWAAAAANQA6R8AAAAAAoACwAAAAAgAAgAAAAAAAAABAAADwP/AAAACgAAA/9MCrQABAAAAAAAAAAAAAAAAAAAAAwABAAAAAwBVAAIAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAMCQAGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAg//0DwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAAIAAAACgAAxAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADAAAAAIAAgAAgAAACDpy//9//8AAAAg6cv//f///+EWNwADAAEAAAAAAAAAAAAAAAAACACEAAEAAAAAAAAAAAAAAAAxAAACAAQARAKAAsAAKwBUAAABIiYnJjQ3NzY2MzIWFxYUBwcGIicmNDc3NjQnJiYjIgYHBwYUFxYUBwYGIwciJicmNDc3NjIXFhQHBwYUFxYWMzI2Nzc2NCcmNDc2MhcWFAcHBgYjARQGDAUtLXoWOR8fORYtLTgKGwoKCjgaGg0gEhIgDXoaGgkJBQwHdR85Fi0tOAobCgoKOBoaDSASEiANehoaCQkKGwotLXoWOR8BMwUFLYEuehYXFxYugC44CQkKGwo4GkoaDQ0NDXoaShoKGwoFBe8XFi6ALjgJCQobCjgaShoNDQ0NehpKGgobCgoKLYEuehYXAAAADACWAAEAAAAAAAEACAAAAAEAAAAAAAIAAwAIAAEAAAAAAAMACAAAAAEAAAAAAAQACAAAAAEAAAAAAAUAAQALAAEAAAAAAAYACAAAAAMAAQQJAAEAEAAMAAMAAQQJAAIABgAcAAMAAQQJAAMAEAAMAAMAAQQJAAQAEAAMAAMAAQQJAAUAAgAiAAMAAQQJAAYAEAAMYW5jaG9yanM0MDBAAGEAbgBjAGgAbwByAGoAcwA0ADAAMABAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAH//wAP) format("truetype")}',A.sheet.cssRules.length)),h=document.querySelectorAll("[id]"),t=[].map.call(h,function(A){return A.id}),i=0;i<e.length;i++)if(this.hasAnchorJSLink(e[i]))p.push(i);else{if(e[i].hasAttribute("id"))o=e[i].getAttribute("id");else if(e[i].hasAttribute("data-anchor-id"))o=e[i].getAttribute("data-anchor-id");else{for(r=a=this.urlify(e[i].textContent),s=0;n=t.indexOf(r=void 0!==n?a+"-"+s:r),s+=1,-1!==n;);n=void 0,t.push(r),e[i].setAttribute("id",r),o=r}(l=document.createElement("a")).className="anchorjs-link "+this.options.class,l.setAttribute("aria-label",this.options.ariaLabel),l.setAttribute("data-anchorjs-icon",this.options.icon),this.options.titleText&&(l.title=this.options.titleText),c=document.querySelector("base")?window.location.pathname+window.location.search:"",c=this.options.base||c,l.href=c+"#"+o,"always"===this.options.visible&&(l.style.opacity="1"),""===this.options.icon&&(l.style.font="1em/1 anchorjs-icons","left"===this.options.placement)&&(l.style.lineHeight="inherit"),"left"===this.options.placement?(l.style.position="absolute",l.style.marginLeft="-1.25em",l.style.paddingRight=".25em",l.style.paddingLeft=".25em",e[i].insertBefore(l,e[i].firstChild)):(l.style.marginLeft=".1875em",l.style.paddingRight=".1875em",l.style.paddingLeft=".1875em",e[i].appendChild(l))}for(i=0;i<p.length;i++)e.splice(p[i]-i,1);this.elements=this.elements.concat(e)}return this},this.remove=function(A){for(var e,t,o=d(A),i=0;i<o.length;i++)(t=o[i].querySelector(".anchorjs-link"))&&(-1!==(e=this.elements.indexOf(o[i]))&&this.elements.splice(e,1),o[i].removeChild(t));return this},this.removeAll=function(){this.remove(this.elements)},this.urlify=function(A){var e=document.createElement("textarea");return e.innerHTML=A,A=e.value,this.options.truncate||u(this.options),A.trim().replace(/'/gi,"").replace(/[& +$,:;=?@"#{}|^~[`%!'<>\]./()*\\\n\t\b\v\u00A0]/g,"-").replace(/-{2,}/g,"-").substring(0,this.options.truncate).replace(/^-+|-+$/gm,"").toLowerCase()},this.hasAnchorJSLink=function(A){var e=A.firstChild&&-1<(" "+A.firstChild.className+" ").indexOf(" anchorjs-link "),A=A.lastChild&&-1<(" "+A.lastChild.className+" ").indexOf(" anchorjs-link ");return e||A||!1}}});
// @license-end

		</script><style xmlns="" type="text/css">
		a.anchorjs-link {
			color: inherit;
			text-decoration: inherit;
		}
		a.anchorjs-link:visited {
			color: inherit;
			text-decoration: inherit;
		}
	</style></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="design.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="developers.html">Next</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="versioning"></a>3. NUT Semantic Versioning</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_historic_note"></a>3.1. Historic note</h3></div></div></div><p>Historically, the Network UPS Tools project release and interim iterations
code base versions were identified by three or four numeric components,
roughly following the Semantic Versioning (SEMVER) traditions, later
codified as a formal standard at <a class="ulink" href="https://semver.org/" target="_top">semver.org</a>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
NUT uses the GNU autotools suite for recipe orchestration, and the version
  string is specified in the <code class="literal">configure.ac</code> file an <code class="literal">AC_INIT</code> macro, which
  further generates variables like <code class="literal">PACKAGE_VERSION</code>, <code class="literal">PACKAGE_URL</code> and others
  used (substituted) in the actual code base, often via <code class="literal">nut_version.h</code> file.
</li><li class="listitem">
NUT releases were identified by a <code class="literal">MAJOR.MINOR.PATCH</code> triplet, which
  was not strictly following the standard in that while the "major" part
  did reflect architectural/design changes, and "minor" part reflected some
  significant development milestones or API changes, the "patch" part did
  not correspond to post-release fixes but reflected iterative development,
  of which releases were the better-reviewed snapshots. Such a triplet was
  only spelled in <code class="literal">AC_INIT</code> for the commit tagged as that release.
</li><li class="listitem"><p class="simpara">
Until NUT v2.6.x, the odd values of the <code class="literal">MINOR</code> component meant development
  code trees, and even values meant the stable tree. This approach was
  skipped (or effectively abandoned, as over a decade passed) with the
  move to Git branches for development — as numerous NUT v2.7.x based
  releases were produced, and development continued into NUT v2.8.x.
</p><div class="note" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Note</h3><p>The project reserves an option to return to the even-odd cadence
(and perhaps proper major-minor-patch versioning on stable tree) later.</p></div></li><li class="listitem">
NUT development versions were specified by the next commit after a
  release was published, spelling an <code class="literal">AC_INIT</code> macro argument like
  <code class="literal">MAJOR.MINOR.PATCH.1</code> to provide a fourth component — which is
  logically "greater than" <code class="literal">MAJOR.MINOR.PATCH</code> for comparisons, so that
  the developed version can formally be installed over a preceding
  release (e.g. from custom testing packages).
</li></ul></div><p>This configuration with a single development version (<code class="literal">.1</code>) was not very
helpful for the faster pace of iterations, especially as the Git workflow
and pull requests were adopted as the way of iterating the NUT development.
This did not really help identify the build being tested by CI or reported
by a community member, nor quickly determine if one custom build is "newer"
than another (e.g. can be a recommended upgrade from the previously installed
snapshot to check if some bug was fixed).</p><p>Some experiments were done adding the <code class="literal">git describe</code> output to version
banners reported by programs. These provide the number of commits since
the most-recent known git tag, as well as the git hash of the NUT sources
involved. This made the builds better identifiable, but did not help
compare the feature branches and the main trunk of development: any code
committed after a release has its own count of commits since that tag,
this one number does not really suffice.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_current_nut_semver_definition"></a>3.2. Current NUT SEMVER definition</h3></div></div></div><p>Since NUT v2.8.3, the definition which goes into <code class="literal">AC_INIT</code> and further into
the code was extended in a manner similar to what <code class="literal">git describe</code> produces,
but with added numbers after the common triplet of semantically versioned
numbers: <code class="literal">X.Y.Z(.T(.B(-C+H(+R))))</code> or <code class="literal">X.Y.Z(.T(.B(-R)))</code></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">
Standard semver (used in releases):
</p><div class="note" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Note</h3><p>Historically NUT did not <span class="strong"><strong>diligently</strong></span> follow the standard semver triplet,
primarily because a snapshot of trunk is tested and released, and work
moves on with the PATCH part (rarely MINOR one) incremented; no actual
patches are released to some sustaining track of an older release lineage.
There were large re-designs that got MAJOR up to 2, though.</p></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
<code class="literal">X</code>: MAJOR - incompatible API changes
</li><li class="listitem">
<code class="literal">Y</code>: MINOR - major new features and/or API evolution
</li><li class="listitem">
<code class="literal">Z</code>: PATCH - bug fixes (and new features like added drivers)
</li></ul></div></li><li class="listitem"><p class="simpara">
Extended semver (for snapshots of trunk):
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
T: (optional) Commits on trunk since previous release tag
</li></ul></div></li><li class="listitem"><p class="simpara">
Extended semver (for features branched off trunk):
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">
B: (optional) Commits on branch since nearest ancestor which is on trunk
</li></ul></div></li></ul></div><p>The optional suffix (only for commits which are not git tags themselves)
is provided by <code class="literal">git describe</code>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
C: Commits on branch since previous release tag
</li><li class="listitem">
H: (Short) Git hash (prefixed by "g" character) of the described commit
</li></ul></div><p>The pre-release information (if provided/known) would either follow the
optional suffix detailed above, or it would be the suffix itself:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
R: If this commit has a non-release tag, it can be optionally reported
     so we know that a commit some <span class="emphasis"><em>1234</em></span> iterations after release <span class="emphasis"><em>N</em></span> is
     also a release candidate for <span class="emphasis"><em>N+1</em></span>. Note that any dash in that tag value
     will be replaced by a plus, e.g. <code class="literal">2.8.2.2878.1-2879+g882dd4b00+v2.8.3+rc6</code>
</li></ul></div><p>The numeric part of NUT SEMVER definition mostly follows <a class="ulink" href="https://semver.org/" target="_top">https://semver.org/</a>
except that for development iterations the base version may have up to
five dot-separated numeric components (SEMVER triplet for base release,
and additional data described above). Unlike standard semver provisions
for "pre-release versions" (separated by a minus sign after the triplet),
which are "less than" that release for comparisons, the fourth and fifth
components (if present) are "greater than" that release and any preceding
development iterations made after it.</p><p>Helper script <code class="literal">tools/gitlog2version.sh</code> is used to determine the project
version from packager-provided override files (or equivalents provided by
<code class="literal">make dist</code> in a snapshot/release tarball), git metadata from the current
workspace, or built-in fallback defaults.</p><p>Occasionally there may be tagged pre-releases, which follow the standard
semver markup, like <code class="literal">v2.8.0-rc3</code> (in git), however they would be converted
to NUT SEMVER here (as a number of commits since previous release) by default.</p><p>A special case, which can mostly be seen in CI builds, concerns shallow git
checkouts — when the currently built commit history is "grafted" (perhaps
down to there being only one commit in the whole git index), and we do not
know of any intersections with git tags or development trunk.  In this case,
the script may not only fall back to a built-in version following a legacy
<code class="literal">X.Y.Z.1</code> pattern for non-release builds (like <code class="literal">2.8.3.1</code>), but would also
append a <code class="literal">-0-g{HASH}</code> suffix to the long values (<code class="literal">VER5</code>, <code class="literal">VER50</code>, <code class="literal">DECS5</code>,
<code class="literal">DESC50</code>) yielding e.g. <code class="literal">2.8.3.1.0-0+gb3f21f9</code> for a build from a shallow
git checkout of commit <code class="literal">b3f21f9</code> of a code base which otherwise fell back
to <code class="literal">2.8.3.1</code> hard-coded in its copy of the script (bumped by a maintainer
as part of the release process).</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_using_gitlog2version_sh"></a>3.3. Using gitlog2version.sh</h3></div></div></div><p>The script can be controlled by environment variables, including some sourced
from configuration files. It identifies a number of data items, and reports
the one specified by <code class="literal">NUT_VERSION_QUERY</code> on <code class="literal">stdout</code>.</p><div class="note" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Note</h3><p>It does not currently have a query to report "everything" in a manner
that can be processed by <code class="literal">eval</code> in calling shell scripts (or <code class="literal">Makefile</code> rule
implementations).</p></div><div class="table"><a id="idm283"></a><p class="title"><strong>Table 1. Environment variables that can be used for external configuration</strong></p><div class="table-contents"><table class="table" summary="Environment variables that can be used for external configuration" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; "><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Variable</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Description</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><pre class="literallayout">Example</pre></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">abs_top_srcdir</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Top source directory</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">/home/abuild/nut</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">abs_top_builddir</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Top build directory (defaults to <code class="literal">abs_top_srcdir</code>)</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">/home/abuild/.builds/linux/nut</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_VERSION_FORCED</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Set <code class="literal">NUT_VERSION_DEFAULT</code> (extended NUT SEMVER,
                          may be just a triplet) to this value and enforce
                          <code class="literal">NUT_VERSION_PREFER_GIT=false</code>. Usually sourced
                          from <code class="literal">${abs_top_srcdir}/VERSION_FORCED</code> (if present)</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.2.2379</code>
</li><li class="listitem">
<code class="literal">2.8.3-rc3</code>
</li><li class="listitem">
<code class="literal">2.8.2.2878.3-2881+g45029249f+v2.8.3+rc6</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_VERSION_FORCED_SEMVER</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Set <code class="literal">SEMVER</code> (exactly a triplet) to this value
                          regardless of <code class="literal">NUT_VERSION_PREFER_GIT</code> setting. Usually
                          sourced from <code class="literal">${abs_top_srcdir}/VERSION_FORCED_SEMVER</code>
                          (if present)</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.3</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_VERSION_DEFAULT</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Usually sourced from either
                          ‘${abs_top_builddir}/VERSION_DEFAULT` (if present)
                          or <code class="literal">${abs_top_srcdir}/VERSION_DEFAULT</code> (if present),
                          in which case the script also defaults
                          <code class="literal">NUT_VERSION_PREFER_GIT=false</code> (unless it is already
                          specified as <code class="literal">true</code> or <code class="literal">${abs_top_srcdir}/.git</code> exists).
                          If no value was provided, a hard-coded value is used
                          (updated as part of maintainers’ release rituals).</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.2.2379.2-2381+g1faa9945d</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_VERSION_PREFER_GIT</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>If not provided by caller, or sourced files,
                          or defaulted with <code class="literal">NUT_VERSION_FORCED</code> or
                          <code class="literal">NUT_VERSION_DEFAULT</code> as described above, as a <code class="literal">false</code>
                          value, then becomes <code class="literal">true</code> if <code class="literal">${abs_top_srcdir}/.git</code>
                          exists or <code class="literal">false</code> otherwise (tarball builds)</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">true</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_WEBSITE</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Default website URL, extended for historic sub-sites for
                          a release</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">https://www.networkupstools.org/</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_VERSION_GIT_TRUNK</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Git branch name to use for calculation of
                          current codebase distance from main development (as known
                          in local workspace index); by default, the newest branch named
                          like <code class="literal">master</code> is located (any competition is same or ancestor)</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">origin/master</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_VERSION_GIT_ALL_TAGS</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>If <code class="literal">true</code>, consider usual (not "annotated")
                          tags too</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">false</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_VERSION_GIT_ALWAYS_DESC</code></p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>If <code class="literal">true</code>, tell git to return just a commit
                          hash if no tag was matched in index.</p></td><td style="" align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">false</code>
</li></ul></div></td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="idm433"></a><p class="title"><strong>Table 2. Intermediate variables in Git workspace processing</strong></p><div class="table-contents"><table class="table" summary="Intermediate variables in Git workspace processing" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; "><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Variable</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Description</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><pre class="literallayout">Example (development and release)</pre></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">DESC</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Originates from <code class="literal">git describe</code>, filtered for releases (<code class="literal">vX.Y.Z</code>)
                  and ignoring various <code class="literal">rc</code>, <code class="literal">alpha</code>, <code class="literal">beta</code> etc. tags.
                  This yields the tag name, followed by number of commits added to
                  current <code class="literal">HEAD</code> history since that tag, and the current commit hash.
                  In the resulting string, the git hash is separated by a "plus"
                  sign (as semver build metadata) rather than the "minus" returned
                  by the tool.</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">v2.8.2-2381+g1faa9945d</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">TAG</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Nearest (annotated by default) tag preceding the <code class="literal">HEAD</code> in history:
                  the part of <code class="literal">DESC</code> before the commit count and hash.</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">v2.8.2</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">BASE</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>The <code class="literal">git merge-base</code> of current commit and <code class="literal">NUT_VERSION_GIT_TRUNK</code>
                  (see above). How much of the known trunk history is in current HEAD?
                  This may be "all of it" when we are on that branch or PR made from
                  its tip, "some of it" if looking at a historic snapshot, or "nothing"
                  if looking at the tagged commit (it is the merge base for itself and
                  any of its descendants)</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">e9a48c9afeb4e06c758a3f4215977445c0f64780</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">SUFFIX</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Commit count since the tag and hash of the <code class="literal">HEAD</code> commit;
                          empty e.g. when <code class="literal">HEAD</code> is the tagged commit</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">-2381+g1faa9945d</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">VER5</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Full 5-component version, note we strip leading <code class="literal">v</code> from the expected
                  <code class="literal">TAG</code> value</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.2.2379.2</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">DESC5</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Full 5-component version <code class="literal">VER5</code> concatenated with <code class="literal">SUFFIX</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.2.2379.2-2381+g1faa9945d</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">VER50</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">VER5</code> without trailing <code class="literal">.0</code> in fifth or fourth component</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
dev: <code class="literal">2.8.2.2379.2</code>
</li><li class="listitem">
trunk: <code class="literal">2.8.2.2379.0</code> ⇒ <code class="literal">2.8.2.2379</code>
</li><li class="listitem">
release: <code class="literal">2.8.2.0.0</code> ⇒ <code class="literal">2.8.2</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">DESC50</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">VER50</code> concatenated with <code class="literal">SUFFIX</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
release: <code class="literal">2.8.2-2381-g1faa9945d</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">SEMVER</code></p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Exactly three leading numeric components.
                          Either <code class="literal">NUT_VERSION_FORCED_SEMVER</code> (if provided by caller or
                          configuration files), or derived from <code class="literal">VER5</code> (removing fourth
                          and fifth numbers)</p></td><td style="" align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.0</code>
</li></ul></div></td></tr></tbody></table></div></div><br class="table-break" /><div class="table"><a id="idm576"></a><p class="title"><strong>Table 3. Intermediate variables in default (non-git — tarball or forced) processing</strong></p><div class="table-contents"><table class="table" summary="Intermediate variables in default (non-git — tarball or forced) processing" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; "><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Variable</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Description</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><pre class="literallayout">Example (development and release)</pre></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_VERSION_DEFAULT_DOTS</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Processed from <code class="literal">NUT_VERSION_DEFAULT</code> (see above)
                          to count just the dot characters</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
dev: <code class="literal">....</code>
</li><li class="listitem">
trunk: <code class="literal">...</code>
</li><li class="listitem">
release: <code class="literal">..</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_VERSION_DEFAULT5_DOTS</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Grows from <code class="literal">NUT_VERSION_DEFAULT_DOTS</code>,
                          used to construct <code class="literal">NUT_VERSION_DEFAULT5</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">....</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_VERSION_DEFAULT5</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Constructed from <code class="literal">NUT_VERSION_DEFAULT</code>, adding <code class="literal">.0</code>
                          numeric components as needed, to have <span class="strong"><strong>at least 5</strong></span> of them</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.2.0.0</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_VERSION_DEFAULT3_DOTS</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Decreases from <code class="literal">NUT_VERSION_DEFAULT_DOTS</code>,
                          used to construct <code class="literal">NUT_VERSION_DEFAULT3</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">..</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_VERSION_DEFAULT3</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Constructed from <code class="literal">NUT_VERSION_DEFAULT</code>, adding <code class="literal">.0</code>
                          numeric components as needed or dropping extras, to have
                          <span class="strong"><strong>exactly 3</strong></span> of them</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.0</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">SUFFIX</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Empty, unless <code class="literal">NUT_VERSION_DEFAULT</code> had a suffix
                          for pre-release information roughly matching the
                          <code class="literal">-(rc|alpha|beta)[0-9]*</code> regular expression</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">""</code>
</li><li class="listitem">
<code class="literal">-rc6</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">VER5</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Full 5-component version, <code class="literal">NUT_VERSION_DEFAULT5</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.2.2379.2</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">DESC5</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Constructed as <code class="literal">${VER5}${SUFFIX}</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.2.2379.2</code>
</li><li class="listitem">
<code class="literal">2.8.3.0.0-rc6</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">VER50</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_VERSION_DEFAULT</code> as provided by caller or
                          defaulted, may be with or without trailing <code class="literal">.0</code> in fifth or
                          fourth components</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.2.1</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">DESC50</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Constructed as <code class="literal">${VER50}${SUFFIX}</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.2.1</code>
</li><li class="listitem">
<code class="literal">2.8.3-rc6</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">BASE</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Empty (no known common commits with no trunk)</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">""</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">SEMVER</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Exactly three leading numeric components.
                          Either <code class="literal">NUT_VERSION_FORCED_SEMVER</code> (if provided by caller or
                          configuration files), or <code class="literal">NUT_VERSION_DEFAULT3</code> (see above)</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.0</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">SUFFIX_DESC</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Optionally populated to construct <code class="literal">DESC</code> (trimming
                          rc/alpha/beta suffixes from <code class="literal">SUFFIX</code>, if any)</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">""</code>
</li><li class="listitem">
<code class="literal">-123+gc0ffee</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">DESC</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Constructed from <code class="literal">NUT_VERSION_DEFAULT</code> for consistency,
                          as <code class="literal">v${NUT_VERSION_DEFAULT3}${SUFFIX_DESC}</code>, to emulate
                          what <code class="literal">git describe</code> would have returned, to support NUT
                          SEMVER values saved "as is" into dist tarball files</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">""</code>
</li><li class="listitem">
<code class="literal">v2.8.0</code>
</li><li class="listitem">
<code class="literal">v2.8.3-786+gadfdbe3ab</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">TAG</code></p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Constructed as <code class="literal">v${NUT_VERSION_DEFAULT3}${SUFFIX}</code></p></td><td style="" align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">v2.8.0</code>
</li><li class="listitem">
<code class="literal">v2.8.3-rc6</code>
</li></ul></div></td></tr></tbody></table></div></div><br class="table-break" /><p>The majority of identified values can be reported for debugging to <code class="literal">stderr</code>,
currently as a single line (wrapped for readability in the sample below):</p><pre class="screen">:; ./tools/gitlog2version.sh
SEMVER=2.8.2;
TRUNK='master';
BASE='e9a48c9afeb4e06c758a3f4215977445c0f64780';
DESC='v2.8.2-2381+g1faa9945d'
=&gt; TAG='v2.8.2' + SUFFIX='-2381+g1faa9945d'
=&gt; VER5='2.8.2.2379.2'
=&gt; VER50='2.8.2.2379.2'
=&gt; DESC50='2.8.2.2379.2-2381+g1faa9945d'</pre><div class="table"><a id="idm811"></a><p class="title"><strong>Table 4. Values reported via <code class="literal">NUT_VERSION_QUERY</code></strong></p><div class="table-contents"><table class="table" summary="Values reported via NUT_VERSION_QUERY" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; "><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_VERSION_QUERY</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Description</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><pre class="literallayout">Example (development and release)</pre></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">DESC5</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Full 5-component version (concatenated with <code class="literal">SUFFIX</code> for git)</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
dev: <code class="literal">2.8.2.2379.2-2381+g1faa9945d</code>
</li><li class="listitem">
snapshot tarball: <code class="literal">2.8.2.2379.2</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">DESC50</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>3-to-5 non-zero component version (concatenated with <code class="literal">SUFFIX</code>
                          for git)</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
dev: <code class="literal">2.8.2.2381-2381+g1faa9945d</code>
</li><li class="listitem">
snapshot tarball: <code class="literal">2.8.2.1</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">VER5</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Full 5-component version</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
dev: <code class="literal">2.8.2.2379.2</code>
</li><li class="listitem">
snapshot tarball: <code class="literal">2.8.2.1.0</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">VER50</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>3-to-5 non-zero component version</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
dev: <code class="literal">2.8.2.2379.2</code>
</li><li class="listitem">
release tarball: <code class="literal">2.8.0</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">DESC5X</code>, <code class="literal">DESC50X</code>, <code class="literal">VER5X</code> and <code class="literal">VER50X</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Expanded variants of respective
                          reports, with leading zeroes padding up the initial
                          dot-separated numbers to <code class="literal">${NUT_VERSION_EXTRA_WIDTH}</code>
                          (minimum 6) digits each, allowing for easy scripted
                          alphanumeric comparisons of different NUT releases
                          regardless of digit count in original components.</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
VER5X with also <code class="literal">NUT_VERSION_EXTRA_WIDTH=9</code>:
                            <code class="literal">000000002.000000008.000000004.000000910.000000002</code>
</li><li class="listitem">
DESC5X with default width (6):
                            <code class="literal">000002.000008.000004.000910.000002-912+g081755da0</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">SEMVER</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Exactly three leading numeric components</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.2</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">IS_RELEASE</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">true</code> if <code class="literal">SEMVER</code>==<code class="literal">VER50</code>, <code class="literal">false</code> otherwise</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
dev: <code class="literal">false</code>
</li><li class="listitem">
rel: <code class="literal">true</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">IS_PRERELEASE</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">true</code> if <code class="literal">SUFFIX_PRERELEASE</code> is not empty, <code class="literal">false</code> otherwise</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
dev: <code class="literal">false</code>
</li><li class="listitem">
rel/RC: <code class="literal">true</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">TAG</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>GIT: Nearest (annotated by default) tag preceding the <code class="literal">HEAD</code> in history.
                  DEFAULT: Constructed from <code class="literal">SEMVER</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">v2.8.2</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">TAG_PRERELEASE</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>GIT: if the <code class="literal">HEAD</code> itself has a tag matching
                  the <code class="literal">-(rc|alpha|beta)[0-9]*</code> regular expression.
                  DEFAULT: Constructed from <code class="literal">NUT_VERSION_DEFAULT3</code>
                  and <code class="literal">SUFFIX_PRERELEASE</code>.
                  Empty for not-pre-releases.</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">v2.8.2-rc3</code>
</li><li class="listitem">
<code class="literal">""</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">TRUNK</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>GIT: Branch name used for calculation of current codebase
                          distance from main development.
                          DEFAULT: empty.</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">master</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">SUFFIX</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>GIT: Commit count since the tag and hash of the <code class="literal">HEAD</code> commit
                          DEFAULT: empty for non-prerelease <code class="literal">NUT_VERSION_DEFAULT</code>
                          values, or either value of <code class="literal">SUFFIX_PRERELEASE</code> with a
                          leading dash for <code class="literal">NUT_VERSION_DEFAULT</code> values without
                          git offset info (e.g. <code class="literal">2.8.3.5-rc6</code> ⇒ <code class="literal">-rc6</code>), or the
                          whole tail with git and pre-release tag info.</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
dev: <code class="literal">-2381+g1faa9945d</code>
</li><li class="listitem">
RC git: <code class="literal">-2381+g1faa9945d+v2.8.3+rc6</code>
</li><li class="listitem">
RC default: <code class="literal">-rc6</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">SUFFIX_PRERELEASE</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>GIT: Constructed from <code class="literal">TAG_PRERELEASE</code> replacing any
                          dash with a plus character.
                          DEFAULT: empty unless <code class="literal">NUT_VERSION_DEFAULT</code> has a
                          suffix matching the <code class="literal">-(rc|alpha|beta)[0-9]*</code>
                          regular expression, or git info followed by
                          the pre-release tag.
              NOTE: No leading dash in this value (unlike <code class="literal">SUFFIX</code>).</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
RC git: <code class="literal">v2.8.3+rc6</code>
</li><li class="listitem">
RC default: <code class="literal">rc6</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">BASE</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>GIT: Newest common commit of development <code class="literal">TRUNK</code> and the <code class="literal">HEAD</code>
                          commit (their <code class="literal">git merge-base</code>).
                          DEFAULT: empty.</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">e9a48c9afeb4e06c758a3f4215977445c0f64780</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">URL</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Clarify the project website URL — particularly historically
                          frozen snapshots made for releases</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
dev: <code class="literal">https://www.networkupstools.org/</code> (default development)
</li><li class="listitem">
rel: <code class="literal">https://www.networkupstools.org/historic/v2.8.2/index.html</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">UPDATE_FILE</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Used in <code class="literal">autogen.sh</code> and top-level <code class="literal">Makefile.am</code> to
                          update the <code class="literal">VERSION_DEFAULT</code> file that goes into "dist"
                          tarballs; prints its contents</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">NUT_VERSION_DEFAULT='2.8.2.2379.2-2381+g1faa9945d'</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">UPDATE_FILE_GIT_RELEASE</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Used in maintainer rituals (requires git) to
                          update the <code class="literal">VERSION_FORCED</code> and <code class="literal">VERSION_FORCED_SEMVER</code>
                          files that go into "dist" tarballs; prints their contents</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">NUT_VERSION_FORCED='2.8.2.2878.3-2881+g45029249f+v2.8.3+rc6'</code>
</li><li class="listitem">
<code class="literal">NUT_VERSION_FORCED_SEMVER='2.8.3'</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>default</p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Report <code class="literal">DESC50</code></p></td><td style="" align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">v2.8.2-2381-g1faa9945d</code>
</li></ul></div></td></tr></tbody></table></div></div><br class="table-break" /><div class="note" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Note</h3><p>To facilitate version comparisons of different NUT iterations in scripts,
the "expanded variants" of the two versions can be requested.  This pads each
semver component (but not other numbers) with zeroes to a specified width (by
default 6 digits):</p><pre class="screen">:; NUT_VERSION_QUERY=VER5X \
   NUT_VERSION_FORCED=3.14.159.2653.59-2712+gdeadbeef \
   gitlog2version.sh 2&gt;/dev/null
000003.000014.000159.002653.000059</pre><p>If you map this as an e.g. tab-separated list of "expanded" and original
version strings, you can use the shell <code class="literal">sort</code> command to find the oldest
and newest builds, construct an ordered list for downloads, etc.</p><p>Keep in mind that you should not use those zero-padded component numbers
in shell math operations, as they would be considered octal numbers (and
possibly invalid ones, if they contain digits <code class="literal">8</code> or <code class="literal">9</code>). You can revert
the operation with envvar toggle <code class="literal">NUT_VERSION_STRIP_LEADING_ZEROES=true</code>
(note it only impacts the leading dot-separated numbers semver part of the
string, but not any numbers in the suffix):</p><pre class="screen">:; NUT_VERSION_QUERY=DESC5 \
   NUT_VERSION_FORCED=3.014.00159.02653.05-002658+gdeadbeef+v01.002.0003 \
   NUT_VERSION_STRIP_LEADING_ZEROES=true \
   gitlog2version.sh 2&gt;/dev/null
3.14.159.2653.5-002658+gdeadbeef+v01.002.0003</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_using_semver_compare_sh"></a>3.4. Using semver-compare.sh</h3></div></div></div><p>As a result of work on <code class="literal">gitlog2version.sh</code>, and specifically the next-level
problems of managing the data set of multiple NUT SEMVER strings (sorting,
comparisons, etc.), another helper script was born: the <code class="literal">semver-compare.sh</code>.</p><p>It contains the implementation of "expanded variants" of the versions and
"stripping leading zeroes" used above by the original <code class="literal">gitlog2version.sh</code>
script, as well as more features used by, for example, the <code class="literal">Makefile.am</code>
recipes for <a class="ulink" href="https://github.com/networkupstools/nut-website" target="_top">nut-website</a>
which deal with sorted lists of NUT versions for the DDL page rendering
(reports about same device model which originated from different NUT releases).</p><p>Common options for scripted actions are (must be mentioned before the action):</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">{--width|-w} NUM</code>
</span></dt><dd>
Pad semver components with leading zeroes to this width (default/min <code class="literal">6</code>).
</dd><dt><span class="term">
<code class="literal">{--min-components} NUM</code>
</span></dt><dd><p class="simpara">
Ensure there are at least so many components - add <code class="literal">.0</code> in the end if
needed (NUT SEMVER default is <code class="literal">5</code> for <code class="literal">expand</code> action).
</p><div class="note" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Note</h3><p>Not implemented yet for stripping extra zeroed components from a semver.</p></div></dd></dl></div><p>Actions which can be repeated on same command line include:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">semver-compare.sh [OPTS] expand "SEMVER"</code>
</span></dt><dd>
Pad components in semver start of string with leading zeroes up to desired
width.
</dd><dt><span class="term">
<code class="literal">semver-compare.sh [OPTS] strip "SEMVER"</code>
</span></dt><dd>
Strip leading zeroes from components in semver start of string.
</dd><dt><span class="term">
<code class="literal">semver-compare.sh [OPTS] --sortable-expand "SEMVER"</code>
</span></dt><dd>
Print a tab-separated line with expanded variant in first column,
and original in second (so you can <code class="literal">sort</code> by the first column).
</dd><dt><span class="term">
<code class="literal">semver-compare.sh [OPTS] --sortable-strip "SEMVER"</code>
</span></dt><dd>
Print a tab-separated line with original (presumed expanded) variant in first
column, and stripped in second (so you can <code class="literal">sort</code> by the first column).
</dd></dl></div><p>Actions which end the script execution include:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">semver-compare.sh [OPTS] sort [-r] "SEMVER" "SEMVER"...</code>
</span></dt><dd>
Return sorted (via expansion) list of original semver strings (till end
of args), in their original spelling (with leading zeroes, if present,
not stripped away).
</dd><dt><span class="term">
<code class="literal">semver-compare.sh [OPTS] {test|[} "SEMVER1" {-gt|-ge|-lt|-le|-eq|=|==|-ne|!=|&lt;&gt;|&lt;|&lt;=|&gt;|&gt;=} "SEMVER2"</code>
</span></dt><dd><p class="simpara">
Shell-style syntax to compare two semver strings (via expanded variants).
</p><p class="simpara">Note that <code class="literal">--min-components</code> can play a role here (e.g. is <code class="literal">1.2.3</code> equal
to <code class="literal">1.2.3.0.0</code>? You can specify whether and how many zeroes can be added
so it would be or not be equal).</p></dd></dl></div><div class="note" style="margin-left: 0; margin-right: 10%;"><h3 class="title">Note</h3><p>If you would <code class="literal">sort</code> expanded semver strings yourself, be sure
to NOT mention the numeric sorting option — it misbehaves for strings
which do not look like exactly an integer or floating-point number.</p></div><p>For portability and non-regression, the functionality of both scripts is
extensively tested by <code class="literal">tests/nut-driver-enumerator-test.sh</code> in the NUT code
base.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_variables_propagated_by_configure_ac"></a>3.5. Variables propagated by configure.ac</h3></div></div></div><div class="table"><a id="idm1186"></a><p class="title"><strong>Table 5. Values reported via <code class="literal">NUT_VERSION_QUERY</code></strong></p><div class="table-contents"><table class="table" summary="Values reported via NUT_VERSION_QUERY" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; "><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Variable</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Description</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><pre class="literallayout">Example (development and release)</pre></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">PACKAGE_VERSION</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Argument to <code class="literal">AC_INIT</code> determined by
                          <code class="literal">NUT_VERSION_QUERY=VER50 gitlog2version.sh</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
dev: <code class="literal">2.8.2.695.1</code>
</li><li class="listitem">
trunk: <code class="literal">2.8.2.695</code>
</li><li class="listitem">
release: <code class="literal">2.8.2</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">PACKAGE_URL</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Argument to <code class="literal">AC_INIT</code> determined by
                          <code class="literal">NUT_VERSION_QUERY=URL gitlog2version.sh</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
dev/trunk: <code class="literal">https://www.networkupstools.org/</code>
</li><li class="listitem">
release: <code class="literal">https://www.networkupstools.org/historic/v2.8.2/index.html</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_WEBSITE_BASE</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Derived from <code class="literal">PACKAGE_URL</code> without a trailing slash
                          nor <code class="literal">index.html</code> (prefixed to documentation file URLs, etc.)</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
dev/trunk: <code class="literal">https://www.networkupstools.org</code>
</li><li class="listitem">
release: <code class="literal">https://www.networkupstools.org/historic/v2.8.2</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_SOURCE_GITREV</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Determined by <code class="literal">NUT_VERSION_QUERY=DESC50 gitlog2version.sh</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.2.695.1-696+g0e00f0777</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_SOURCE_GITREV_SEMVER</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Determined by <code class="literal">NUT_VERSION_QUERY=SEMVER gitlog2version.sh</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.2</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_SOURCE_GITREV_NUMERIC</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Determined by <code class="literal">NUT_SOURCE_GITREV</code> leaving only the numbers,
                          e.g. for PyPI uploads (currently without the total commit count)</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.2.695.1</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_SOURCE_GITREV_IS_RELEASE</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Determined by <code class="literal">NUT_VERSION_QUERY=IS_RELEASE gitlog2version.sh</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">true</code>
</li><li class="listitem">
<code class="literal">false</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_SOURCE_GITREV_IS_PRERELEASE</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Determined by <code class="literal">NUT_VERSION_QUERY=IS_PRERELEASE gitlog2version.sh</code></p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">true</code>
</li><li class="listitem">
<code class="literal">false</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">NUT_SOURCE_GITREV_DEVREL</code></p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>String determined by <code class="literal">NUT_SOURCE_GITREV_IS_RELEASE</code></p></td><td style="" align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">"release"</code>
</li><li class="listitem">
<code class="literal">"development iteration"</code>
</li></ul></div></td></tr></tbody></table></div></div><br class="table-break" /></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_variables_propagated_by_nut_version_h"></a>3.6. Variables propagated by nut_version.h</h3></div></div></div><div class="table"><a id="idm1335"></a><p class="title"><strong>Table 6. Values encoded via <code class="literal">include/nut_version.h</code>, generated by <code class="literal">include/Makefile.am</code></strong></p><div class="table-contents"><table class="table" summary="Values encoded via include/nut_version.h, generated by include/Makefile.am" cellpadding="4px" style="border-collapse: collapse;border-top: 3px solid #527bbd; border-bottom: 3px solid #527bbd; border-left: 3px solid #527bbd; border-right: 3px solid #527bbd; "><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /></colgroup><tbody><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Variable</p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Description</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><pre class="literallayout">Example (development and release)</pre></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">#define NUT_VERSION_MACRO "$NUT_VERSION"</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Determined by default <code class="literal">gitlog2version.sh</code> (no <code class="literal">NUT_VERSION_QUERY</code>)
                  at the moment of latest build, or (as fallback) <code class="literal">PACKAGE_VERSION</code>
                  set during the last run of <code class="literal">configure</code> script</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.2.695.1</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">#define NUT_VERSION_SEMVER_MACRO "$GITREV_SEMVER"</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Determined by <code class="literal">NUT_VERSION_QUERY=SEMVER gitlog2version.sh</code> at the
                  moment of latest build, or (as fallback) <code class="literal">NUT_SOURCE_GITREV_SEMVER</code>
                  set during the last run of <code class="literal">configure</code> script</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">2.8.2</code>
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">#define NUT_VERSION_IS_RELEASE &lt;0-or-1&gt;</code></p></td><td style="border-right: 1px solid #527bbd; border-bottom: 1px solid #527bbd; " align="left" valign="top"><p>Determined by <code class="literal">NUT_VERSION_QUERY=IS_RELEASE gitlog2version.sh</code>
                  (falls back to <code class="literal">false</code> if that query fails)</p></td><td style="border-bottom: 1px solid #527bbd; " align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">1</code> if <code class="literal">$GITREV_IS_RELEASE</code>
</li><li class="listitem">
<code class="literal">0</code> otherwise
</li></ul></div></td></tr><tr><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p><code class="literal">#define NUT_VERSION_IS_PRERELEASE &lt;0-or-1&gt;</code></p></td><td style="border-right: 1px solid #527bbd; " align="left" valign="top"><p>Determined by <code class="literal">NUT_VERSION_QUERY=IS_PRERELEASE gitlog2version.sh</code>
                  (falls back to <code class="literal">false</code> if that query fails)</p></td><td style="" align="left" valign="top"><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
<code class="literal">1</code> if <code class="literal">$GITREV_IS_PRERELEASE</code>
</li><li class="listitem">
<code class="literal">0</code> otherwise
</li></ul></div></td></tr></tbody></table></div></div><br class="table-break" /></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_use_in_c_code"></a>3.7. Use in C code</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_common_nut_version_c"></a>common-nut_version.c</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
The <code class="literal">NUT_VERSION_MACRO</code> is used in <code class="literal">common/common-nut_version.c</code> and further
  made known to all code base as a static string <code class="literal">UPS_VERSION</code> linked via
  <code class="literal">libcommon*.la</code> internal libraries.
</li><li class="listitem"><p class="simpara">
Method <code class="literal">describe_NUT_VERSION_once()</code> prepares the string which combines the
  <code class="literal">NUT_VERSION_MACRO</code> with comments that it is either a <code class="literal">release</code> or a
  <code class="literal">(development iteration after $NUT_VERSION_SEMVER_MACRO)</code>, based on
  the value of <code class="literal">NUT_VERSION_IS_RELEASE</code>.
</p><p class="simpara">It is used from a number of other methods, such as <code class="literal">print_banner_once()</code>,
  <code class="literal">nut_report_config_flags()</code>, and so ends up in version reports of programs
  via their <code class="literal">help()</code>/<code class="literal">usage()</code> methods.</p></li><li class="listitem">
Method <code class="literal">suggest_doc_links()</code> prepares a uniform bit of text for driver and
  tool programs to report in their <code class="literal">help()</code>/<code class="literal">usage()</code> methods, to refer to
  their manual page under the <code class="literal">NUT_WEBSITE_BASE</code>.
</li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_use_in_resource_files_and_documentation"></a>3.8. Use in resource files and documentation</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_man_pages"></a>Man pages</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
Manual pages and other documentation consume the <code class="literal">PACKAGE_VERSION</code>,
  <code class="literal">PACKAGE_VERSION</code> and <code class="literal">NUT_WEBSITE_BASE</code> as <code class="literal">asciidoc</code> attributes
  when rendering HTML/PDF/man document formats.
</li><li class="listitem">
The <code class="literal">NUT_WEBSITE_BASE</code> is also substituted instead of literal
  <code class="literal">https://www.networkupstools.org/*</code> which follows a <code class="literal">home page:</code> prefix
  (so that the pages rendered for a release refer to the historic website).
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_systemd_and_smf_manifests"></a>systemd and SMF manifests</h4></div></div></div><p>Service manifests include references to documentation for the tools they wrap,
including published pages under the <code class="literal">NUT_WEBSITE_BASE</code> for the development or
historic variants of the NUT website.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_nut_monitor_python_ui_and_pynutclient"></a>NUT-Monitor (Python UI) and PyNUTClient</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
The <code class="literal">PACKAGE_VERSION</code> and <code class="literal">NUT_WEBSITE_BASE</code> are reported in the About dialog.
</li><li class="listitem">
Version information is propagated into PyPI packages for the <code class="literal">PyNUTClient</code>
  module.
</li></ul></div></div></div></div><div xmlns="" class="navfooter nut_footer"><hr />
		Last updated 2025-12-23 11:45:13 -- Network UPS Tools 2.8.4.993</div><script xmlns="" type="text/javascript">anchors.add();</script><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="design.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="developers.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>